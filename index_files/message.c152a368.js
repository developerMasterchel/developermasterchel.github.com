webpackJsonp([1],{"+gDl":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_5.c37431b7.png"},"/flV":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.isAttention=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator),_utils=(exports.isAttention=function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(imcore,oppositeImId){var data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.getonecontactotherinfo,"type":"post","data":{"oppositeImId":oppositeImId}});case 3:if(data=_context.sent,!data.flag){_context.next=8;break}return _context.abrupt("return",data.data);case 8:(0,_utils2.hKilledAccountAlert)(imcore,data);case 9:_context.next=14;break;case 11:_context.prev=11,_context.t0=_context["catch"](0),imcore.handleErr(_context.t0);case 14:case"end":return _context.stop()}},_callee,this,[[0,11]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}(),__webpack_require__("c3kU")),_config=(__webpack_require__("O4JY"),__webpack_require__("CJQX")),_config2=_interopRequireDefault(_config),_utils2=__webpack_require__("PQSX")},"/pPQ":function(module,exports,__webpack_require__){"use strict";function sendMsgReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sendMsgInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.SEND_IMG_START:case _actions.ActionType.SEND_IMG_FAIL:case _actions.ActionType.SEND_IMG_SUCC:return Object.assign({},state,action.payload);default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.sendMsgInitialState=void 0,exports.sendMsgReducer=sendMsgReducer;var _actions=__webpack_require__("IPoy"),sendMsgInitialState=exports.sendMsgInitialState={"fileRefresh":!0,"pictureDom":null}},"0EL3":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function HistoryMsg(props){var env=props.env,userInfo=props.userInfo,targetInfo=props.targetInfo,message=props.message,day=message.day,time=message.time,from=message.from,isSend=from===userInfo.oppositeImId,historyContent=void 0;return historyContent=(0,_history.messageHistoryFilter)(message)?"c"==env?renderContentC(message):"b"==env?renderContentB(message):renderContentH(message):"c"==env?_react2["default"].createElement("div",{"className":"content"},_enums.CompatibleExtType.CANNOT_SHOW_CIMG):"b"==env?_react2["default"].createElement("div",{"className":"content"},_enums.CompatibleExtType.CANNOT_SHOW_BIMG):_react2["default"].createElement("div",{"className":"content"},_enums.CompatibleExtType.CANNOT_SHOW_HIMG),_react2["default"].createElement("div",{"className":"historymsg"},day&&_react2["default"].createElement("h4",null,day),_react2["default"].createElement("p",{"className":isSend?"send":"receive"},_react2["default"].createElement("label",null,isSend?userInfo.oppositeUserName:targetInfo.oppositeUserNameShow||targetInfo.oppositeUserName),_react2["default"].createElement("time",null,time)),historyContent)}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=HistoryMsg;var _react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=(__webpack_require__("PQSX"),__webpack_require__("HW6M")),_constants=(_interopRequireDefault(_classnames),__webpack_require__("E9QE")),_enums=__webpack_require__("O4JY"),_history=__webpack_require__("zG6l"),_imgPreview=__webpack_require__("et+h"),_imgPreview2=_interopRequireDefault(_imgPreview);__webpack_require__("jrvr");var renderContentC=function(message){var data=message.data,type=message.type,extType=message.extType,name=message.name,resumeUrl=message.resumeUrl,senderKind=message.senderKind,company=message.company,dqName=message.dqName,salary=message.salary,title=message.title,jobHref=message.jobHref,jobLabel=void 0;if("img"===type)return _react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("a",{"href":"javascript:;","onClick":function(){(0,_imgPreview2["default"])({"src":data})},"className":"preview-image"},_react2["default"].createElement("img",{"src":data})));switch(extType){case _enums.ExtType.MESSAGE_RESUME:return _react2["default"].createElement("div",{"className":"content"},"[委托的简历] ",_react2["default"].createElement("a",{"href":resumeUrl,"target":"_blank"},name+"的简历"));case _enums.ExtType.MESSAGE_SEND_JOB:return jobLabel=senderKind==_constants.UserType.USER_TYPE_C?"[我感兴趣的职位] ":senderKind==_constants.UserType.USER_TYPE_B?"[邀您应聘的职位] ":senderKind==_constants.UserType.USER_TYPE_H?"[为你推荐的职位] ":"[职位] ",_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("div",{"className":"job"},_react2["default"].createElement("p",null,jobLabel,_react2["default"].createElement("a",{"href":jobHref,"target":"_blank"},title,_react2["default"].createElement("span",{"className":"text-warning"}," [",salary,"]"))),_react2["default"].createElement("p",null,_react2["default"].createElement("label",null,company),_react2["default"].createElement("label",null,dqName))));case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:if(senderKind==_constants.UserType.USER_TYPE_C)return _react2["default"].createElement("div",{"className":"content"},"[您的简历已发送至对方]");if(senderKind==_constants.UserType.USER_TYPE_H)return _react2["default"].createElement("div",{"className":"content"},"[应聘的简历] ",_react2["default"].createElement("a",{"href":resumeUrl,"target":"_blank"},name+"的简历"));break;case _enums.ExtType.MESSAGE_SEND_NAMECARD:return _react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("p",null,"建议您发送简历后再沟通，提高求职效率。"),"[发送名片]");case _enums.ExtType.MESSAGE_ASK_RESUME:return _react2["default"].createElement("div",{"className":"content"},"[索要简历]我想要一份你的简历，你是否同意？");case _enums.ExtType.MESSAGE_SEND_RATINGBAR:return _react2["default"].createElement("div",{"className":"content"},"[请为猎头服务做出评价]");case _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK:return _react2["default"].createElement("div",{"className":"content"},"[已拒绝推荐职位]");case _enums.ExtType.MESSAGE_SEND_APPLYSUCFEEDBACK:return _react2["default"].createElement("div",{"className":"content"},"[已接受推荐职位]");default:return _react2["default"].createElement("div",{"className":"content"},data)}},renderContentB=function(message){var data=message.data,type=message.type,extType=message.extType,name=message.name,resumeUrl=message.resumeUrl,senderKind=message.senderKind,company=message.company,dqName=message.dqName,salary=(message.dq,message.salary),title=message.title,jobHref=message.jobHref,jobLabel=(message.workyear,message.res_edulevel,void 0);if("img"===type)return _react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("a",{"href":"javascript:;","onClick":function(){(0,_imgPreview2["default"])({"src":data})},"className":"preview-image"},_react2["default"].createElement("img",{"src":data})));switch(extType){case _enums.ExtType.MESSAGE_SEND_JOB:return jobLabel=senderKind==_constants.UserType.USER_TYPE_C?"[我感兴趣的职位] ":"[邀请您应聘的职位] ",_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("div",{"className":"job"},_react2["default"].createElement("p",null,jobLabel,_react2["default"].createElement("a",{"href":jobHref,"target":"_blank"},title,_react2["default"].createElement("span",{"className":"text-warning"}," [",salary,"]"))),_react2["default"].createElement("p",null,_react2["default"].createElement("label",null,company),_react2["default"].createElement("label",null,dqName))));case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:return _react2["default"].createElement("div",{"className":"content"},"[应聘的简历] ",_react2["default"].createElement("a",{"href":resumeUrl,"target":"_blank"},name+"的简历"));case _enums.ExtType.MESSAGE_SEND_NAMECARD:return _react2["default"].createElement("div",{"className":"content"},"[发送名片] ",name,"的名片");case _enums.ExtType.MESSAGE_ASK_RESUME:return _react2["default"].createElement("div",{"className":"content"},"索要简历的请求已发送");default:return _react2["default"].createElement("div",{"className":"content"},data)}},renderContentH=function(message){var data=message.data,type=message.type,extType=message.extType,name=message.name,resumeUrl=message.resumeUrl,senderKind=message.senderKind,company=message.company,dqName=message.dqName,salary=(message.dq,message.salary),title=message.title,jobHref=message.jobHref,jobLabel=(message.workyear,message.res_edulevel,void 0);if("img"===type)return _react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("a",{"href":"javascript:;","onClick":function(){(0,_imgPreview2["default"])({"src":data})},"className":"preview-image"},_react2["default"].createElement("img",{"src":data})));switch(extType){case _enums.ExtType.MESSAGE_RESUME:return _react2["default"].createElement("div",{"className":"content"},"[委托的简历] ",_react2["default"].createElement("a",{"href":resumeUrl,"target":"_blank"},name+"的简历"));case _enums.ExtType.MESSAGE_SEND_JOB:return jobLabel=senderKind==_constants.UserType.USER_TYPE_C?"[我感兴趣的职位] ":"[职位] ",_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("div",{"className":"job"},_react2["default"].createElement("p",null,jobLabel,_react2["default"].createElement("a",{"href":jobHref,"target":"_blank"},title,_react2["default"].createElement("span",{"className":"text-warning"}," [",salary,"]"))),_react2["default"].createElement("p",null,_react2["default"].createElement("label",null,company),_react2["default"].createElement("label",null,dqName))));case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:return _react2["default"].createElement("div",{"className":"content"},"[应聘的简历] ",_react2["default"].createElement("a",{"href":resumeUrl,"target":"_blank"},name+"的简历"));case _enums.ExtType.MESSAGE_SEND_NAMECARD:return _react2["default"].createElement("div",{"className":"content"},"[发送名片] ",name,"的名片");case _enums.ExtType.MESSAGE_ASK_RESUME:return _react2["default"].createElement("div",{"className":"content"},"索要简历的请求已发送");case _enums.ExtType.MESSAGE_SEND_RATINGBAR:return _react2["default"].createElement("div",{"className":"content"},"[请为猎头服务做出评价]");case _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK:return _react2["default"].createElement("div",{"className":"content"},"[已拒绝推荐职位]");case _enums.ExtType.MESSAGE_SEND_APPLYSUCFEEDBACK:return _react2["default"].createElement("div",{"className":"content"},"[已接受推荐职位]");default:return _react2["default"].createElement("div",{"className":"content"},data)}}},"1Rhn":function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function messageReceiveFilter(){var receiveMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},receiveType=arguments[1],payload=JSON.parse(receiveMessage.payload),extType=payload.ext&&payload.ext.extType,extBody=payload.ext&&payload.ext.extBody;switch(receiveType){case"Text":case"Emoji":if((1!=extBody.messageSource||0!=extBody.receiverKind||0!=extBody.senderKind||extType!==_enums.ExtType.MESSAGE_RESUME)&&_enums.CompatibleExtType.TXT_EXT_TYPES_ARR.includes(extType))return!0;break;case"Picture":if(_enums.CompatibleExtType.IMG_EXT_TYPES_ARR.includes(extType))return!0}return!1}function createReceiveMsg(message,receiveType){var msg=new ReceiveMsg;switch(receiveType){case"Text":case"Emoji":return msg.set(message,"txt");case"Picture":return msg.set(message,"img");case"Audio":return msg.set(message,"audio")}}function createReceiveMsgByPlainMsg(message){return(new ReceiveMsg).setByPlainMsg(message)}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.ReceiveMsg=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_regenerator),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.messageReceiveFilter=messageReceiveFilter,exports.createReceiveMsg=createReceiveMsg,exports.createReceiveMsgByPlainMsg=createReceiveMsgByPlainMsg;var _enums=__webpack_require__("O4JY"),_api=__webpack_require__("xkCR"),ReceiveMsg=(function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj["default"]=obj}(_api),exports.ReceiveMsg=function(){function ReceiveMsg(){_classCallCheck(this,ReceiveMsg)}return _createClass(ReceiveMsg,[{"key":"set","value":function(message){var dataType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"txt";this.type=dataType,this.message=message;var payload=JSON.parse(message.payload);return this.msgBody={"id":payload.ext.id||message.msgId,"ext":payload.ext,"timestamp":message.msgTime?new Date(message.msgTime).getTime():Date.now(),"read":message.readflag,"type":dataType,"extType":payload.ext.extType,"bodies":payload.bodies[0],"sign":payload.ext.extBody.sign},"0"===message.direction?Object.assign(this.msgBody,{"from":message.imId,"fromtype":message.imUserType,"to":message.oppositeImId,"totype":message.oppositeImUserType}):"1"===message.direction&&Object.assign(this.msgBody,{"from":message.oppositeImId,"fromtype":message.oppositeImUserType,"to":message.imId,"totype":message.imUserType}),"img"===dataType?(this.value=this.msgBody.bodies.url,this.msgBody.filename=this.msgBody.bodies.filename,this.msgBody.data=this.msgBody.bodies.url||""):(this.initByExtType(payload.ext.extType,payload.ext.extBody,this.msgBody.bodies.msg),this.msgBody.data=this.msgBody.bodies.msg||""),this}},{"key":"initByExtType","value":function(extType,extBody,data){switch(extType){case _enums.ExtType.MESSAGE_SEND_JOB:this.msgBody.jobKind=extBody.jobKind,this.msgBody.jobId=extBody.jobId,this.msgBody.senderKind=extBody.senderKind,this.msgBody.bsData=extBody.bsData||null;break;case _enums.ExtType.MESSAGE_RESUME:this.msgBody.userId=extBody.userInfo?extBody.userInfo.userId:this.msgBody.from;break;case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:this.msgBody.jobId=extBody.jobId;break;case _enums.ExtType.MESSAGE_SEND_RATINGBAR:break;case _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK:this.msgBody.reason=extBody.reason,this.msgBody.jobKind=extBody.jobKind,this.msgBody.jobId=extBody.jobId,this.msgBody.senderKind=extBody.senderKind;break;case _enums.ExtType.MESSAGE_SEND_APPLYSUCFEEDBACK:this.msgBody.jobKind=extBody.jobKind,this.msgBody.jobId=extBody.jobId,this.msgBody.senderKind=extBody.senderKind;break;case _enums.ExtType.MESSAGE_TEXT:case _enums.ExtType.MESSAGE_SEND_TOOLTIP:if("string"==typeof data)this.value=data;else if(Array.isArray(data)){var html=data.map(function(item){return"emotion"===item.type?'<img src="'+item.data+'">':item.data});this.value=html.join("")}break;case _enums.ExtType.MESSAGE_SEND_NAMECARD:this.msgBody.jobKind=extBody.jobKind,this.msgBody.jobId=extBody.jobId;break;case _enums.ExtType.MESSAGE_ASK_RESUME:this.msgBody.jobId=extBody.jobId,this.msgBody.jobKind=extBody.jobKind}}},{"key":"setByPlainMsg","value":function(message){return Object.assign(this,message)}},{"key":"getId","value":function(){return this.msgBody.id}},{"key":"setRead","value":function(){return this.msgBody.read=!0,this}},{"key":"getExtType","value":function(){return this.msgBody.extType}},{"key":"getType","value":function(){return this.msgBody.type}},{"key":"getTimestamp","value":function(){return this.msgBody.timestamp}},{"key":"getTo","value":function(){return this.msgBody.to}},{"key":"getFrom","value":function(){return this.msgBody.from}},{"key":"getOppositeUserInfo","value":function(imcore){var oppositeUserKind=this.msgBody.ext.extBody.senderKind,oppositeImUserType=this.msgBody.fromtype,oppositeImId=this.msgBody.from;return imcore.userInfo.oppositeImId===this.msgBody.from&&(oppositeUserKind=this.msgBody.ext.extBody.receiverKind,oppositeImUserType=this.msgBody.totype,oppositeImId=this.msgBody.to),{"oppositeImId":oppositeImId,"oppositeImUserType":oppositeImUserType,"oppositeUserId":this.msgBody.ext.extBody.senderUserId||this.message.oppositeUserId,"oppositeUserKind":oppositeUserKind}}},{"key":"getBody","value":function(){return this.msgBody}},{"key":"getSign","value":function(){return this.msgBody.ext.extBody.sign}},{"key":"getLastMsgFormat","value":function(){var content={"ext":{"extType":this.msgBody.ext.extType,"extBody":this.msgBody.ext.extBody},"bodies":[{"msg":this.value,"type":this.type}]};return{"latestMsgId":"","lastPayload":JSON.stringify(content),"latestMsgTime":this.getTimestamp()}}},{"key":"fillInfo","value":function(){function fillInfo(_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(imcore){var receiverKind,senderKind,info;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,receiverKind=this.msgBody&&this.msgBody.ext&&this.msgBody.ext.extBody&&this.msgBody.ext.extBody.receiverKind,senderKind=this.msgBody&&this.msgBody.ext&&this.msgBody.ext.extBody&&this.msgBody.ext.extBody.senderKind,receiverKind==senderKind){_context.next=11;break}return _context.next=6,imcore.fillInfo(imcore,this.msgBody,this.msgBody.ext.extBody);case 6:if(_context.t0=_context.sent,_context.t0){_context.next=9;break}_context.t0={};case 9:info=_context.t0,Object.assign(this.msgBody,Object.assign({},info));case 11:return _context.abrupt("return",this);case 14:throw _context.prev=14,_context.t1=_context["catch"](0),imcore.handleErr(_context.t1),_context.t1;case 18:case"end":return _context.stop()}},_callee,this,[[0,14]])}));return fillInfo}()}]),ReceiveMsg}())},"1iL5":function(module,exports,__webpack_require__){"use strict";function whenMapStateToPropsIsFunction(mapStateToProps){return"function"==typeof mapStateToProps?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapStateToProps,"mapStateToProps"):void 0}function whenMapStateToPropsIsMissing(mapStateToProps){return mapStateToProps?void 0:(0,_wrapMapToProps.wrapMapToPropsConstant)(function(){return{}})}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.whenMapStateToPropsIsFunction=whenMapStateToPropsIsFunction,exports.whenMapStateToPropsIsMissing=whenMapStateToPropsIsMissing;var _wrapMapToProps=__webpack_require__("U33l");exports["default"]=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing]},"1jiI":function(module,exports,__webpack_require__){"use strict";function showUserSetting(){return function(dispatch,getState){dispatch({"type":ActionType.USERSETTING_DIALOG,"payload":!0})}}function hideUserSetting(){return function(dispatch,getState){dispatch({"type":ActionType.USERSETTING_DIALOG,"payload":!1})}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.showUserSetting=showUserSetting,exports.hideUserSetting=hideUserSetting;var _config=(__webpack_require__("c3kU"),__webpack_require__("CJQX")),_ActionType=(function(obj){obj&&obj.__esModule}(_config),__webpack_require__("TV+w")),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType);__webpack_require__("acFS"),__webpack_require__("E9QE")},"1tRL":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy");__webpack_require__("W7pN");var Sns=function(_Component){function Sns(props){return _classCallCheck(this,Sns),_possibleConstructorReturn(this,(Sns.__proto__||Object.getPrototypeOf(Sns)).call(this,props))}return _inherits(Sns,_Component),_createClass(Sns,[{"key":"render","value":function(){var _props=this.props,activeTab=_props.activeTab,sns=_props.sns;_props.imcore,_props.actions;return _react2["default"].createElement("div",{"className":(0,_classnames2["default"])("sns",{"hide":"sns"!==activeTab.key})},sns.map(function(v,i){return _react2["default"].createElement("ul",{"key":i,"className":"contact-list"},v.map(function(m,n){if(m.count>=0)return _react2["default"].createElement("li",{"key":n},_react2["default"].createElement("a",{"href":m.url,"target":"_blank"},_react2["default"].createElement("dl",{"className":"clearfix"},_react2["default"].createElement("dt",null,_react2["default"].createElement("span",{"className":"person-arrow"===m.icon||"person-arr"===m.icon?"back-brown":"building"===m.icon?"back-red":"concern"===m.icon?"back-pink":"back-blue"},_react2["default"].createElement("i",{"className":(0,_classnames2["default"])("webim-icons24","icons24-"+m.icon)})),_react2["default"].createElement("i",{"className":"dot"})),_react2["default"].createElement("dd",null,m.txt),_react2["default"].createElement("dd",{"className":(0,_classnames2["default"])("number")},m.count))))}))}))}}]),Sns}(_react.Component),mapStateToProps=function(state){return{"activeTab":state.panel.activeTab,"sns":state.sns.sns}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.snsActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(Sns)},"28Po":function(module,exports,__webpack_require__){"use strict";function overArg(func,transform){return function(arg){return func(transform(arg))}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=overArg},"2KeS":function(module,exports,__webpack_require__){"use strict";(function(process){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function isCrushed(){}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.compose=exports.applyMiddleware=exports.bindActionCreators=exports.combineReducers=exports.createStore=void 0;var _createStore=__webpack_require__("ZBO9"),_createStore2=_interopRequireDefault(_createStore),_combineReducers=__webpack_require__("x52Y"),_combineReducers2=_interopRequireDefault(_combineReducers),_bindActionCreators=__webpack_require__("lCUn"),_bindActionCreators2=_interopRequireDefault(_bindActionCreators),_applyMiddleware=__webpack_require__("vgv3"),_applyMiddleware2=_interopRequireDefault(_applyMiddleware),_compose=__webpack_require__("lMc7"),_compose2=_interopRequireDefault(_compose),_warning=__webpack_require__("DEeB"),_warning2=_interopRequireDefault(_warning);"production"!==process.env.NODE_ENV&&"string"==typeof isCrushed.name&&"isCrushed"!==isCrushed.name&&(0,_warning2["default"])("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build."),exports.createStore=_createStore2["default"],exports.combineReducers=_combineReducers2["default"],exports.bindActionCreators=_bindActionCreators2["default"],exports.applyMiddleware=_applyMiddleware2["default"],exports.compose=_compose2["default"]}).call(exports,__webpack_require__("W2nU"))},"2SDu":function(module,exports,__webpack_require__){"use strict";function getLocalStorageKey(userId){return{"PANEL_IS_READ_KEY":userId+"_contact_panel_is_read","ALL_MSG_KEY":userId+"_im_msg","TABS_UNREAD":userId+"_tabs_unread_cnt","CONTACTS_UNREAD":userId+"_contacts_unread"}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.getLocalStorageKey=getLocalStorageKey},"2hHQ":function(module,exports){},"2w8q":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.configureStore=void 0;var _redux=__webpack_require__("2KeS"),_reduxThunk=__webpack_require__("4ufr"),_reduxThunk2=_interopRequireDefault(_reduxThunk),_reducers=__webpack_require__("SCLk"),_reducers2=_interopRequireDefault(_reducers);exports.configureStore=function(initialState){var middleware=(0,_redux.applyMiddleware)(_reduxThunk2["default"]);return(0,_redux.createStore)(_reducers2["default"],initialState,middleware)}},"3Xkc":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_actions=__webpack_require__("IPoy"),_addTlog=__webpack_require__("rF9R"),_redux=__webpack_require__("2KeS"),_ActionType=__webpack_require__("TV+w"),_reactRedux=(function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj["default"]=obj}(_ActionType),__webpack_require__("PQSX"),__webpack_require__("RH2O"));__webpack_require__("3Ztg");var ChatTitleHattention=function(_Component){function ChatTitleHattention(props){_classCallCheck(this,ChatTitleHattention);var _this=_possibleConstructorReturn(this,(ChatTitleHattention.__proto__||Object.getPrototypeOf(ChatTitleHattention)).call(this,props));return _this.config=(0,_config2["default"])(props.imcore.env),_this.state={"showHdrop":!1},_this}return _inherits(ChatTitleHattention,_Component),_createClass(ChatTitleHattention,[{"key":"componentDidMount","value":function(){var _this2=this;$(document).on("click.showAttention",function(e){if(e.target===_this2.attentionBtn||e.target===_this2.attentionSelect||$(_this2.attentionSelect).has(e.target).length>0)return!1;_this2.closeAttentionDrop()})}},{"key":"componentWillUnmount","value":function(){$(document).off("click.showAttention")}},{"key":"showAttentionDrop","value":function(e){e.nativeEvent.stopImmediatePropagation(),this.setState({"showHdrop":!0})}},{"key":"closeAttentionDrop","value":function(){this.setState({"showHdrop":!1})}},{"key":"attention","value":function(e){e.stopPropagation();var _props=this.props,imcore=_props.imcore,actions=_props.actions;_props.dispatch,_props.activeContact;window.tlog=window.tlog||[],tlog.push(this.config.tlogs.ATTENTION_BTN),Apps.Attention&&Apps.Attention.add({"ids":this.props.activeContact.usercEncodeId},function(){actions.updateHattention(imcore,!0)})}},{"key":"cancelAttention","value":function(e){var _this3=this;e.stopPropagation();var _props2=this.props,imcore=_props2.imcore,actions=_props2.actions;_props2.dispatch,_props2.activeContact;window.tlog=window.tlog||[],tlog.push(this.config.tlogs.CANCEL_ATTENTION_BTN),Apps.Attention&&Apps.Attention.remove(this.props.activeContact.usercEncodeId,function(){_this3.setState({"showHdrop":!1}),actions.updateHattention(imcore,!1)})}},{"key":"changeGroup","value":function(e){e.stopPropagation(),Apps.Attention.add({"ids":this.props.activeContact.usercEncodeId,"mend":!0},function(){})}},{"key":"render","value":function(){var _this4=this,activeContact=this.props.activeContact;return _react2["default"].createElement("div",{"className":"attention-wrap"},_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;"},_react2["default"].createElement("em",{"ref":function(dom){_this4.attentionBtn=dom},"data-uid":activeContact.usercEncodeId,"className":(0,_classnames2["default"])("btn-controller","btn-attention",{"btn-attention-add":!activeContact.isAttention,"btn-attention-cancel":activeContact.isAttention}),"data-selector":"attention","onClick":activeContact.isAttention?function(e){return _this4.showAttentionDrop(e)}:function(e){return _this4.attention(e)}},activeContact.isAttention?"取消关注":"关注")),this.state.showHdrop?_react2["default"].createElement("section",{"ref":function(dom){_this4.attentionSelect=dom},"className":"attention-drop"},_react2["default"].createElement("a",{"href":"javascript:;","className":"change-group","onClick":function(e){return _this4.changeGroup(e)}},"调整分组"),_react2["default"].createElement("a",{"href":"javascript:;","className":"cancel-attention","onClick":function(e){return _this4.cancelAttention(e)}},"取消关注")):"")}}]),ChatTitleHattention}(_react.Component),mapStateToProps=function(state){return{"activeContact":state.panel.activeContact}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.panelActions),dispatch),"dispatch":dispatch}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(ChatTitleHattention)},"3Ztg":function(module,exports){},"3e+o":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0}),exports.Cookie=void 0;var _Cookie2=__webpack_require__("oiGr"),_Cookie=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_Cookie2);exports.Cookie=_Cookie},"3yIl":function(module,exports,__webpack_require__){"use strict";(function(global,module){Object.defineProperty(exports,"__esModule",{"value":!0});var root,_ponyfill=__webpack_require__("Fnm7"),_ponyfill2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_ponyfill);root="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:module;var result=(0,_ponyfill2["default"])(root);exports["default"]=result}).call(exports,__webpack_require__("DuR2"),__webpack_require__("3IRH")(module))},"4Ahq":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_13.03de85d9.png"},"4gJL":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.tabs=void 0;var _Contacts=__webpack_require__("dXXP"),_Contacts2=_interopRequireDefault(_Contacts),_Sns=__webpack_require__("1tRL"),_Sns2=_interopRequireDefault(_Sns),_Notice=__webpack_require__("Nlr2"),_Notice2=_interopRequireDefault(_Notice);exports.tabs=[{"key":"contacts","name":"消息","comp":_Contacts2["default"]},{"key":"sns","name":"人脉","comp":_Sns2["default"]},{"key":"notice","name":"通知","comp":_Notice2["default"]}]},"4kqs":function(module,exports,__webpack_require__){"use strict";function dialogReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dialogInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.OPEN_DIALOG:case _actions.ActionType.CLOSE_DIALOG:return Object.assign({},state,action.payload);default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.dialogInitialState=void 0,exports.dialogReducer=dialogReducer;var _actions=__webpack_require__("IPoy"),dialogInitialState=exports.dialogInitialState={"panelVisible":!1,"panelContent":null,"chatVisible":!1,"chatContent":null}},"4nWi":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_config=(_interopRequireDefault(_classnames),__webpack_require__("2KeS"),__webpack_require__("RH2O"),__webpack_require__("E9QE"),__webpack_require__("CJQX")),_utils=(_interopRequireDefault(_config),__webpack_require__("PQSX"));__webpack_require__("rF9R"),__webpack_require__("IPoy");__webpack_require__("xto4");var NoticeDetailList=function(_Component){function NoticeDetailList(props){return _classCallCheck(this,NoticeDetailList),_possibleConstructorReturn(this,(NoticeDetailList.__proto__||Object.getPrototypeOf(NoticeDetailList)).call(this,props))}return _inherits(NoticeDetailList,_Component),_createClass(NoticeDetailList,[{"key":"render","value":function(){var _props=this.props,sysMsgList=_props.sysMsgList;_props.imcore,_props.noticeDetail;return _react2["default"].createElement("div",{"className":"scroll-box"},sysMsgList.map(function(val,index){return _react2["default"].createElement("section",{"key":index,"className":"scroll-item","data-id":val.id,"data-type":val.type},_react2["default"].createElement("div",{"className":"title"},val.title),_react2["default"].createElement("div",{"className":"content-box"},_react2["default"].createElement("p",{"className":"time"},(0,_utils.dateFormat)(val.createtime,"notice")),_react2["default"].createElement("div",{"className":"content-main","dangerouslySetInnerHTML":{"__html":val.context}})))}))}}]),NoticeDetailList}(_react.Component);exports["default"]=NoticeDetailList},"4u8l":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__("wLXD"),_classnames=(_interopRequireDefault(_reactDom),__webpack_require__("HW6M")),_redux=(_interopRequireDefault(_classnames),__webpack_require__("2KeS")),_reactRedux=__webpack_require__("RH2O"),_config=(__webpack_require__("E9QE"),__webpack_require__("CJQX")),_actions=(_interopRequireDefault(_config),__webpack_require__("PQSX"),__webpack_require__("rF9R"),__webpack_require__("IPoy"));__webpack_require__("iMV8");var _NoticeDetailList=__webpack_require__("4nWi"),_NoticeDetailList2=_interopRequireDefault(_NoticeDetailList),NoticeDetail=function(_Component){function NoticeDetail(props){_classCallCheck(this,NoticeDetail);var _this=_possibleConstructorReturn(this,(NoticeDetail.__proto__||Object.getPrototypeOf(NoticeDetail)).call(this,props));return _this.current=0,_this.Dom=null,_this}return _inherits(NoticeDetail,_Component),_createClass(NoticeDetail,[{"key":"componentDidMount","value":function(){var that=this,_props=this.props,index=_props.index,sysMsgList=_props.sysMsgList,totalCnt=_props.totalCnt,actions=(_props.loading,_props.actions),imcore=_props.imcore,curPage=_props.curPage;_props.noticeDetail;new ScrollDialog({"dom":that.refs.detailMain,"width":600,"modal":!0,"current":index,"totalPage":totalCnt,"callback":function(data){var noticeData={};sysMsgList.forEach(function(v,i){i===data.current&&(noticeData=v)}),actions.hasReadNotice(imcore,noticeData,index),data.current>=data.length-2&&data.current<data.totalPage-1&&(++curPage,actions.getNoticeList(imcore,curPage))}})}},{"key":"render","value":function(){var _props2=this.props,imcore=_props2.imcore,sysMsgList=(_props2.actions,_props2.sysMsgList),totalCnt=_props2.totalCnt,index=_props2.index,closeDetail=_props2.closeDetail;return _react2["default"].createElement("div",{"className":"notice-detail"},_react2["default"].createElement("div",{"className":"scroll-dialog-main","ref":"detailMain"},_react2["default"].createElement("a",{"className":"sd-close webim-icons32 icons32-detail-close","href":"javascript:;","onClick":function(){return closeDetail(imcore)}}),_react2["default"].createElement(_NoticeDetailList2["default"],{"imcore":imcore,"sysMsgList":sysMsgList}),_react2["default"].createElement("article",null,_react2["default"].createElement("p",{"className":"change-page"},_react2["default"].createElement("a",{"data-selector":"prev-btn","className":"prev-btn webim-icons32 icons32-prev-btn","href":"javascript:;"})),_react2["default"].createElement("span",null,_react2["default"].createElement("i",{"data-selector":"current-page"},index+1),"/",_react2["default"].createElement("i",{"data-selector":"total-page"},totalCnt)),_react2["default"].createElement("p",{"className":"change-page"},_react2["default"].createElement("a",{"data-selector":"next-btn","className":"next-btn webim-icons32 icons32-next-btn","href":"javascript:;"})))))}}]),NoticeDetail}(_react.Component),mapStateToProps=function(state,props){return{"sysMsgList":state.notice.sysMsgList,"totalCnt":state.notice.totalCnt,"curPage":state.notice.curPage,"loading":state.contacts.loading}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.noticeActions),dispatch)}},ScrollDialog=function(){function ScrollDialog(options){_classCallCheck(this,ScrollDialog),this.options=$.extend({"current":0,"content":"","dom":null,"init":null,"modal":!0,"close":null,"width":800,"canScroll":!0,"speed":1500,"totalPage":0,"callback":null},ScrollDialog._options,options),this._init()}return _createClass(ScrollDialog,[{"key":"_init","value":function(){var that=this,html=$(that.options.dom);return that.DOM={"wrap":html,"close":html.find(".sd-close"),"content":html.find(".scroll-box"),"prevBtn":html.find('[data-selector="prev-btn"]'),"nextBtn":html.find('[data-selector="next-btn"]'),"totalPage":html.find('[data-selector="total-page"]'),"currentPage":html.find('[data-selector="current-page"]'),"article":html.find("article"),"modal":null},that._build(),that.width(that.options.width),that.init(that.options.init),that.options.modal&&that.showModal(),$(window).on("resize",function(){that.refresh()}).trigger("resize"),that}},{"key":"init","value":function(fn){var that=this,length=$(".scroll-item",this.DOM.wrap).length;return that.length=length,that.DOM.totalPage.html(that.options.totalPage),that.DOM.currentPage.html(that.options.current+1),that.options.init=fn,"function"==typeof fn&&that.options.init.call(that),that.event(),that}},{"key":"event","value":function(){var that=this;that.DOM.wrap.on("mousewheel DOMMouseScroll",function(event,delta){if(!(($(event.target).closest(".content-box")?$(event.target).closest(".content-box").height():0)<($(event.target).closest(".content-main")?$(event.target).closest(".content-main").height():0)&&$(event.target).closest(".content-box"))&&that.options.canScroll){var deltaY=-event.originalEvent.detail/3||event.originalEvent.wheelDelta/120,deltaNum=Math.round(Math.abs(deltaY)/2),diff=that.length-1-that.options.current;if(deltaY<0){if(that.options.current>=that.options.totalPage-1)return;deltaNum>=diff?(that.options.current=that.length-1,that.options.canScroll=!0):deltaNum<=2&&that.options.current++,that._move()}else{if(that.options.current<=0)return;deltaNum>=that.options.current?(that.options.current=0,that.options.canScroll=!0):that.options.current--,that._move()}}}),that.DOM.prevBtn.on("click",function(event){that.options.current<=0||(that.options.current--,that._move())}),that.DOM.nextBtn.on("click",function(event){that.options.current>=that.options.totalPage-1||(that.options.current++,that._move())})}},{"key":"_move","value":function(){var that=this;that.options.canScroll=!1,that.DOM.content.stop().animate({"top":-that.itemH*that.options.current+"px"},that.options.speed,function(){that.options.canScroll=!0,that.options.canAjax=!0,that.DOM.currentPage.html(that.options.current+1),that.refresh(),that._callback()})}},{"key":"_callback","value":function(){var that=this;that.options.callback&&that.options.callback.call(that,{"current":that.options.current,"totalPage":that.options.totalPage,"length":that.length})}},{"key":"_build","value":function(){var wrap=this.DOM.wrap;return wrap.css({"zIndex":++ScrollDialog._options.zIndex}),wrap.appendTo(wrap.closest(".notice-detail")),ScrollDialog._options.cache.push({"dialog":this}),this}},{"key":"width","value":function(_width){return void 0===_width?this.options.width:(this.options.width=_width,this.DOM.content.width(this.options.width),this.refresh(),this)}},{"key":"refresh","value":function(){var itemH=void 0,winH=$(window).height(),height=winH-140,item=$(".scroll-item",this.DOM.content);item.css({"height":height+"px"}),itemH=item.outerHeight(!0),this.itemH=itemH,this.DOM.content.css({"top":-itemH*this.options.current+"px"}),this.options.width&&(this.DOM.content.css({"margin-left":-(this.options.width+68)/2+"px"}),this.DOM.article.css({"margin-left":(this.options.width+68)/2-48+"px"}),this.DOM.close.css({"margin-left":(this.options.width+68)/2-48+"px"})),this.length=$(".scroll-item",this.DOM.wrap).length,0==this.options.current?this.DOM.prevBtn.addClass("icons32-prev-btn-disabled").removeClass("icons32-prev-btn"):this.DOM.prevBtn.addClass("icons32-prev-btn").removeClass("icons32-prev-btn-disabled"),this.options.current==this.options.totalPage-1?this.DOM.nextBtn.addClass("icons32-next-btn-disabled").removeClass("icons32-next-btn"):this.DOM.nextBtn.addClass("icons32-next-btn").removeClass("icons32-next-btn-disabled")}},{"key":"showModal","value":function(){return this.DOM.modal=this.DOM.modal||$("<div />").addClass("scroll-dialog-modal").css({"zIndex":ScrollDialog._options.zIndex}).insertBefore(this.DOM.wrap),this.DOM.wrap.show(),this.refresh(),this}}]),ScrollDialog}();ScrollDialog._options={"zIndex":1e3,"cache":[]},exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(NoticeDetail)},"4ufr":function(module,exports,__webpack_require__){"use strict";function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){return"function"==typeof action?action(dispatch,getState,extraArgument):next(action)}}}}exports.__esModule=!0;var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware,exports["default"]=thunk},"566u":function(module,exports,__webpack_require__){"use strict";function panelReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:panelInitialState,action=arguments[1],sendMsg=void 0,msgList=void 0,newMsgList=[],newSendList=[];switch(action.type){case _actions.ActionType.PANEL_RECEIVE_MSG:return Object.assign({},state,{"msgList":state.msgList.concat(action.payload)});case _actions.ActionType.PANEL_SEND_MSG:return sendMsg=(0,_send.createSendMsgByPlainMsg)(action.payload),state.msgList.length>0&&state.msgList.some(function(v){return v.ext.id===sendMsg.msgBody.id})?(newMsgList=state.msgList.map(function(v){return v.ext.id===sendMsg.msgBody.id&&(v=Object.assign({},v,sendMsg)),v}),newSendList=state.sendList.map(function(v){return v.id===sendMsg.msgBody.id&&(v=sendMsg),v})):(newMsgList=state.msgList.concat(sendMsg.getStorageBody()),newSendList=state.sendList.concat(sendMsg)),Object.assign({},state,{"msgList":newMsgList,"sendList":newSendList});case _actions.ActionType.PANEL_UPDATE_MSG:;return msgList=state.msgList.map(function(v,i){return v.id===action.payload.id?action.payload:v.ext&&v.ext.id===action.payload.ext.id?v=action.payload:v}),Object.assign({},state,{"msgList":msgList});case _actions.ActionType.PANEL_CONN_MSG:return msgList=state.msgList.slice(0),Object.assign({},state,{"msgList":msgList.concat(action.payload)});case _actions.ActionType.INIT_TAB:case _actions.ActionType.SELECT_TAB:return Object.assign({},state,{"activeTab":action.payload});case _actions.ActionType.SELECT_CONTACT_START:return Object.assign({},state,action.payload);case _actions.ActionType.UPDATE_ATTENTION:return Object.assign({},state,{"activeContact":action.payload.contact});case _actions.ActionType.SELECT_CONTACT:return Object.assign({},state,{"activeContact":action.payload.contact,"msgList":[],"loadingActiveContact":!1});case _actions.ActionType.UNSELECT_ACTIVE_CONTACT:return Object.assign({},state,{"activeContact":null,"loadingActiveContact":!1});case _actions.ActionType.OPEN_PANEL:return Object.assign({},state,{"opened":!0});case _actions.ActionType.CLOSE_PANEL:return Object.assign({},state,{"opened":!1});case _actions.ActionType.SET_TABS_UNREAD:return Object.assign({},state,{"unReadTabs":action.payload});case _actions.ActionType.SET_PANEL_UNREAD:return Object.assign({},state,{"unRead":action.payload});case _actions.ActionType.UPDATE_MSGLIST:return action.payload?Object.assign({},state,{"msgList":action.payload}):state;default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.panelInitialState=void 0,exports.panelReducer=panelReducer;var _actions=__webpack_require__("IPoy"),_send=__webpack_require__("6svF"),panelInitialState=exports.panelInitialState={"msgList":[],"sendList":[],"activeTab":null,"activeContact":null,"unRead":!1,"unReadTabs":[0,!1,!1],"contactUnread":0,"opened":!1,"loadingActiveContact":!1}},"5OkU":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/im-init-c/lib/tpls/new-friends/no-friend.84313f09.png"},"5QOt":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_6.1fb27390.png"},"6Fx8":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy");__webpack_require__("NhJ5");var SetGreeting=function(_Component){function SetGreeting(props){return _classCallCheck(this,SetGreeting),_possibleConstructorReturn(this,(SetGreeting.__proto__||Object.getPrototypeOf(SetGreeting)).call(this,props))}return _inherits(SetGreeting,_Component),_createClass(SetGreeting,[{"key":"componentDidMount","value":function(){var _props=this.props;_props.imcore,_props.actions,_props.setting}},{"key":"componentWillReceiveProps","value":function(nextProps){}},{"key":"selectGreeting","value":function(code,name){var _props2=this.props,imcore=_props2.imcore,actions=_props2.actions,greeting=_props2.greeting;actions.selectGreeting(imcore,code,name,greeting)}},{"key":"render","value":function(){var _this2=this,_props3=this.props,greetingList=(_props3.imcore,_props3.actions,_props3.greetingList),greetingType=_props3.greetingType;return _react2["default"].createElement("div",{"className":"greeting-box"},_react2["default"].createElement("ul",null,greetingList&&greetingList.map(function(v,i){return _react2["default"].createElement("li",{"key":i},_react2["default"].createElement("label",{"onClick":function(){return _this2.selectGreeting(v.code,v.name)}},_react2["default"].createElement("em",{"className":(0,_classnames2["default"])("webim-icons16",{"icons16-radio":v.code!==greetingType,"icons16-radio-checked":v.code===greetingType})}),v.name))})))}}]),SetGreeting}(_react.Component),mapStateToProps=function(state){return{"greetingList":state.setGreeting.greetingList,"greetingType":state.setGreeting.greetingType,"greeting":state.setting.setting.greeting}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.setGreetingActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(SetGreeting)},"6WwB":function(module,exports,__webpack_require__){"use strict";function openDialog(){var parent=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"panel",content=arguments[1],payload={};return"panel"===parent?payload={"panelVisible":!0,"panelContent":content}:"chat"===parent&&(payload={"chatVisible":!0,"chatContent":content}),{"type":ActionType.OPEN_DIALOG,"payload":payload}}function closeDialog(){var parent=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"panel",payload={};return"panel"===parent?payload={"panelVisible":!1,"panelContent":null}:"chat"===parent&&(payload={"chatVisible":!1,"chatContent":null}),{"type":ActionType.CLOSE_DIALOG,"payload":payload}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.openDialog=openDialog,exports.closeDialog=closeDialog;var _ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType)},"6iSI":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function Bcard(props){var env=props.env,v=props.v;switch(v.oppositeImUserType){case"0":return _react2["default"].createElement("a",{"href":"/resume/showresumecarte4im?usercId="+v.oppositeUserId+"&oppositeImId="+v.oppositeImId,"target":"_blank"},_react2["default"].createElement("dl",{"className":"target-info"},_react2["default"].createElement("dt",null,_react2["default"].createElement("img",{"className":"tinyFace circle","src":"https://image0.lietou-static.com/normal/"+v.oppositeUserPhoto})),_react2["default"].createElement("dd",{"className":"name"},_react2["default"].createElement("span",{"className":"name"},(0,_utils.getBrief)(v.oppositeUserName,4))),_react2["default"].createElement("dd",{"className":"job-info"},v.oppositeUserSexName?_react2["default"].createElement("span",null,v.oppositeUserSexName," | "):"",v.oppositeUserEdulevelName?_react2["default"].createElement("span",{"title":v.oppositeUserEdulevelName},(0,_utils.getBrief)(v.oppositeUserEdulevelName,3)," | "):"",_react2["default"].createElement("span",null,"工作",v.oppositeWorkAge,"年")," | ",_react2["default"].createElement("span",{"title":v.oppositeUserDqName},(0,_utils.getBrief)(v.oppositeUserDqName,6)))),_react2["default"].createElement("div",{"className":"last-full-msg"},_react2["default"].createElement(_LastMsg2["default"],{"env":env,"message":v.lastPayload,"name":(0,_utils.getBrief)(v.oppositeUserName,3)})));case"3":return _react2["default"].createElement("div",null,_react2["default"].createElement("dl",{"className":"target-info","style":{"minHeight":40}},_react2["default"].createElement("dt",null,_react2["default"].createElement("img",{"className":"tinyFace circle","src":"https://image0.lietou-static.com/normal/"+v.oppositeUserPhoto})),_react2["default"].createElement("dd",{"className":"name"},_react2["default"].createElement("span",{"className":"name"},(0,_utils.getBrief)(v.oppositeUserName,12)))),_react2["default"].createElement("div",{"className":"last-full-msg"},_react2["default"].createElement(_LastMsg2["default"],{"env":env,"message":v.lastPayload,"name":(0,_utils.getBrief)(v.oppositeUserName,3)})))}}function ContactCard(props){var env=props.imcore.env.toLowerCase(),config=(0,_config2["default"])(env),userInfo=props.imcore.userInfo,v=props.contacts;switch(env){case"c":var titlePushStr="";switch(v.oppositeUserKind){case _constants.UserType.USER_TYPE_B.toString():titlePushStr=config.OPEN_BPAGE;break;case _constants.UserType.USER_TYPE_H.toString():titlePushStr=config.OPEN_HPAGE}return _react2["default"].createElement("div",{"className":"contact-card"},_react2["default"].createElement(_addTlog.Atlog,{"href":v.oppositeMainUrl,"target":"_blank","pushStr":titlePushStr},_react2["default"].createElement("dl",{"className":"target-info"},_react2["default"].createElement("dt",null,_react2["default"].createElement("img",{"className":"tinyFace circle","src":"https://image0.lietou-static.com/normal/"+v.oppositeUserPhoto})),_react2["default"].createElement("dd",{"className":"name"},_react2["default"].createElement(_ContactInfo.CIdentity,{"config":config.tlogs,"item":v})),_react2["default"].createElement("dd",{"className":"job-info"},_react2["default"].createElement("span",{"title":v.oppositeUserTitle},(0,_utils.getBrief)(v.oppositeUserTitle,6))," | ",_react2["default"].createElement("span",{"title":v.oppositeUserCompany},(0,_utils.getBrief)(v.oppositeUserCompany,10)))),_react2["default"].createElement("div",{"className":"last-full-msg"},_react2["default"].createElement(_LastMsg2["default"],{"env":env,"message":v.lastPayload,"name":(0,_utils.getBrief)(userInfo.oppositeUserName,3)}))));case"b":return _react2["default"].createElement("div",{"className":"contact-card"},_react2["default"].createElement(Bcard,{"env":env,"v":v}));case"h":return _react2["default"].createElement("div",{"className":"contact-card"},_react2["default"].createElement(_addTlog.Atlog,{"href":"https://h.liepin.com/im/showresumedetail4im/?oppositeImId="+v.oppositeImId,"target":"_blank","pushStr":config.tlogs.CLICK_CONTACTSCARD},_react2["default"].createElement("dl",{"className":"target-info"},_react2["default"].createElement("dt",null,_react2["default"].createElement("img",{"className":"tinyFace circle","src":"https://image0.lietou-static.com/normal/"+v.oppositeUserPhoto})),_react2["default"].createElement("dd",{"className":"name"},_react2["default"].createElement("span",{"className":"name"},(0,_utils.getBrief)(v.oppositeUserName,4))),_react2["default"].createElement("dd",{"className":"job-info"},v.oppositeUserSexName?_react2["default"].createElement("span",null,v.oppositeUserSexName," | "):"",v.oppositeUserEdulevelName?_react2["default"].createElement("span",{"title":v.oppositeUserEdulevelName},(0,_utils.getBrief)(v.oppositeUserEdulevelName,3)," | "):"",_react2["default"].createElement("span",null,"工作",v.oppositeWorkAge,"年")," | ",_react2["default"].createElement("span",{"title":v.oppositeUserDqName},(0,_utils.getBrief)(v.oppositeUserDqName,6)))),_react2["default"].createElement("div",{"className":"last-full-msg"},_react2["default"].createElement(_LastMsg2["default"],{"env":env,"message":v.lastPayload,"name":(0,_utils.getBrief)(v.oppositeUserName,3)}))))}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.Bcard=Bcard,exports["default"]=ContactCard;var _react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_config=(_interopRequireDefault(_classnames),__webpack_require__("CJQX")),_config2=_interopRequireDefault(_config),_utils=__webpack_require__("PQSX"),_ContactInfo=__webpack_require__("TJbS"),_addTlog=__webpack_require__("rF9R"),_constants=__webpack_require__("E9QE"),_LastMsg=__webpack_require__("jtzr"),_LastMsg2=_interopRequireDefault(_LastMsg);__webpack_require__("yqpj")},"6qce":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_20.dee0d144.png"},"6svF":function(module,exports,__webpack_require__){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function createSendMsg(_ref){var from=_ref.from,to=_ref.to,_ref$data=_ref.data,data=void 0===_ref$data?"":_ref$data,_ref$dataType=_ref.dataType,dataType=void 0===_ref$dataType?"txt":_ref$dataType,_ref$extType=_ref.extType,extType=void 0===_ref$extType?1:_ref$extType,others=_objectWithoutProperties(_ref,["from","to","data","dataType","extType"]);if(!from||!to)return void console.log("from or to should not be empty!");var msg=void 0;switch(dataType){case"img":return msg=new ImgMsg,msg.set(Object.assign({"from":from,"to":to,"data":data,"extType":1,"dataType":"img"},others));default:return msg=new TxtMsg,msg.set({"from":from,"to":to,"data":data,"extType":extType,"dataType":"txt"})}}function createSendMsgByPlainMsg(message){var msg=void 0;switch(message.type){case"img":return msg=new ImgMsg,msg.setByPlainMsg(message);default:return msg=new TxtMsg,msg.setByPlainMsg(message)}}function uuid(id){if(id)return id;var cdate=new Date,offdate=new Date(2010,1,1),offset=cdate.getTime()-offdate.getTime();return"LP_WEBIM_"+parseInt(offset).toString(16)+"_"+(""+Math.random()).replace(/\./,"_")}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.TxtMsg=exports.ImgMsg=exports.Msg=void 0;var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.createSendMsg=createSendMsg,exports.createSendMsgByPlainMsg=createSendMsgByPlainMsg;var _enums=__webpack_require__("O4JY"),_constants=__webpack_require__("E9QE"),_utils=__webpack_require__("c3kU"),Msg=(WebIM.utils.getFileUrl,exports.Msg=function(){function Msg(){return _classCallCheck(this,Msg),this}return _createClass(Msg,[{"key":"set","value":function(_ref2){var from=_ref2.from,to=_ref2.to,extType=(_ref2.data,_ref2.extType),dataType=_ref2.dataType,id=_ref2.id;return this.id=uuid(id),this.type=dataType,this.state=_enums.MsgState.INITIAL,this.msgBody={"id":this.id,"type":this.type,"from":from.oppositeImId,"fromtype":from.oppositeImUserType,"to":to.oppositeImId,"totype":to.oppositeImUserType,"timestamp":Date.now(),"ext":{"id":this.id,"extType":extType,"extBody":{"messageSource":_constants.MESSAGE_SOURCE,"senderUserId":from.oppositeUserId,"senderKind":from.oppositeUserKind,"receiverUserId":to.oppositeUserId,"receiverKind":to.oppositeUserKind,"sign":"1"}}},this}},{"key":"setByPlainMsg","value":function(message){return Object.assign(this,message)}},{"key":"reset","value":function(){return this.id=this.msgBody.id=this.msgBody.ext.id=uuid(this.id||""),this.state=_enums.MsgState.INITIAL,this.setSign(""),this.status=this.status,this}},{"key":"setSign","value":function(sign){return this.msgBody.ext.extBody.sign=sign,this}},{"key":"getSign","value":function(){return this.msgBody&&this.msgBody.ext&&this.msgBody.extBody&&this.msgBody.ext.extBody.sign}},{"key":"onSuccess","value":function(func){return"function"==typeof func&&(this.msgBody.success=func),this}},{"key":"onFail","value":function(func){return"function"==typeof func&&(this.msgBody.fail=func),this}},{"key":"getTo","value":function(){return this.msgBody.to}},{"key":"getFrom","value":function(){return this.msgBody.from}},{"key":"getValue","value":function(){return this.value}},{"key":"getParamForSign","value":function(){var jobId=this.fillInfo?this.fillInfo.jobId:"";return this.getExtType()===_enums.ExtType.MESSAGE_SEND_JOB?jobId:""}},{"key":"getType","value":function(){return this.type}},{"key":"getExtType","value":function(){return this.msgBody.ext.extType}},{"key":"getTimestamp","value":function(){return this.msgBody.timestamp}},{"key":"setState","value":function(state){var err=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return state&&(this.state=state),this.err=err,this}},{"key":"setServerId","value":function(serverId){return this.msgBody.id=serverId,this.msgBody.ext.id=serverId,this}},{"key":"getBody","value":function(){return this.msgBody}},{"key":"getPublish","value":function(){return"img"===this.type?Object.assign({},this,{"file":null,"fileInput":null,"fileInputId":null,"onFileUploadComplete":null,"onFileUploadError":null,"onFileAppend":null}):this}},{"key":"getStorageBody","value":function(){var msgBody=this.msgBody;return Object.assign({"id":this.id,"from":msgBody.from,"to":msgBody.to,"ext":msgBody.ext,"state":this.state,"err":this.err,"type":this.type,"timestamp":msgBody.timestamp,"read":!0,"data":this.value,"status":this.status,"serverId":this.msgBody.ext.id,"extType":this.msgBody.ext.extType,"totype":this.msgBody.totype,"sign":this.msgBody.ext.extBody.sign},this.fillInfo)}},{"key":"getLastMsgFormat","value":function(){var content={"ext":{"extType":this.msgBody.ext.extType,"extBody":this.msgBody.ext.extBody},"bodies":[{"msg":this.value,"type":this.type}]};return{"latestMsgId":"","lastPayload":JSON.stringify(content),"latestMsgTime":this.getTimestamp()}}},{"key":"getSaveFormat","value":function(serverId){var fmt={"from":this.msgBody.from,"to":this.msgBody.to,"bodies":[{"type":this.type}],"ext":{"extType":this.msgBody.ext.extType,"extBody":Object.assign({},this.msgBody.ext.extBody,{"saveStatus":"2"})},"emMessageId":serverId};return"img"==this.type?fmt.bodies[0].url=this.value:fmt.bodies[0].msg=this.value,fmt}}]),Msg}()),ImgMsg=exports.ImgMsg=function(_Msg){function ImgMsg(){var _ret;_classCallCheck(this,ImgMsg);var _this=_possibleConstructorReturn(this,(ImgMsg.__proto__||Object.getPrototypeOf(ImgMsg)).call(this));return _ret=_this,_possibleConstructorReturn(_this,_ret)}return _inherits(ImgMsg,_Msg),_createClass(ImgMsg,[{"key":"set","value":function(_ref3){var from=_ref3.from,to=_ref3.to,data=_ref3.data,_ref3$onFileUploadErr=_ref3.onFileUploadError,onFileUploadError=void 0===_ref3$onFileUploadErr?_utils.emptyFn:_ref3$onFileUploadErr,_ref3$onFileUploadCom=_ref3.onFileUploadComplete,onFileUploadComplete=void 0===_ref3$onFileUploadCom?_utils.emptyFn:_ref3$onFileUploadCom,_ref3$onFileAppend=_ref3.onFileAppend,onFileAppend=void 0===_ref3$onFileAppend?_utils.emptyFn:_ref3$onFileAppend;_get(ImgMsg.prototype.__proto__||Object.getPrototypeOf(ImgMsg.prototype),"set",this).call(this,{"from":from,"to":to,"data":data,"extType":1,"dataType":"img"});var file=data.file||WebIM.utils.getFileUrl(data.fileInputId);this.msgBody.flashUpload=data.flashUpload,this.msgBody.file=file,this.onFileUploadError=onFileUploadError,this.onFileUploadComplete=onFileUploadComplete,this.onFileAppend=onFileAppend,this.filename=file.filename,this.fileInputId=data.fileInputId,this.file=file}},{"key":"setData","value":function(data){this.value=data}}]),ImgMsg}(Msg),TxtMsg=exports.TxtMsg=function(_Msg2){function TxtMsg(){var _ret2;_classCallCheck(this,TxtMsg);var _this2=_possibleConstructorReturn(this,(TxtMsg.__proto__||Object.getPrototypeOf(TxtMsg)).call(this));return _ret2=_this2,_possibleConstructorReturn(_this2,_ret2)}return _inherits(TxtMsg,_Msg2),_createClass(TxtMsg,[{"key":"set","value":function(_ref4){var from=_ref4.from,to=_ref4.to,data=_ref4.data,_ref4$extType=_ref4.extType,extType=void 0===_ref4$extType?1:_ref4$extType,others=_objectWithoutProperties(_ref4,["from","to","data","extType"]);switch(_get(TxtMsg.prototype.__proto__||Object.getPrototypeOf(TxtMsg.prototype),"set",this).call(this,{"from":from,"to":to,"extType":extType,"dataType":"txt"}),this.value=this.msgBody.msg="string"==typeof data?data:"",extType){case _enums.ExtType.MESSAGE_RESUME:var rest=(others.userId,_objectWithoutProperties(others,["userId"]));this.msgBody.ext.extBody.userInfo={"userId":others.userId},this.fillInfo=rest;break;case _enums.ExtType.MESSAGE_SEND_JOB:this.fillInfo=others,this.msgBody.ext.extBody.jobKind=others.jobKind,this.msgBody.ext.extBody.jobId=others.jobId;break;case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:this.fillInfo=others,this.msgBody.ext.extBody.jobId=others.jobId;break;case _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK:this.fillInfo=others,this.msgBody.ext.extBody.jobKind=others.jobKind,this.msgBody.ext.extBody.jobId=others.jobId,this.msgBody.ext.extBody.reason=others.reason;break;case _enums.ExtType.MESSAGE_SEND_NAMECARD:this.msgBody.ext.extBody.jobId=others.jobId,this.msgBody.ext.extBody.jobKind=others.jobKind,this.fillInfo=others;break;case _enums.ExtType.MESSAGE_ASK_RESUME:this.msgBody.ext.extBody.jobId=others.jobId,this.msgBody.ext.extBody.jobKind=others.jobKind;break;case _enums.ExtType.MESSAGE_SEND_TOOLTIP:}}}]),TxtMsg}(Msg)},"76vq":function(module,exports,__webpack_require__){"use strict";function snsReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:snsInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.SELECT_SNS:return Object.assign({},state,{"sns":action.payload});default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.snsInitialState=void 0,exports.snsReducer=snsReducer;var _actions=__webpack_require__("IPoy"),snsInitialState=exports.snsInitialState={"sns":[],"unRead":!1}},"7y5x":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_25.7d91d042.png"},"8MZu":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function Root(props){return _react2["default"].createElement(_reactRedux.Provider,{"store":(0,_store.configureStore)({})},_react2["default"].createElement(_Panel2["default"],props))}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=Root;var _react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__("RH2O"),_store=__webpack_require__("2w8q"),_Panel=__webpack_require__("JjOt"),_Panel2=_interopRequireDefault(_Panel),_config=__webpack_require__("CJQX");_interopRequireDefault(_config)},"8QSz":function(module,exports){},"8a8u":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.tabs=void 0;var _Contacts=__webpack_require__("dXXP"),_Contacts2=_interopRequireDefault(_Contacts),_HistoryContacts=__webpack_require__("Tij+"),_HistoryContacts2=_interopRequireDefault(_HistoryContacts),_Notice=__webpack_require__("Nlr2");_interopRequireDefault(_Notice),exports.tabs=[{"key":"contacts","name":"消息","comp":_Contacts2["default"]},{"key":"historycontacts","name":"最近","comp":_HistoryContacts2["default"]}]},"8x/U":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.config={"domain":LT.Env.hRoot,"ajaxUrl":{"getcurrentuserinfo":LT.Env.hRoot+"user/getcurrentuserinfo.json","handlesend":LT.Env.hRoot+"message/handlesend.json","handlereceive":LT.Env.hRoot+"message/handlereceive.json","loadresumeinfo":LT.Env.hRoot+"im/loadresumeinfo.json","loadjobinfo":LT.Env.hRoot+"message/loadjobinfo.json","saveemmessage":LT.Env.hRoot+"message/saveemmessage.json"}}},"93X0":function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function messageLastMsgFilter(message){var type=message.type,messageSource=message.messageSource,receiverKind=message.receiverKind,senderKind=message.senderKind,extType=message.extType;switch(type){case"txt":if((1!=messageSource||0!=receiverKind||0!=senderKind||extType!==_enums.ExtType.MESSAGE_RESUME)&&(1!=messageSource||1!=receiverKind||1!=senderKind||extType!==_enums.ExtType.MESSAGE_SEND_APPLYRESUME)&&_enums.CompatibleExtType.TXT_EXT_TYPES_ARR.includes(extType))return!0;break;case"img":if(_enums.CompatibleExtType.IMG_EXT_TYPES_ARR.includes(extType))return!0}return!1}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.LastMessage=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.messageLastMsgFilter=messageLastMsgFilter;var _enums=__webpack_require__("O4JY");exports.LastMessage=function(){function LastMessage(){_classCallCheck(this,LastMessage)}return _createClass(LastMessage,[{"key":"set","value":function(content){try{var msg=JSON.parse(content);return this.type=msg.bodies&&msg.bodies[0].type,this.extType=msg.ext.extType,this.msg=msg&&msg.bodies&&msg.bodies[0].msg||"",this.senderKind=msg.ext&&msg.ext.extBody&&msg.ext.extBody.senderKind,this.receiverKind=msg.ext&&msg.ext.extBody&&msg.ext.extBody.receiverKind,this.messageSource=msg.ext&&msg.ext.extBody&&msg.ext.extBody.messageSource,this}catch(e){return null}}}]),LastMessage}()},"9OSA":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_29.e5a61631.png"},"9ae/":function(module,exports){},"AZB4":function(module,exports){},"Ap7/":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{"value":value,"enumerable":!0,"configurable":!0,"writable":!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_addTlog=(__webpack_require__("E9QE"),__webpack_require__("6svF"),__webpack_require__("rF9R")),_utils=__webpack_require__("PQSX"),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy"),_dragResize=__webpack_require__("N46j"),_ChatForm=__webpack_require__("DKOL"),_ChatForm2=_interopRequireDefault(_ChatForm),_ChatTitle=__webpack_require__("a0Sg"),_ChatTitle2=_interopRequireDefault(_ChatTitle),_ChatHistory=__webpack_require__("pdaJ"),_ChatHistory2=_interopRequireDefault(_ChatHistory),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_Message=__webpack_require__("dYCy"),_Message2=_interopRequireDefault(_Message),_Report=__webpack_require__("rNCW"),_Toast=(_interopRequireDefault(_Report),__webpack_require__("Pbom")),_Toast2=_interopRequireDefault(_Toast);__webpack_require__("xDUd");var ChatWin=function(_Component){function ChatWin(props){_classCallCheck(this,ChatWin);var _this=_possibleConstructorReturn(this,(ChatWin.__proto__||Object.getPrototypeOf(ChatWin)).call(this,props));return _this.chatlistDom=null,_this.config=(0,_config2["default"])(props.imcore.env),_this.state={"inputHeight":40},_this}return _inherits(ChatWin,_Component),_createClass(ChatWin,[{"key":"componentDidMount","value":function(){this.scrollToBottom()}},{"key":"componentWillReceiveProps","value":function(nextProps){this.props.msgList.length!==nextProps.msgList.length&&this.scrollToBottom(),this.props.loadingActiveContact!==nextProps.loadingActiveContact&&this.scrollToBottom()}},{"key":"setInputHeight","value":function(inputHeight){this.setState({"inputHeight":inputHeight})}},{"key":"scrollToBottom","value":function(){var _this2=this;setTimeout(function(){_this2.chatlistDom&&$(_this2.chatlistDom).scrollTop(_this2.chatlistDom.scrollHeight)},100)}},{"key":"renderMsg","value":function(msg,index){var _this3=this,_props=this.props,imcore=_props.imcore,activeContact=_props.activeContact,msgcard=_props.msgcard;return _react2["default"].createElement("div",{"key":index},msg.time&&_react2["default"].createElement("p",{"className":"time"},msg.time),_react2["default"].createElement(_Message2["default"],{"message":msg,"imcore":imcore,"scrollToBottom":function(){return _this3.scrollToBottom()},"activeContact":activeContact,"msgcard":msgcard}))}},{"key":"render","value":function(){var _this4=this,_props2=this.props,imcore=_props2.imcore,activeContact=_props2.activeContact,actions=_props2.actions,style=_props2.style,msgList=_props2.msgList,historyVisible=_props2.historyVisible,loadingActiveContact=_props2.loadingActiveContact,loadingInitialHistory=_props2.loadingInitialHistory;_props2.msgcard;return loadingActiveContact||activeContact?loadingActiveContact||!activeContact?_react2["default"].createElement("div",_defineProperty({"className":"chatwin","style":{"background":"#fff"}},"style",style),_react2["default"].createElement("a",{"href":"javascript:;","className":(0,_classnames2["default"])("close-chat",{"blur":historyVisible}),"onClick":function(){return actions.unselectActiveContact(imcore)}},"×"),_react2["default"].createElement("div",{"className":"chatwin-loading"},_react2["default"].createElement("em",null))):_react2["default"].createElement("div",{"className":(0,_classnames2["default"])("chatwin",{"hide":!activeContact}),"style":style},_react2["default"].createElement("a",{"href":"javascript:;","className":(0,_classnames2["default"])("close-chat",{"blur":historyVisible}),"onClick":function(){return actions.unselectActiveContact(imcore)}},"×"),_react2["default"].createElement(_ChatTitle2["default"],{"imcore":imcore,"activeContact":activeContact}),_react2["default"].createElement("div",{"className":(0,_classnames2["default"])("chat-main",{"blur":historyVisible}),"style":{"height":"calc(100% - "+(66+this.state.inputHeight)+"px)"}},_react2["default"].createElement("div",{"className":"chat-list","style":{"height":"calc(100% - 136px)"},"ref":function(dom){_this4.chatlistDom=dom}},_react2["default"].createElement("p",{"className":"check-all-history"},_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","pushStr":this.config.tlogs.CLICK_HISTORY_LINK,"onClick":function(){return actions.showHistory(imcore)}},"查看全部历史消息")),loadingInitialHistory&&_react2["default"].createElement("div",{"className":"msg-list-loading"},_react2["default"].createElement("em",null)),msgList&&msgList.map(function(msgWrap,index){return _this4.renderMsg(msgWrap,index)})),_react2["default"].createElement(_ChatForm2["default"],{"imcore":imcore,"setInputHeight":function(height){return _this4.setInputHeight(height)}})),_react2["default"].createElement(_ChatHistory2["default"],{"imcore":imcore}),_react2["default"].createElement("div",{"id":"chat-dialog-container"}),_react2["default"].createElement(_Toast2["default"],null)):null}}]),ChatWin}(_react.Component),msgListFilterByContact=function(contact,msgList,initialServerHistory,activeContact,loadingActiveContact){if(loadingActiveContact)return[];var formattedMsgList=msgList.filter(function(v){return"err"===v.type||v.from===activeContact.oppositeImId||v.to===activeContact.oppositeImId}),allArr=initialServerHistory.concat(formattedMsgList);return allArr=(0,_utils.timeVisibleFormat)(allArr)},mapStateToProps=function(state){return{"activeContact":state.panel.activeContact,"top":state.drag.top,"right":state.drag.right,"msgList":msgListFilterByContact(state.panel.activeContact,state.panel.msgList,state.history.initialServerHistory,state.panel.activeContact,state.panel.loadingActiveContact),"historyVisible":state.history.visible,"loadingActiveContact":state.panel.loadingActiveContact,"loadingInitialHistory":state.history.loadingInitialHistory}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.contactsActions,_actions.panelActions,_actions.historyActions),dispatch)}},ChatWin1=(0,_dragResize.dragMove)()(ChatWin);exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(ChatWin1)},"B8Ug":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0}),exports.CANNOT_SHOW_HIMG=exports.CANNOT_SHOW_BIMG=exports.CANNOT_SHOW_CIMG=exports.IMG_EXT_TYPES_ARR=exports.TXT_EXT_TYPES_ARR=void 0;var _ExtType=__webpack_require__("T5KR"),ExtType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ExtType);exports.TXT_EXT_TYPES_ARR=[ExtType.MESSAGE_SEND_JOB,ExtType.MESSAGE_RESUME,ExtType.MESSAGE_TEXT,ExtType.MESSAGE_SEND_TOOLTIP,ExtType.MESSAGE_SEND_APPLYRESUME,ExtType.MESSAGE_SEND_RATINGBAR,ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK,ExtType.MESSAGE_SEND_APPLYSUCFEEDBACK,ExtType.MESSAGE_SEND_NAMECARD,ExtType.MESSAGE_ASK_RESUME],exports.IMG_EXT_TYPES_ARR=[ExtType.MESSAGE_IMAGE],exports.CANNOT_SHOW_CIMG="不支持此消息查看，请登录“猎聘同道APP”查看消息内容！",exports.CANNOT_SHOW_BIMG="不支持此消息查看，请登录“猎聘BOSS”查看消息内容！",exports.CANNOT_SHOW_HIMG="不支持此消息查看，请登录“猎聘猎头版”查看消息内容！"},"BEQ0":function(module,exports,__webpack_require__){"use strict";function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map(function(n){return test2[n]}).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},"BFS2":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_12.98341749.png"},"BIPp":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_33.c1251072.png"},"BYKG":function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(global,factory){"object"===_typeof(exports)&&void 0!==module?module.exports=factory():(__WEBPACK_AMD_DEFINE_FACTORY__=factory,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,function(){function createClass(ctor,superClass){superClass&&(ctor.prototype=Object.create(superClass.prototype)),ctor.prototype.constructor=ctor}function Iterable(value){return isIterable(value)?value:Seq(value)}function KeyedIterable(value){return isKeyed(value)?value:KeyedSeq(value)}function IndexedIterable(value){return isIndexed(value)?value:IndexedSeq(value)}function SetIterable(value){return isIterable(value)&&!isAssociative(value)?value:SetSeq(value)}function isIterable(maybeIterable){return!(!maybeIterable||!maybeIterable[IS_ITERABLE_SENTINEL])}function isKeyed(maybeKeyed){return!(!maybeKeyed||!maybeKeyed[IS_KEYED_SENTINEL])}function isIndexed(maybeIndexed){return!(!maybeIndexed||!maybeIndexed[IS_INDEXED_SENTINEL])}function isAssociative(maybeAssociative){return isKeyed(maybeAssociative)||isIndexed(maybeAssociative)}function isOrdered(maybeOrdered){return!(!maybeOrdered||!maybeOrdered[IS_ORDERED_SENTINEL])}function MakeRef(ref){return ref.value=!1,ref}function SetRef(ref){ref&&(ref.value=!0)}function OwnerID(){}function arrCopy(arr,offset){offset=offset||0;for(var len=Math.max(0,arr.length-offset),newArr=new Array(len),ii=0;ii<len;ii++)newArr[ii]=arr[ii+offset];return newArr}function ensureSize(iter){return void 0===iter.size&&(iter.size=iter.__iterate(returnTrue)),iter.size}function wrapIndex(iter,index){if("number"!=typeof index){var uint32Index=index>>>0;if(""+uint32Index!==index||4294967295===uint32Index)return NaN;index=uint32Index}return index<0?ensureSize(iter)+index:index}function returnTrue(){return!0}function wholeSlice(begin,end,size){return(0===begin||void 0!==size&&begin<=-size)&&(void 0===end||void 0!==size&&end>=size)}function resolveBegin(begin,size){return resolveIndex(begin,size,0)}function resolveEnd(end,size){return resolveIndex(end,size,size)}function resolveIndex(index,size,defaultIndex){return void 0===index?defaultIndex:index<0?Math.max(0,size+index):void 0===size?index:Math.min(size,index)}function Iterator(next){this.next=next}function iteratorValue(type,k,v,iteratorResult){var value=0===type?k:1===type?v:[k,v];return iteratorResult?iteratorResult.value=value:iteratorResult={"value":value,"done":!1},iteratorResult}function iteratorDone(){return{"value":void 0,"done":!0}}function hasIterator(maybeIterable){return!!getIteratorFn(maybeIterable)}function isIterator(maybeIterator){return maybeIterator&&"function"==typeof maybeIterator.next}function getIterator(iterable){var iteratorFn=getIteratorFn(iterable);return iteratorFn&&iteratorFn.call(iterable)}function getIteratorFn(iterable){var iteratorFn=iterable&&(REAL_ITERATOR_SYMBOL&&iterable[REAL_ITERATOR_SYMBOL]||iterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}function isArrayLike(value){return value&&"number"==typeof value.length}function Seq(value){return null===value||void 0===value?emptySequence():isIterable(value)?value.toSeq():seqFromValue(value)}function KeyedSeq(value){return null===value||void 0===value?emptySequence().toKeyedSeq():isIterable(value)?isKeyed(value)?value.toSeq():value.fromEntrySeq():keyedSeqFromValue(value)}function IndexedSeq(value){return null===value||void 0===value?emptySequence():isIterable(value)?isKeyed(value)?value.entrySeq():value.toIndexedSeq():indexedSeqFromValue(value)}function SetSeq(value){return(null===value||void 0===value?emptySequence():isIterable(value)?isKeyed(value)?value.entrySeq():value:indexedSeqFromValue(value)).toSetSeq()}function ArraySeq(array){this._array=array,this.size=array.length}function ObjectSeq(object){var keys=Object.keys(object);this._object=object,this._keys=keys,this.size=keys.length}function IterableSeq(iterable){this._iterable=iterable,this.size=iterable.length||iterable.size}function IteratorSeq(iterator){this._iterator=iterator,this._iteratorCache=[]}function isSeq(maybeSeq){return!(!maybeSeq||!maybeSeq[IS_SEQ_SENTINEL])}function emptySequence(){return EMPTY_SEQ||(EMPTY_SEQ=new ArraySeq([]))}function keyedSeqFromValue(value){var seq=Array.isArray(value)?new ArraySeq(value).fromEntrySeq():isIterator(value)?new IteratorSeq(value).fromEntrySeq():hasIterator(value)?new IterableSeq(value).fromEntrySeq():"object"===(void 0===value?"undefined":_typeof(value))?new ObjectSeq(value):void 0;if(!seq)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+value);return seq}function indexedSeqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(!seq)throw new TypeError("Expected Array or iterable object of values: "+value);return seq}function seqFromValue(value){var seq=maybeIndexedSeqFromValue(value)||"object"===(void 0===value?"undefined":_typeof(value))&&new ObjectSeq(value);if(!seq)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+value);return seq}function maybeIndexedSeqFromValue(value){return isArrayLike(value)?new ArraySeq(value):isIterator(value)?new IteratorSeq(value):hasIterator(value)?new IterableSeq(value):void 0}function seqIterate(seq,fn,reverse,useKeys){var cache=seq._cache;if(cache){for(var maxIndex=cache.length-1,ii=0;ii<=maxIndex;ii++){var entry=cache[reverse?maxIndex-ii:ii];if(!1===fn(entry[1],useKeys?entry[0]:ii,seq))return ii+1}return ii}return seq.__iterateUncached(fn,reverse)}function seqIterator(seq,type,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1,ii=0;return new Iterator(function(){var entry=cache[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,useKeys?entry[0]:ii-1,entry[1])})}return seq.__iteratorUncached(type,reverse)}function fromJS(json,converter){return converter?fromJSWith(converter,json,"",{"":json}):fromJSDefault(json)}function fromJSWith(converter,json,key,parentJSON){return Array.isArray(json)?converter.call(parentJSON,key,IndexedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json)})):isPlainObj(json)?converter.call(parentJSON,key,KeyedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json)})):json}function fromJSDefault(json){return Array.isArray(json)?IndexedSeq(json).map(fromJSDefault).toList():isPlainObj(json)?KeyedSeq(json).map(fromJSDefault).toMap():json}function isPlainObj(value){return value&&(value.constructor===Object||void 0===value.constructor)}function is(valueA,valueB){if(valueA===valueB||valueA!==valueA&&valueB!==valueB)return!0;if(!valueA||!valueB)return!1;if("function"==typeof valueA.valueOf&&"function"==typeof valueB.valueOf){if(valueA=valueA.valueOf(),valueB=valueB.valueOf(),valueA===valueB||valueA!==valueA&&valueB!==valueB)return!0;if(!valueA||!valueB)return!1}return!("function"!=typeof valueA.equals||"function"!=typeof valueB.equals||!valueA.equals(valueB))}function deepEqual(a,b){if(a===b)return!0;if(!isIterable(b)||void 0!==a.size&&void 0!==b.size&&a.size!==b.size||void 0!==a.__hash&&void 0!==b.__hash&&a.__hash!==b.__hash||isKeyed(a)!==isKeyed(b)||isIndexed(a)!==isIndexed(b)||isOrdered(a)!==isOrdered(b))return!1;if(0===a.size&&0===b.size)return!0;var notAssociative=!isAssociative(a);if(isOrdered(a)){var entries=a.entries();return b.every(function(v,k){var entry=entries.next().value;return entry&&is(entry[1],v)&&(notAssociative||is(entry[0],k))})&&entries.next().done}var flipped=!1;if(void 0===a.size)if(void 0===b.size)"function"==typeof a.cacheResult&&a.cacheResult();else{flipped=!0;var _=a;a=b,b=_}var allEqual=!0,bSize=b.__iterate(function(v,k){if(notAssociative?!a.has(v):flipped?!is(v,a.get(k,NOT_SET)):!is(a.get(k,NOT_SET),v))return allEqual=!1,!1});return allEqual&&a.size===bSize}function Repeat(value,times){if(!(this instanceof Repeat))return new Repeat(value,times);if(this._value=value,this.size=void 0===times?1/0:Math.max(0,times),0===this.size){if(EMPTY_REPEAT)return EMPTY_REPEAT;EMPTY_REPEAT=this}}function invariant(condition,error){if(!condition)throw new Error(error)}function Range(start,end,step){if(!(this instanceof Range))return new Range(start,end,step);if(invariant(0!==step,"Cannot step a Range by 0"),start=start||0,void 0===end&&(end=1/0),step=void 0===step?1:Math.abs(step),end<start&&(step=-step),this._start=start,this._end=end,this._step=step,this.size=Math.max(0,Math.ceil((end-start)/step-1)+1),0===this.size){if(EMPTY_RANGE)return EMPTY_RANGE;EMPTY_RANGE=this}}function Collection(){throw TypeError("Abstract")}function KeyedCollection(){}function IndexedCollection(){}function SetCollection(){}function smi(i32){return i32>>>1&1073741824|3221225471&i32}function hash(o){if(!1===o||null===o||void 0===o)return 0;if("function"==typeof o.valueOf&&(!1===(o=o.valueOf())||null===o||void 0===o))return 0;if(!0===o)return 1;var type=void 0===o?"undefined":_typeof(o);if("number"===type){if(o!==o||o===1/0)return 0;var h=0|o;for(h!==o&&(h^=4294967295*o);o>4294967295;)o/=4294967295,h^=o;return smi(h)}if("string"===type)return o.length>STRING_HASH_CACHE_MIN_STRLEN?cachedHashString(o):hashString(o);if("function"==typeof o.hashCode)return o.hashCode();if("object"===type)return hashJSObj(o);if("function"==typeof o.toString)return hashString(o.toString());throw new Error("Value type "+type+" cannot be hashed.")}function cachedHashString(string){var hash=stringHashCache[string];return void 0===hash&&(hash=hashString(string),STRING_HASH_CACHE_SIZE===STRING_HASH_CACHE_MAX_SIZE&&(STRING_HASH_CACHE_SIZE=0,stringHashCache={}),STRING_HASH_CACHE_SIZE++,stringHashCache[string]=hash),hash}function hashString(string){for(var hash=0,ii=0;ii<string.length;ii++)hash=31*hash+string.charCodeAt(ii)|0;return smi(hash)}function hashJSObj(obj){var hash;if(usingWeakMap&&void 0!==(hash=weakMap.get(obj)))return hash;if(void 0!==(hash=obj[UID_HASH_KEY]))return hash;if(!canDefineProperty){if(void 0!==(hash=obj.propertyIsEnumerable&&obj.propertyIsEnumerable[UID_HASH_KEY]))return hash;if(void 0!==(hash=getIENodeHash(obj)))return hash}if(hash=++objHashUID,1073741824&objHashUID&&(objHashUID=0),usingWeakMap)weakMap.set(obj,hash);else{if(void 0!==isExtensible&&!1===isExtensible(obj))throw new Error("Non-extensible objects are not allowed as keys.");if(canDefineProperty)Object.defineProperty(obj,UID_HASH_KEY,{"enumerable":!1,"configurable":!1,"writable":!1,"value":hash});else if(void 0!==obj.propertyIsEnumerable&&obj.propertyIsEnumerable===obj.constructor.prototype.propertyIsEnumerable)obj.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},obj.propertyIsEnumerable[UID_HASH_KEY]=hash;else{if(void 0===obj.nodeType)throw new Error("Unable to set a non-enumerable property on object.");obj[UID_HASH_KEY]=hash}}return hash}function getIENodeHash(node){if(node&&node.nodeType>0)switch(node.nodeType){case 1:return node.uniqueID;case 9:return node.documentElement&&node.documentElement.uniqueID}}function assertNotInfinite(size){invariant(size!==1/0,"Cannot perform this action with an infinite size.")}function Map(value){return null===value||void 0===value?emptyMap():isMap(value)&&!isOrdered(value)?value:emptyMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size),iter.forEach(function(v,k){return map.set(k,v)})})}function isMap(maybeMap){return!(!maybeMap||!maybeMap[IS_MAP_SENTINEL])}function ArrayMapNode(ownerID,entries){this.ownerID=ownerID,this.entries=entries}function BitmapIndexedNode(ownerID,bitmap,nodes){this.ownerID=ownerID,this.bitmap=bitmap,this.nodes=nodes}function HashArrayMapNode(ownerID,count,nodes){this.ownerID=ownerID,this.count=count,this.nodes=nodes}function HashCollisionNode(ownerID,keyHash,entries){this.ownerID=ownerID,this.keyHash=keyHash,this.entries=entries}function ValueNode(ownerID,keyHash,entry){this.ownerID=ownerID,this.keyHash=keyHash,this.entry=entry}function MapIterator(map,type,reverse){this._type=type,this._reverse=reverse,this._stack=map._root&&mapIteratorFrame(map._root)}function mapIteratorValue(type,entry){return iteratorValue(type,entry[0],entry[1])}function mapIteratorFrame(node,prev){return{"node":node,"index":0,"__prev":prev}}function makeMap(size,root,ownerID,hash){var map=Object.create(MapPrototype);return map.size=size,map._root=root,map.__ownerID=ownerID,map.__hash=hash,map.__altered=!1,map}function emptyMap(){return EMPTY_MAP||(EMPTY_MAP=makeMap(0))}function updateMap(map,k,v){var newRoot,newSize;if(map._root){var didChangeSize=MakeRef(CHANGE_LENGTH),didAlter=MakeRef(DID_ALTER);if(newRoot=updateNode(map._root,map.__ownerID,0,void 0,k,v,didChangeSize,didAlter),!didAlter.value)return map;newSize=map.size+(didChangeSize.value?v===NOT_SET?-1:1:0)}else{if(v===NOT_SET)return map;newSize=1,newRoot=new ArrayMapNode(map.__ownerID,[[k,v]])}return map.__ownerID?(map.size=newSize,map._root=newRoot,map.__hash=void 0,map.__altered=!0,map):newRoot?makeMap(newSize,newRoot):emptyMap()}function updateNode(node,ownerID,shift,keyHash,key,value,didChangeSize,didAlter){return node?node.update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter):value===NOT_SET?node:(SetRef(didAlter),SetRef(didChangeSize),new ValueNode(ownerID,keyHash,[key,value]))}function isLeafNode(node){return node.constructor===ValueNode||node.constructor===HashCollisionNode}function mergeIntoNode(node,ownerID,shift,keyHash,entry){if(node.keyHash===keyHash)return new HashCollisionNode(ownerID,keyHash,[node.entry,entry]);var newNode,idx1=(0===shift?node.keyHash:node.keyHash>>>shift)&MASK,idx2=(0===shift?keyHash:keyHash>>>shift)&MASK;return new BitmapIndexedNode(ownerID,1<<idx1|1<<idx2,idx1===idx2?[mergeIntoNode(node,ownerID,shift+SHIFT,keyHash,entry)]:(newNode=new ValueNode(ownerID,keyHash,entry),idx1<idx2?[node,newNode]:[newNode,node]))}function createNodes(ownerID,entries,key,value){ownerID||(ownerID=new OwnerID);for(var node=new ValueNode(ownerID,hash(key),[key,value]),ii=0;ii<entries.length;ii++){var entry=entries[ii];node=node.update(ownerID,0,void 0,entry[0],entry[1])}return node}function packNodes(ownerID,nodes,count,excluding){for(var bitmap=0,packedII=0,packedNodes=new Array(count),ii=0,bit=1,len=nodes.length;ii<len;ii++,bit<<=1){var node=nodes[ii];void 0!==node&&ii!==excluding&&(bitmap|=bit,packedNodes[packedII++]=node)}return new BitmapIndexedNode(ownerID,bitmap,packedNodes)}function expandNodes(ownerID,nodes,bitmap,including,node){for(var count=0,expandedNodes=new Array(SIZE),ii=0;0!==bitmap;ii++,bitmap>>>=1)expandedNodes[ii]=1&bitmap?nodes[count++]:void 0;return expandedNodes[including]=node,new HashArrayMapNode(ownerID,count+1,expandedNodes)}function mergeIntoMapWith(map,merger,iterables){for(var iters=[],ii=0;ii<iterables.length;ii++){var value=iterables[ii],iter=KeyedIterable(value);isIterable(value)||(iter=iter.map(function(v){return fromJS(v)})),iters.push(iter)}return mergeIntoCollectionWith(map,merger,iters)}function deepMerger(existing,value,key){return existing&&existing.mergeDeep&&isIterable(value)?existing.mergeDeep(value):is(existing,value)?existing:value}function deepMergerWith(merger){return function(existing,value,key){if(existing&&existing.mergeDeepWith&&isIterable(value))return existing.mergeDeepWith(merger,value);var nextValue=merger(existing,value,key);return is(existing,nextValue)?existing:nextValue}}function mergeIntoCollectionWith(collection,merger,iters){return iters=iters.filter(function(x){return 0!==x.size}),0===iters.length?collection:0!==collection.size||collection.__ownerID||1!==iters.length?collection.withMutations(function(collection){for(var mergeIntoMap=merger?function(value,key){collection.update(key,NOT_SET,function(existing){return existing===NOT_SET?value:merger(existing,value,key)})}:function(value,key){collection.set(key,value)},ii=0;ii<iters.length;ii++)iters[ii].forEach(mergeIntoMap)}):collection.constructor(iters[0])}function updateInDeepMap(existing,keyPathIter,notSetValue,updater){var isNotSet=existing===NOT_SET,step=keyPathIter.next();if(step.done){var existingValue=isNotSet?notSetValue:existing,newValue=updater(existingValue);return newValue===existingValue?existing:newValue}invariant(isNotSet||existing&&existing.set,"invalid keyPath");var key=step.value,nextExisting=isNotSet?NOT_SET:existing.get(key,NOT_SET),nextUpdated=updateInDeepMap(nextExisting,keyPathIter,notSetValue,updater);return nextUpdated===nextExisting?existing:nextUpdated===NOT_SET?existing.remove(key):(isNotSet?emptyMap():existing).set(key,nextUpdated)}function popCount(x){return x-=x>>1&1431655765,x=(858993459&x)+(x>>2&858993459),x=x+(x>>4)&252645135,x+=x>>8,127&(x+=x>>16)}function setIn(array,idx,val,canEdit){var newArray=canEdit?array:arrCopy(array);return newArray[idx]=val,newArray}function spliceIn(array,idx,val,canEdit){var newLen=array.length+1;if(canEdit&&idx+1===newLen)return array[idx]=val,array;for(var newArray=new Array(newLen),after=0,ii=0;ii<newLen;ii++)ii===idx?(newArray[ii]=val,after=-1):newArray[ii]=array[ii+after];return newArray}function spliceOut(array,idx,canEdit){var newLen=array.length-1;if(canEdit&&idx===newLen)return array.pop(),array;for(var newArray=new Array(newLen),after=0,ii=0;ii<newLen;ii++)ii===idx&&(after=1),newArray[ii]=array[ii+after];return newArray}function List(value){var empty=emptyList();if(null===value||void 0===value)return empty;if(isList(value))return value;var iter=IndexedIterable(value),size=iter.size;return 0===size?empty:(assertNotInfinite(size),size>0&&size<SIZE?makeList(0,size,SHIFT,null,new VNode(iter.toArray())):empty.withMutations(function(list){list.setSize(size),iter.forEach(function(v,i){return list.set(i,v)})}))}function isList(maybeList){return!(!maybeList||!maybeList[IS_LIST_SENTINEL])}function VNode(array,ownerID){this.array=array,this.ownerID=ownerID}function iterateList(list,reverse){function iterateNodeOrLeaf(node,level,offset){return 0===level?iterateLeaf(node,offset):iterateNode(node,level,offset)}function iterateLeaf(node,offset){var array=offset===tailPos?tail&&tail.array:node&&node.array,from=offset>left?0:left-offset,to=right-offset;return to>SIZE&&(to=SIZE),function(){if(from===to)return DONE;var idx=reverse?--to:from++;return array&&array[idx]}}function iterateNode(node,level,offset){var values,array=node&&node.array,from=offset>left?0:left-offset>>level,to=1+(right-offset>>level);return to>SIZE&&(to=SIZE),function(){for(;;){if(values){var value=values();if(value!==DONE)return value;values=null}if(from===to)return DONE;var idx=reverse?--to:from++;values=iterateNodeOrLeaf(array&&array[idx],level-SHIFT,offset+(idx<<level))}}}var left=list._origin,right=list._capacity,tailPos=getTailOffset(right),tail=list._tail;return iterateNodeOrLeaf(list._root,list._level,0)}function makeList(origin,capacity,level,root,tail,ownerID,hash){var list=Object.create(ListPrototype);return list.size=capacity-origin,list._origin=origin,list._capacity=capacity,list._level=level,list._root=root,list._tail=tail,list.__ownerID=ownerID,list.__hash=hash,list.__altered=!1,list}function emptyList(){return EMPTY_LIST||(EMPTY_LIST=makeList(0,0,SHIFT))}function updateList(list,index,value){if((index=wrapIndex(list,index))!==index)return list;if(index>=list.size||index<0)return list.withMutations(function(list){index<0?setListBounds(list,index).set(0,value):setListBounds(list,0,index+1).set(index,value)});index+=list._origin;var newTail=list._tail,newRoot=list._root,didAlter=MakeRef(DID_ALTER);return index>=getTailOffset(list._capacity)?newTail=updateVNode(newTail,list.__ownerID,0,index,value,didAlter):newRoot=updateVNode(newRoot,list.__ownerID,list._level,index,value,didAlter),didAlter.value?list.__ownerID?(list._root=newRoot,list._tail=newTail,list.__hash=void 0,list.__altered=!0,list):makeList(list._origin,list._capacity,list._level,newRoot,newTail):list}function updateVNode(node,ownerID,level,index,value,didAlter){var idx=index>>>level&MASK,nodeHas=node&&idx<node.array.length;if(!nodeHas&&void 0===value)return node;var newNode;if(level>0){var lowerNode=node&&node.array[idx],newLowerNode=updateVNode(lowerNode,ownerID,level-SHIFT,index,value,didAlter);return newLowerNode===lowerNode?node:(newNode=editableVNode(node,ownerID),newNode.array[idx]=newLowerNode,newNode)}return nodeHas&&node.array[idx]===value?node:(SetRef(didAlter),newNode=editableVNode(node,ownerID),void 0===value&&idx===newNode.array.length-1?newNode.array.pop():newNode.array[idx]=value,newNode)}function editableVNode(node,ownerID){return ownerID&&node&&ownerID===node.ownerID?node:new VNode(node?node.array.slice():[],ownerID)}function listNodeFor(list,rawIndex){if(rawIndex>=getTailOffset(list._capacity))return list._tail;if(rawIndex<1<<list._level+SHIFT){for(var node=list._root,level=list._level;node&&level>0;)node=node.array[rawIndex>>>level&MASK],level-=SHIFT;return node}}function setListBounds(list,begin,end){void 0!==begin&&(begin|=0),void 0!==end&&(end|=0);var owner=list.__ownerID||new OwnerID,oldOrigin=list._origin,oldCapacity=list._capacity,newOrigin=oldOrigin+begin,newCapacity=void 0===end?oldCapacity:end<0?oldCapacity+end:oldOrigin+end;if(newOrigin===oldOrigin&&newCapacity===oldCapacity)return list;if(newOrigin>=newCapacity)return list.clear();for(var newLevel=list._level,newRoot=list._root,offsetShift=0;newOrigin+offsetShift<0;)newRoot=new VNode(newRoot&&newRoot.array.length?[void 0,newRoot]:[],owner),newLevel+=SHIFT,offsetShift+=1<<newLevel;offsetShift&&(newOrigin+=offsetShift,oldOrigin+=offsetShift,newCapacity+=offsetShift,oldCapacity+=offsetShift);for(var oldTailOffset=getTailOffset(oldCapacity),newTailOffset=getTailOffset(newCapacity);newTailOffset>=1<<newLevel+SHIFT;)newRoot=new VNode(newRoot&&newRoot.array.length?[newRoot]:[],owner),newLevel+=SHIFT;var oldTail=list._tail,newTail=newTailOffset<oldTailOffset?listNodeFor(list,newCapacity-1):newTailOffset>oldTailOffset?new VNode([],owner):oldTail;if(oldTail&&newTailOffset>oldTailOffset&&newOrigin<oldCapacity&&oldTail.array.length){newRoot=editableVNode(newRoot,owner);for(var node=newRoot,level=newLevel;level>SHIFT;level-=SHIFT){var idx=oldTailOffset>>>level&MASK;node=node.array[idx]=editableVNode(node.array[idx],owner)}node.array[oldTailOffset>>>SHIFT&MASK]=oldTail}if(newCapacity<oldCapacity&&(newTail=newTail&&newTail.removeAfter(owner,0,newCapacity)),newOrigin>=newTailOffset)newOrigin-=newTailOffset,newCapacity-=newTailOffset,newLevel=SHIFT,newRoot=null,newTail=newTail&&newTail.removeBefore(owner,0,newOrigin);else if(newOrigin>oldOrigin||newTailOffset<oldTailOffset){for(offsetShift=0;newRoot;){var beginIndex=newOrigin>>>newLevel&MASK;if(beginIndex!==newTailOffset>>>newLevel&MASK)break;beginIndex&&(offsetShift+=(1<<newLevel)*beginIndex),newLevel-=SHIFT,newRoot=newRoot.array[beginIndex]}newRoot&&newOrigin>oldOrigin&&(newRoot=newRoot.removeBefore(owner,newLevel,newOrigin-offsetShift)),newRoot&&newTailOffset<oldTailOffset&&(newRoot=newRoot.removeAfter(owner,newLevel,newTailOffset-offsetShift)),offsetShift&&(newOrigin-=offsetShift,newCapacity-=offsetShift)}return list.__ownerID?(list.size=newCapacity-newOrigin,list._origin=newOrigin,list._capacity=newCapacity,list._level=newLevel,list._root=newRoot,list._tail=newTail,list.__hash=void 0,list.__altered=!0,list):makeList(newOrigin,newCapacity,newLevel,newRoot,newTail)}function mergeIntoListWith(list,merger,iterables){for(var iters=[],maxSize=0,ii=0;ii<iterables.length;ii++){var value=iterables[ii],iter=IndexedIterable(value);iter.size>maxSize&&(maxSize=iter.size),isIterable(value)||(iter=iter.map(function(v){return fromJS(v)})),iters.push(iter)}return maxSize>list.size&&(list=list.setSize(maxSize)),mergeIntoCollectionWith(list,merger,iters)}function getTailOffset(size){return size<SIZE?0:size-1>>>SHIFT<<SHIFT}function OrderedMap(value){return null===value||void 0===value?emptyOrderedMap():isOrderedMap(value)?value:emptyOrderedMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size),iter.forEach(function(v,k){return map.set(k,v)})})}function isOrderedMap(maybeOrderedMap){return isMap(maybeOrderedMap)&&isOrdered(maybeOrderedMap)}function makeOrderedMap(map,list,ownerID,hash){var omap=Object.create(OrderedMap.prototype);return omap.size=map?map.size:0,omap._map=map,omap._list=list,omap.__ownerID=ownerID,omap.__hash=hash,omap}function emptyOrderedMap(){return EMPTY_ORDERED_MAP||(EMPTY_ORDERED_MAP=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(omap,k,v){var newMap,newList,map=omap._map,list=omap._list,i=map.get(k),has=void 0!==i;if(v===NOT_SET){if(!has)return omap;list.size>=SIZE&&list.size>=2*map.size?(newList=list.filter(function(entry,idx){return void 0!==entry&&i!==idx}),newMap=newList.toKeyedSeq().map(function(entry){return entry[0]}).flip().toMap(),omap.__ownerID&&(newMap.__ownerID=newList.__ownerID=omap.__ownerID)):(newMap=map.remove(k),newList=i===list.size-1?list.pop():list.set(i,void 0))}else if(has){if(v===list.get(i)[1])return omap;newMap=map,newList=list.set(i,[k,v])}else newMap=map.set(k,list.size),newList=list.set(list.size,[k,v]);return omap.__ownerID?(omap.size=newMap.size,omap._map=newMap,omap._list=newList,omap.__hash=void 0,omap):makeOrderedMap(newMap,newList)}function ToKeyedSequence(indexed,useKeys){this._iter=indexed,this._useKeys=useKeys,this.size=indexed.size}function ToIndexedSequence(iter){this._iter=iter,this.size=iter.size}function ToSetSequence(iter){this._iter=iter,this.size=iter.size}function FromEntriesSequence(entries){this._iter=entries,this.size=entries.size}function flipFactory(iterable){var flipSequence=makeSequence(iterable);return flipSequence._iter=iterable,flipSequence.size=iterable.size,flipSequence.flip=function(){return iterable},flipSequence.reverse=function(){var reversedSequence=iterable.reverse.apply(this);return reversedSequence.flip=function(){return iterable.reverse()},reversedSequence},flipSequence.has=function(key){return iterable.includes(key)},flipSequence.includes=function(key){return iterable.has(key)},flipSequence.cacheResult=cacheResultThrough,flipSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return!1!==fn(k,v,this$0)},reverse)},flipSequence.__iteratorUncached=function(type,reverse){if(type===ITERATE_ENTRIES){var iterator=iterable.__iterator(type,reverse);return new Iterator(function(){var step=iterator.next();if(!step.done){var k=step.value[0];step.value[0]=step.value[1],step.value[1]=k}return step})}return iterable.__iterator(type===ITERATE_VALUES?ITERATE_KEYS:ITERATE_VALUES,reverse)},flipSequence}function mapFactory(iterable,mapper,context){var mappedSequence=makeSequence(iterable);return mappedSequence.size=iterable.size,mappedSequence.has=function(key){return iterable.has(key)},mappedSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v===NOT_SET?notSetValue:mapper.call(context,v,key,iterable)},mappedSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k,c){return!1!==fn(mapper.call(context,v,k,c),k,this$0)},reverse)},mappedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);return new Iterator(function(){var step=iterator.next();if(step.done)return step;var entry=step.value,key=entry[0];return iteratorValue(type,key,mapper.call(context,entry[1],key,iterable),step)})},mappedSequence}function reverseFactory(iterable,useKeys){var reversedSequence=makeSequence(iterable);return reversedSequence._iter=iterable,reversedSequence.size=iterable.size,reversedSequence.reverse=function(){return iterable},iterable.flip&&(reversedSequence.flip=function(){var flipSequence=flipFactory(iterable);return flipSequence.reverse=function(){return iterable.flip()},flipSequence}),reversedSequence.get=function(key,notSetValue){return iterable.get(useKeys?key:-1-key,notSetValue)},reversedSequence.has=function(key){return iterable.has(useKeys?key:-1-key)},reversedSequence.includes=function(value){return iterable.includes(value)},reversedSequence.cacheResult=cacheResultThrough,reversedSequence.__iterate=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(v,k,this$0)},!reverse)},reversedSequence.__iterator=function(type,reverse){return iterable.__iterator(type,!reverse)},reversedSequence}function filterFactory(iterable,predicate,context,useKeys){var filterSequence=makeSequence(iterable);return useKeys&&(filterSequence.has=function(key){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&!!predicate.call(context,v,key,iterable)},filterSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&predicate.call(context,v,key,iterable)?v:notSetValue}),filterSequence.__iterateUncached=function(fn,reverse){var this$0=this,iterations=0;return iterable.__iterate(function(v,k,c){if(predicate.call(context,v,k,c))return iterations++,fn(v,useKeys?k:iterations-1,this$0)},reverse),iterations},filterSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse),iterations=0;return new Iterator(function(){for(;;){var step=iterator.next();if(step.done)return step;var entry=step.value,key=entry[0],value=entry[1];if(predicate.call(context,value,key,iterable))return iteratorValue(type,useKeys?key:iterations++,value,step)}})},filterSequence}function countByFactory(iterable,grouper,context){var groups=Map().asMutable();return iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),0,function(a){return a+1})}),groups.asImmutable()}function groupByFactory(iterable,grouper,context){var isKeyedIter=isKeyed(iterable),groups=(isOrdered(iterable)?OrderedMap():Map()).asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),function(a){return a=a||[],a.push(isKeyedIter?[k,v]:v),a})});var coerce=iterableClass(iterable);return groups.map(function(arr){return reify(iterable,coerce(arr))})}function sliceFactory(iterable,begin,end,useKeys){var originalSize=iterable.size;if(void 0!==begin&&(begin|=0),void 0!==end&&(end===1/0?end=originalSize:end|=0),wholeSlice(begin,end,originalSize))return iterable;var resolvedBegin=resolveBegin(begin,originalSize),resolvedEnd=resolveEnd(end,originalSize);if(resolvedBegin!==resolvedBegin||resolvedEnd!==resolvedEnd)return sliceFactory(iterable.toSeq().cacheResult(),begin,end,useKeys);var sliceSize,resolvedSize=resolvedEnd-resolvedBegin;resolvedSize===resolvedSize&&(sliceSize=resolvedSize<0?0:resolvedSize);var sliceSeq=makeSequence(iterable);return sliceSeq.size=0===sliceSize?sliceSize:iterable.size&&sliceSize||void 0,!useKeys&&isSeq(iterable)&&sliceSize>=0&&(sliceSeq.get=function(index,notSetValue){return index=wrapIndex(this,index),index>=0&&index<sliceSize?iterable.get(index+resolvedBegin,notSetValue):notSetValue}),sliceSeq.__iterateUncached=function(fn,reverse){var this$0=this;if(0===sliceSize)return 0;if(reverse)return this.cacheResult().__iterate(fn,reverse);var skipped=0,isSkipping=!0,iterations=0;return iterable.__iterate(function(v,k){if(!isSkipping||!(isSkipping=skipped++<resolvedBegin))return iterations++,!1!==fn(v,useKeys?k:iterations-1,this$0)&&iterations!==sliceSize}),iterations},sliceSeq.__iteratorUncached=function(type,reverse){if(0!==sliceSize&&reverse)return this.cacheResult().__iterator(type,reverse);var iterator=0!==sliceSize&&iterable.__iterator(type,reverse),skipped=0,iterations=0;return new Iterator(function(){for(;skipped++<resolvedBegin;)iterator.next();if(++iterations>sliceSize)return iteratorDone();var step=iterator.next();return useKeys||type===ITERATE_VALUES?step:type===ITERATE_KEYS?iteratorValue(type,iterations-1,void 0,step):iteratorValue(type,iterations-1,step.value[1],step)})},sliceSeq}function takeWhileFactory(iterable,predicate,context){var takeSequence=makeSequence(iterable);return takeSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse)return this.cacheResult().__iterate(fn,reverse);var iterations=0;return iterable.__iterate(function(v,k,c){return predicate.call(context,v,k,c)&&++iterations&&fn(v,k,this$0)}),iterations},takeSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse),iterating=!0;return new Iterator(function(){if(!iterating)return iteratorDone();var step=iterator.next();if(step.done)return step;var entry=step.value,k=entry[0],v=entry[1];return predicate.call(context,v,k,this$0)?type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step):(iterating=!1,iteratorDone())})},takeSequence}function skipWhileFactory(iterable,predicate,context,useKeys){var skipSequence=makeSequence(iterable);return skipSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse)return this.cacheResult().__iterate(fn,reverse);var isSkipping=!0,iterations=0;return iterable.__iterate(function(v,k,c){if(!isSkipping||!(isSkipping=predicate.call(context,v,k,c)))return iterations++,fn(v,useKeys?k:iterations-1,this$0)}),iterations},skipSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse),skipping=!0,iterations=0;return new Iterator(function(){var step,k,v;do{if(step=iterator.next(),step.done)return useKeys||type===ITERATE_VALUES?step:type===ITERATE_KEYS?iteratorValue(type,iterations++,void 0,step):iteratorValue(type,iterations++,step.value[1],step);var entry=step.value;k=entry[0],v=entry[1],skipping&&(skipping=predicate.call(context,v,k,this$0))}while(skipping);return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step)})},skipSequence}function concatFactory(iterable,values){var isKeyedIterable=isKeyed(iterable),iters=[iterable].concat(values).map(function(v){return isIterable(v)?isKeyedIterable&&(v=KeyedIterable(v)):v=isKeyedIterable?keyedSeqFromValue(v):indexedSeqFromValue(Array.isArray(v)?v:[v]),v}).filter(function(v){return 0!==v.size});if(0===iters.length)return iterable;if(1===iters.length){var singleton=iters[0];if(singleton===iterable||isKeyedIterable&&isKeyed(singleton)||isIndexed(iterable)&&isIndexed(singleton))return singleton}var concatSeq=new ArraySeq(iters);return isKeyedIterable?concatSeq=concatSeq.toKeyedSeq():isIndexed(iterable)||(concatSeq=concatSeq.toSetSeq()),concatSeq=concatSeq.flatten(!0),concatSeq.size=iters.reduce(function(sum,seq){if(void 0!==sum){var size=seq.size;if(void 0!==size)return sum+size}},0),concatSeq}function flattenFactory(iterable,depth,useKeys){var flatSequence=makeSequence(iterable);return flatSequence.__iterateUncached=function(fn,reverse){function flatDeep(iter,currentDepth){var this$0=this;iter.__iterate(function(v,k){return(!depth||currentDepth<depth)&&isIterable(v)?flatDeep(v,currentDepth+1):!1===fn(v,useKeys?k:iterations++,this$0)&&(stopped=!0),!stopped},reverse)}var iterations=0,stopped=!1;return flatDeep(iterable,0),iterations},flatSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(type,reverse),stack=[],iterations=0;return new Iterator(function(){for(;iterator;){var step=iterator.next();if(!1===step.done){var v=step.value;if(type===ITERATE_ENTRIES&&(v=v[1]),depth&&!(stack.length<depth)||!isIterable(v))return useKeys?step:iteratorValue(type,iterations++,v,step);stack.push(iterator),iterator=v.__iterator(type,reverse)}else iterator=stack.pop()}return iteratorDone()})},flatSequence}function flatMapFactory(iterable,mapper,context){var coerce=iterableClass(iterable);return iterable.toSeq().map(function(v,k){return coerce(mapper.call(context,v,k,iterable))}).flatten(!0)}function interposeFactory(iterable,separator){var interposedSequence=makeSequence(iterable);return interposedSequence.size=iterable.size&&2*iterable.size-1,interposedSequence.__iterateUncached=function(fn,reverse){var this$0=this,iterations=0;return iterable.__iterate(function(v,k){return(!iterations||!1!==fn(separator,iterations++,this$0))&&!1!==fn(v,iterations++,this$0)},reverse),iterations},interposedSequence.__iteratorUncached=function(type,reverse){var step,iterator=iterable.__iterator(ITERATE_VALUES,reverse),iterations=0;return new Iterator(function(){return(!step||iterations%2)&&(step=iterator.next(),step.done)?step:iterations%2?iteratorValue(type,iterations++,separator):iteratorValue(type,iterations++,step.value,step)})},interposedSequence}function sortFactory(iterable,comparator,mapper){comparator||(comparator=defaultComparator);var isKeyedIterable=isKeyed(iterable),index=0,entries=iterable.toSeq().map(function(v,k){return[k,v,index++,mapper?mapper(v,k,iterable):v]}).toArray();return entries.sort(function(a,b){return comparator(a[3],b[3])||a[2]-b[2]}).forEach(isKeyedIterable?function(v,i){entries[i].length=2}:function(v,i){entries[i]=v[1]}),isKeyedIterable?KeyedSeq(entries):isIndexed(iterable)?IndexedSeq(entries):SetSeq(entries)}function maxFactory(iterable,comparator,mapper){if(comparator||(comparator=defaultComparator),mapper){var entry=iterable.toSeq().map(function(v,k){return[v,mapper(v,k,iterable)]}).reduce(function(a,b){return maxCompare(comparator,a[1],b[1])?b:a});return entry&&entry[0]}return iterable.reduce(function(a,b){return maxCompare(comparator,a,b)?b:a})}function maxCompare(comparator,a,b){var comp=comparator(b,a);return 0===comp&&b!==a&&(void 0===b||null===b||b!==b)||comp>0}function zipWithFactory(keyIter,zipper,iters){var zipSequence=makeSequence(keyIter);return zipSequence.size=new ArraySeq(iters).map(function(i){return i.size}).min(),zipSequence.__iterate=function(fn,reverse){for(var step,iterator=this.__iterator(ITERATE_VALUES,reverse),iterations=0;!(step=iterator.next()).done&&!1!==fn(step.value,iterations++,this););return iterations},zipSequence.__iteratorUncached=function(type,reverse){var iterators=iters.map(function(i){return i=Iterable(i),getIterator(reverse?i.reverse():i)}),iterations=0,isDone=!1;return new Iterator(function(){var steps;return isDone||(steps=iterators.map(function(i){return i.next()}),isDone=steps.some(function(s){return s.done})),isDone?iteratorDone():iteratorValue(type,iterations++,zipper.apply(null,steps.map(function(s){return s.value})))})},zipSequence}function reify(iter,seq){return isSeq(iter)?seq:iter.constructor(seq)}function validateEntry(entry){if(entry!==Object(entry))throw new TypeError("Expected [K, V] tuple: "+entry)}function resolveSize(iter){return assertNotInfinite(iter.size),ensureSize(iter)}function iterableClass(iterable){return isKeyed(iterable)?KeyedIterable:isIndexed(iterable)?IndexedIterable:SetIterable}function makeSequence(iterable){return Object.create((isKeyed(iterable)?KeyedSeq:isIndexed(iterable)?IndexedSeq:SetSeq).prototype)}function cacheResultThrough(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Seq.prototype.cacheResult.call(this)}function defaultComparator(a,b){return a>b?1:a<b?-1:0}function forceIterator(keyPath){var iter=getIterator(keyPath);if(!iter){if(!isArrayLike(keyPath))throw new TypeError("Expected iterable or array-like: "+keyPath);iter=getIterator(Iterable(keyPath))}return iter}function Record(defaultValues,name){var hasInitialized,RecordType=function(values){if(values instanceof RecordType)return values;if(!(this instanceof RecordType))return new RecordType(values);if(!hasInitialized){hasInitialized=!0;var keys=Object.keys(defaultValues);setProps(RecordTypePrototype,keys),RecordTypePrototype.size=keys.length,RecordTypePrototype._name=name,RecordTypePrototype._keys=keys,RecordTypePrototype._defaultValues=defaultValues}this._map=Map(values)},RecordTypePrototype=RecordType.prototype=Object.create(RecordPrototype);return RecordTypePrototype.constructor=RecordType,RecordType}function makeRecord(likeRecord,map,ownerID){var record=Object.create(Object.getPrototypeOf(likeRecord));return record._map=map,record.__ownerID=ownerID,record}function recordName(record){return record._name||record.constructor.name||"Record"}function setProps(prototype,names){try{names.forEach(setProp.bind(void 0,prototype))}catch(error){}}function setProp(prototype,name){Object.defineProperty(prototype,name,{"get":function(){return this.get(name)},"set":function(value){invariant(this.__ownerID,"Cannot set on an immutable record."),this.set(name,value)}})}function Set(value){return null===value||void 0===value?emptySet():isSet(value)&&!isOrdered(value)?value:emptySet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size),iter.forEach(function(v){return set.add(v)})})}function isSet(maybeSet){return!(!maybeSet||!maybeSet[IS_SET_SENTINEL])}function updateSet(set,newMap){return set.__ownerID?(set.size=newMap.size,set._map=newMap,set):newMap===set._map?set:0===newMap.size?set.__empty():set.__make(newMap)}function makeSet(map,ownerID){var set=Object.create(SetPrototype);return set.size=map?map.size:0,set._map=map,set.__ownerID=ownerID,set}function emptySet(){return EMPTY_SET||(EMPTY_SET=makeSet(emptyMap()))}function OrderedSet(value){return null===value||void 0===value?emptyOrderedSet():isOrderedSet(value)?value:emptyOrderedSet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size),iter.forEach(function(v){return set.add(v)})})}function isOrderedSet(maybeOrderedSet){return isSet(maybeOrderedSet)&&isOrdered(maybeOrderedSet)}function makeOrderedSet(map,ownerID){var set=Object.create(OrderedSetPrototype);return set.size=map?map.size:0,set._map=map,set.__ownerID=ownerID,set}function emptyOrderedSet(){return EMPTY_ORDERED_SET||(EMPTY_ORDERED_SET=makeOrderedSet(emptyOrderedMap()))}function Stack(value){return null===value||void 0===value?emptyStack():isStack(value)?value:emptyStack().unshiftAll(value)}function isStack(maybeStack){return!(!maybeStack||!maybeStack[IS_STACK_SENTINEL])}function makeStack(size,head,ownerID,hash){var map=Object.create(StackPrototype);return map.size=size,map._head=head,map.__ownerID=ownerID,map.__hash=hash,map.__altered=!1,map}function emptyStack(){return EMPTY_STACK||(EMPTY_STACK=makeStack(0))}function mixin(ctor,methods){var keyCopier=function(key){ctor.prototype[key]=methods[key]};return Object.keys(methods).forEach(keyCopier),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(methods).forEach(keyCopier),ctor}function keyMapper(v,k){return k}function entryMapper(v,k){return[k,v]}function not(predicate){return function(){return!predicate.apply(this,arguments)}}function neg(predicate){return function(){return-predicate.apply(this,arguments)}}function quoteString(value){return"string"==typeof value?JSON.stringify(value):String(value)}function defaultZipper(){return arrCopy(arguments)}function defaultNegComparator(a,b){return a<b?1:a>b?-1:0}function hashIterable(iterable){if(iterable.size===1/0)return 0;var ordered=isOrdered(iterable),keyed=isKeyed(iterable),h=ordered?1:0;return murmurHashOfSize(iterable.__iterate(keyed?ordered?function(v,k){h=31*h+hashMerge(hash(v),hash(k))|0}:function(v,k){h=h+hashMerge(hash(v),hash(k))|0}:ordered?function(v){h=31*h+hash(v)|0}:function(v){h=h+hash(v)|0}),h)}function murmurHashOfSize(size,h){return h=imul(h,3432918353),h=imul(h<<15|h>>>-15,461845907),h=imul(h<<13|h>>>-13,5),h=(h+3864292196|0)^size,h=imul(h^h>>>16,2246822507),h=imul(h^h>>>13,3266489909),h=smi(h^h>>>16)}function hashMerge(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}var SLICE$0=Array.prototype.slice;createClass(KeyedIterable,Iterable),createClass(IndexedIterable,Iterable),createClass(SetIterable,Iterable),Iterable.isIterable=isIterable,Iterable.isKeyed=isKeyed,Iterable.isIndexed=isIndexed,Iterable.isAssociative=isAssociative,Iterable.isOrdered=isOrdered,Iterable.Keyed=KeyedIterable,Iterable.Indexed=IndexedIterable,Iterable.Set=SetIterable;var IS_ITERABLE_SENTINEL="@@__IMMUTABLE_ITERABLE__@@",IS_KEYED_SENTINEL="@@__IMMUTABLE_KEYED__@@",IS_INDEXED_SENTINEL="@@__IMMUTABLE_INDEXED__@@",IS_ORDERED_SENTINEL="@@__IMMUTABLE_ORDERED__@@",SHIFT=5,SIZE=1<<SHIFT,MASK=SIZE-1,NOT_SET={},CHANGE_LENGTH={"value":!1},DID_ALTER={"value":!1},ITERATE_KEYS=0,ITERATE_VALUES=1,ITERATE_ENTRIES=2,REAL_ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator",ITERATOR_SYMBOL=REAL_ITERATOR_SYMBOL||FAUX_ITERATOR_SYMBOL;Iterator.prototype.toString=function(){return"[Iterator]"},Iterator.KEYS=ITERATE_KEYS,Iterator.VALUES=ITERATE_VALUES,Iterator.ENTRIES=ITERATE_ENTRIES,Iterator.prototype.inspect=Iterator.prototype.toSource=function(){return this.toString()},Iterator.prototype[ITERATOR_SYMBOL]=function(){return this},createClass(Seq,Iterable),Seq.of=function(){return Seq(arguments)},Seq.prototype.toSeq=function(){return this},Seq.prototype.toString=function(){return this.__toString("Seq {","}")},Seq.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Seq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,!0)},Seq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,!0)},createClass(KeyedSeq,Seq),KeyedSeq.prototype.toKeyedSeq=function(){return this},createClass(IndexedSeq,Seq),IndexedSeq.of=function(){return IndexedSeq(arguments)},IndexedSeq.prototype.toIndexedSeq=function(){return this},IndexedSeq.prototype.toString=function(){return this.__toString("Seq [","]")},IndexedSeq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,!1)},IndexedSeq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,!1)},createClass(SetSeq,Seq),SetSeq.of=function(){return SetSeq(arguments)},SetSeq.prototype.toSetSeq=function(){return this},Seq.isSeq=isSeq,Seq.Keyed=KeyedSeq,Seq.Set=SetSeq,Seq.Indexed=IndexedSeq;var IS_SEQ_SENTINEL="@@__IMMUTABLE_SEQ__@@";Seq.prototype[IS_SEQ_SENTINEL]=!0,createClass(ArraySeq,IndexedSeq),ArraySeq.prototype.get=function(index,notSetValue){return this.has(index)?this._array[wrapIndex(this,index)]:notSetValue},ArraySeq.prototype.__iterate=function(fn,reverse){for(var array=this._array,maxIndex=array.length-1,ii=0;ii<=maxIndex;ii++)if(!1===fn(array[reverse?maxIndex-ii:ii],ii,this))return ii+1;return ii},ArraySeq.prototype.__iterator=function(type,reverse){var array=this._array,maxIndex=array.length-1,ii=0;return new Iterator(function(){return ii>maxIndex?iteratorDone():iteratorValue(type,ii,array[reverse?maxIndex-ii++:ii++])})},createClass(ObjectSeq,KeyedSeq),ObjectSeq.prototype.get=function(key,notSetValue){return void 0===notSetValue||this.has(key)?this._object[key]:notSetValue},ObjectSeq.prototype.has=function(key){return this._object.hasOwnProperty(key)},ObjectSeq.prototype.__iterate=function(fn,reverse){for(var object=this._object,keys=this._keys,maxIndex=keys.length-1,ii=0;ii<=maxIndex;ii++){var key=keys[reverse?maxIndex-ii:ii];if(!1===fn(object[key],key,this))return ii+1}return ii},ObjectSeq.prototype.__iterator=function(type,reverse){var object=this._object,keys=this._keys,maxIndex=keys.length-1,ii=0;return new Iterator(function(){var key=keys[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,key,object[key])})},ObjectSeq.prototype[IS_ORDERED_SENTINEL]=!0,createClass(IterableSeq,IndexedSeq),IterableSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse)return this.cacheResult().__iterate(fn,reverse);var iterable=this._iterable,iterator=getIterator(iterable),iterations=0;if(isIterator(iterator))for(var step;!(step=iterator.next()).done&&!1!==fn(step.value,iterations++,this););return iterations},IterableSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse)return this.cacheResult().__iterator(type,reverse);var iterable=this._iterable,iterator=getIterator(iterable);if(!isIterator(iterator))return new Iterator(iteratorDone);var iterations=0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value)})},createClass(IteratorSeq,IndexedSeq),IteratorSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse)return this.cacheResult().__iterate(fn,reverse);for(var iterator=this._iterator,cache=this._iteratorCache,iterations=0;iterations<cache.length;)if(!1===fn(cache[iterations],iterations++,this))return iterations;for(var step;!(step=iterator.next()).done;){var val=step.value;if(cache[iterations]=val,!1===fn(val,iterations++,this))break}return iterations},IteratorSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=this._iterator,cache=this._iteratorCache,iterations=0;return new Iterator(function(){if(iterations>=cache.length){var step=iterator.next();if(step.done)return step;cache[iterations]=step.value}return iteratorValue(type,iterations,cache[iterations++])})};var EMPTY_SEQ;createClass(Repeat,IndexedSeq),Repeat.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Repeat.prototype.get=function(index,notSetValue){return this.has(index)?this._value:notSetValue},Repeat.prototype.includes=function(searchValue){return is(this._value,searchValue)},Repeat.prototype.slice=function(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:new Repeat(this._value,resolveEnd(end,size)-resolveBegin(begin,size))},Repeat.prototype.reverse=function(){return this},Repeat.prototype.indexOf=function(searchValue){return is(this._value,searchValue)?0:-1},Repeat.prototype.lastIndexOf=function(searchValue){return is(this._value,searchValue)?this.size:-1},Repeat.prototype.__iterate=function(fn,reverse){for(var ii=0;ii<this.size;ii++)if(!1===fn(this._value,ii,this))return ii+1;return ii},Repeat.prototype.__iterator=function(type,reverse){var this$0=this,ii=0;return new Iterator(function(){return ii<this$0.size?iteratorValue(type,ii++,this$0._value):iteratorDone()})},Repeat.prototype.equals=function(other){return other instanceof Repeat?is(this._value,other._value):deepEqual(other)};var EMPTY_REPEAT;createClass(Range,IndexedSeq),Range.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Range.prototype.get=function(index,notSetValue){return this.has(index)?this._start+wrapIndex(this,index)*this._step:notSetValue},Range.prototype.includes=function(searchValue){var possibleIndex=(searchValue-this._start)/this._step;return possibleIndex>=0&&possibleIndex<this.size&&possibleIndex===Math.floor(possibleIndex)},Range.prototype.slice=function(begin,end){return wholeSlice(begin,end,this.size)?this:(begin=resolveBegin(begin,this.size),end=resolveEnd(end,this.size),end<=begin?new Range(0,0):new Range(this.get(begin,this._end),this.get(end,this._end),this._step))},Range.prototype.indexOf=function(searchValue){var offsetValue=searchValue-this._start;if(offsetValue%this._step==0){var index=offsetValue/this._step;if(index>=0&&index<this.size)return index}return-1},Range.prototype.lastIndexOf=function(searchValue){return this.indexOf(searchValue)},Range.prototype.__iterate=function(fn,reverse){for(var maxIndex=this.size-1,step=this._step,value=reverse?this._start+maxIndex*step:this._start,ii=0;ii<=maxIndex;ii++){if(!1===fn(value,ii,this))return ii+1;value+=reverse?-step:step}return ii},Range.prototype.__iterator=function(type,reverse){var maxIndex=this.size-1,step=this._step,value=reverse?this._start+maxIndex*step:this._start,ii=0;return new Iterator(function(){var v=value;return value+=reverse?-step:step,ii>maxIndex?iteratorDone():iteratorValue(type,ii++,v)})},Range.prototype.equals=function(other){return other instanceof Range?this._start===other._start&&this._end===other._end&&this._step===other._step:deepEqual(this,other)};var EMPTY_RANGE;createClass(Collection,Iterable),createClass(KeyedCollection,Collection),createClass(IndexedCollection,Collection),createClass(SetCollection,Collection),Collection.Keyed=KeyedCollection,Collection.Indexed=IndexedCollection,Collection.Set=SetCollection;var weakMap,imul="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(a,b){a|=0,b|=0;var c=65535&a,d=65535&b;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0},isExtensible=Object.isExtensible,canDefineProperty=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),usingWeakMap="function"==typeof WeakMap;usingWeakMap&&(weakMap=new WeakMap);var objHashUID=0,UID_HASH_KEY="__immutablehash__";"function"==typeof Symbol&&(UID_HASH_KEY=Symbol(UID_HASH_KEY));var STRING_HASH_CACHE_MIN_STRLEN=16,STRING_HASH_CACHE_MAX_SIZE=255,STRING_HASH_CACHE_SIZE=0,stringHashCache={};createClass(Map,KeyedCollection),Map.of=function(){var keyValues=SLICE$0.call(arguments,0);return emptyMap().withMutations(function(map){for(var i=0;i<keyValues.length;i+=2){if(i+1>=keyValues.length)throw new Error("Missing value for key: "+keyValues[i]);map.set(keyValues[i],keyValues[i+1])}})},Map.prototype.toString=function(){return this.__toString("Map {","}")},Map.prototype.get=function(k,notSetValue){return this._root?this._root.get(0,void 0,k,notSetValue):notSetValue},Map.prototype.set=function(k,v){return updateMap(this,k,v)},Map.prototype.setIn=function(keyPath,v){return this.updateIn(keyPath,NOT_SET,function(){return v})},Map.prototype.remove=function(k){return updateMap(this,k,NOT_SET)},Map.prototype.deleteIn=function(keyPath){return this.updateIn(keyPath,function(){return NOT_SET})},Map.prototype.update=function(k,notSetValue,updater){return 1===arguments.length?k(this):this.updateIn([k],notSetValue,updater)},Map.prototype.updateIn=function(keyPath,notSetValue,updater){updater||(updater=notSetValue,notSetValue=void 0);var updatedValue=updateInDeepMap(this,forceIterator(keyPath),notSetValue,updater);return updatedValue===NOT_SET?void 0:updatedValue},Map.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):emptyMap()},Map.prototype.merge=function(){return mergeIntoMapWith(this,void 0,arguments)},Map.prototype.mergeWith=function(merger){return mergeIntoMapWith(this,merger,SLICE$0.call(arguments,1))},Map.prototype.mergeIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return"function"==typeof m.merge?m.merge.apply(m,iters):iters[iters.length-1]})},Map.prototype.mergeDeep=function(){return mergeIntoMapWith(this,deepMerger,arguments)},Map.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,deepMergerWith(merger),iters)},Map.prototype.mergeDeepIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return"function"==typeof m.mergeDeep?m.mergeDeep.apply(m,iters):iters[iters.length-1]})},Map.prototype.sort=function(comparator){return OrderedMap(sortFactory(this,comparator))},Map.prototype.sortBy=function(mapper,comparator){return OrderedMap(sortFactory(this,comparator,mapper))},Map.prototype.withMutations=function(fn){var mutable=this.asMutable();return fn(mutable),mutable.wasAltered()?mutable.__ensureOwner(this.__ownerID):this},Map.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)},Map.prototype.asImmutable=function(){return this.__ensureOwner()},Map.prototype.wasAltered=function(){return this.__altered},Map.prototype.__iterator=function(type,reverse){return new MapIterator(this,type,reverse)},Map.prototype.__iterate=function(fn,reverse){var this$0=this,iterations=0;return this._root&&this._root.iterate(function(entry){return iterations++,fn(entry[1],entry[0],this$0)},reverse),iterations},Map.prototype.__ensureOwner=function(ownerID){return ownerID===this.__ownerID?this:ownerID?makeMap(this.size,this._root,ownerID,this.__hash):(this.__ownerID=ownerID,this.__altered=!1,this)},Map.isMap=isMap;var IS_MAP_SENTINEL="@@__IMMUTABLE_MAP__@@",MapPrototype=Map.prototype;MapPrototype[IS_MAP_SENTINEL]=!0,MapPrototype["delete"]=MapPrototype.remove,MapPrototype.removeIn=MapPrototype.deleteIn,ArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){for(var entries=this.entries,ii=0,len=entries.length;ii<len;ii++)if(is(key,entries[ii][0]))return entries[ii][1];return notSetValue},ArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){for(var removed=value===NOT_SET,entries=this.entries,idx=0,len=entries.length;idx<len&&!is(key,entries[idx][0]);idx++);var exists=idx<len;if(exists?entries[idx][1]===value:removed)return this;if(SetRef(didAlter),(removed||!exists)&&SetRef(didChangeSize),!removed||1!==entries.length){if(!exists&&!removed&&entries.length>=MAX_ARRAY_MAP_SIZE)return createNodes(ownerID,entries,key,value);var isEditable=ownerID&&ownerID===this.ownerID,newEntries=isEditable?entries:arrCopy(entries);return exists?removed?idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop():newEntries[idx]=[key,value]:newEntries.push([key,value]),isEditable?(this.entries=newEntries,this):new ArrayMapNode(ownerID,newEntries)}},BitmapIndexedNode.prototype.get=function(shift,keyHash,key,notSetValue){void 0===keyHash&&(keyHash=hash(key));var bit=1<<((0===shift?keyHash:keyHash>>>shift)&MASK),bitmap=this.bitmap;return 0==(bitmap&bit)?notSetValue:this.nodes[popCount(bitmap&bit-1)].get(shift+SHIFT,keyHash,key,notSetValue)},BitmapIndexedNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var keyHashFrag=(0===shift?keyHash:keyHash>>>shift)&MASK,bit=1<<keyHashFrag,bitmap=this.bitmap,exists=0!=(bitmap&bit);if(!exists&&value===NOT_SET)return this;var idx=popCount(bitmap&bit-1),nodes=this.nodes,node=exists?nodes[idx]:void 0,newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node)return this;if(!exists&&newNode&&nodes.length>=MAX_BITMAP_INDEXED_SIZE)return expandNodes(ownerID,nodes,bitmap,keyHashFrag,newNode);if(exists&&!newNode&&2===nodes.length&&isLeafNode(nodes[1^idx]))return nodes[1^idx];if(exists&&newNode&&1===nodes.length&&isLeafNode(newNode))return newNode;var isEditable=ownerID&&ownerID===this.ownerID,newBitmap=exists?newNode?bitmap:bitmap^bit:bitmap|bit,newNodes=exists?newNode?setIn(nodes,idx,newNode,isEditable):spliceOut(nodes,idx,isEditable):spliceIn(nodes,idx,newNode,isEditable);return isEditable?(this.bitmap=newBitmap,this.nodes=newNodes,this):new BitmapIndexedNode(ownerID,newBitmap,newNodes)},HashArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){void 0===keyHash&&(keyHash=hash(key));var idx=(0===shift?keyHash:keyHash>>>shift)&MASK,node=this.nodes[idx];return node?node.get(shift+SHIFT,keyHash,key,notSetValue):notSetValue},HashArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var idx=(0===shift?keyHash:keyHash>>>shift)&MASK,removed=value===NOT_SET,nodes=this.nodes,node=nodes[idx];if(removed&&!node)return this;var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node)return this;var newCount=this.count;if(node){if(!newNode&&--newCount<MIN_HASH_ARRAY_MAP_SIZE)return packNodes(ownerID,nodes,newCount,idx)}else newCount++;var isEditable=ownerID&&ownerID===this.ownerID,newNodes=setIn(nodes,idx,newNode,isEditable);return isEditable?(this.count=newCount,this.nodes=newNodes,this):new HashArrayMapNode(ownerID,newCount,newNodes)},HashCollisionNode.prototype.get=function(shift,keyHash,key,notSetValue){for(var entries=this.entries,ii=0,len=entries.length;ii<len;ii++)if(is(key,entries[ii][0]))return entries[ii][1];return notSetValue},HashCollisionNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var removed=value===NOT_SET;if(keyHash!==this.keyHash)return removed?this:(SetRef(didAlter),SetRef(didChangeSize),mergeIntoNode(this,ownerID,shift,keyHash,[key,value]));for(var entries=this.entries,idx=0,len=entries.length;idx<len&&!is(key,entries[idx][0]);idx++);var exists=idx<len;if(exists?entries[idx][1]===value:removed)return this;if(SetRef(didAlter),(removed||!exists)&&SetRef(didChangeSize),removed&&2===len)return new ValueNode(ownerID,this.keyHash,entries[1^idx]);var isEditable=ownerID&&ownerID===this.ownerID,newEntries=isEditable?entries:arrCopy(entries);return exists?removed?idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop():newEntries[idx]=[key,value]:newEntries.push([key,value]),isEditable?(this.entries=newEntries,this):new HashCollisionNode(ownerID,this.keyHash,newEntries)},ValueNode.prototype.get=function(shift,keyHash,key,notSetValue){return is(key,this.entry[0])?this.entry[1]:notSetValue},ValueNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET,keyMatch=is(key,this.entry[0]);return(keyMatch?value===this.entry[1]:removed)?this:(SetRef(didAlter),removed?void SetRef(didChangeSize):keyMatch?ownerID&&ownerID===this.ownerID?(this.entry[1]=value,this):new ValueNode(ownerID,this.keyHash,[key,value]):(SetRef(didChangeSize),mergeIntoNode(this,ownerID,shift,hash(key),[key,value])))},ArrayMapNode.prototype.iterate=HashCollisionNode.prototype.iterate=function(fn,reverse){for(var entries=this.entries,ii=0,maxIndex=entries.length-1;ii<=maxIndex;ii++)if(!1===fn(entries[reverse?maxIndex-ii:ii]))return!1},BitmapIndexedNode.prototype.iterate=HashArrayMapNode.prototype.iterate=function(fn,reverse){for(var nodes=this.nodes,ii=0,maxIndex=nodes.length-1;ii<=maxIndex;ii++){var node=nodes[reverse?maxIndex-ii:ii];if(node&&!1===node.iterate(fn,reverse))return!1}},ValueNode.prototype.iterate=function(fn,reverse){return fn(this.entry)},createClass(MapIterator,Iterator),MapIterator.prototype.next=function(){for(var type=this._type,stack=this._stack;stack;){var maxIndex,node=stack.node,index=stack.index++;if(node.entry){if(0===index)return mapIteratorValue(type,node.entry)}else if(node.entries){if(maxIndex=node.entries.length-1,index<=maxIndex)return mapIteratorValue(type,node.entries[this._reverse?maxIndex-index:index])}else if(maxIndex=node.nodes.length-1,index<=maxIndex){var subNode=node.nodes[this._reverse?maxIndex-index:index];if(subNode){if(subNode.entry)return mapIteratorValue(type,subNode.entry);stack=this._stack=mapIteratorFrame(subNode,stack)}continue}stack=this._stack=this._stack.__prev}return iteratorDone()};var EMPTY_MAP,MAX_ARRAY_MAP_SIZE=SIZE/4,MAX_BITMAP_INDEXED_SIZE=SIZE/2,MIN_HASH_ARRAY_MAP_SIZE=SIZE/4;createClass(List,IndexedCollection),List.of=function(){return this(arguments)},List.prototype.toString=function(){return this.__toString("List [","]")},List.prototype.get=function(index,notSetValue){if((index=wrapIndex(this,index))>=0&&index<this.size){index+=this._origin;var node=listNodeFor(this,index);return node&&node.array[index&MASK]}return notSetValue},List.prototype.set=function(index,value){return updateList(this,index,value)},List.prototype.remove=function(index){return this.has(index)?0===index?this.shift():index===this.size-1?this.pop():this.splice(index,1):this},List.prototype.insert=function(index,value){return this.splice(index,0,value)},List.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=SHIFT,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):emptyList()},List.prototype.push=function(){var values=arguments,oldSize=this.size;return this.withMutations(function(list){setListBounds(list,0,oldSize+values.length);for(var ii=0;ii<values.length;ii++)list.set(oldSize+ii,values[ii])})},List.prototype.pop=function(){return setListBounds(this,0,-1)},List.prototype.unshift=function(){var values=arguments;return this.withMutations(function(list){setListBounds(list,-values.length);for(var ii=0;ii<values.length;ii++)list.set(ii,values[ii])})},List.prototype.shift=function(){return setListBounds(this,1)},List.prototype.merge=function(){return mergeIntoListWith(this,void 0,arguments)},List.prototype.mergeWith=function(merger){return mergeIntoListWith(this,merger,SLICE$0.call(arguments,1))},List.prototype.mergeDeep=function(){return mergeIntoListWith(this,deepMerger,arguments)},List.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,deepMergerWith(merger),iters)},List.prototype.setSize=function(size){return setListBounds(this,0,size)},List.prototype.slice=function(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:setListBounds(this,resolveBegin(begin,size),resolveEnd(end,size))},List.prototype.__iterator=function(type,reverse){var index=0,values=iterateList(this,reverse);return new Iterator(function(){var value=values();return value===DONE?iteratorDone():iteratorValue(type,index++,value)})},List.prototype.__iterate=function(fn,reverse){for(var value,index=0,values=iterateList(this,reverse);(value=values())!==DONE&&!1!==fn(value,index++,this););return index},List.prototype.__ensureOwner=function(ownerID){return ownerID===this.__ownerID?this:ownerID?makeList(this._origin,this._capacity,this._level,this._root,this._tail,ownerID,this.__hash):(this.__ownerID=ownerID,this)},List.isList=isList;var IS_LIST_SENTINEL="@@__IMMUTABLE_LIST__@@",ListPrototype=List.prototype;ListPrototype[IS_LIST_SENTINEL]=!0,ListPrototype["delete"]=ListPrototype.remove,ListPrototype.setIn=MapPrototype.setIn,ListPrototype.deleteIn=ListPrototype.removeIn=MapPrototype.removeIn,ListPrototype.update=MapPrototype.update,ListPrototype.updateIn=MapPrototype.updateIn,ListPrototype.mergeIn=MapPrototype.mergeIn,ListPrototype.mergeDeepIn=MapPrototype.mergeDeepIn,ListPrototype.withMutations=MapPrototype.withMutations,ListPrototype.asMutable=MapPrototype.asMutable,ListPrototype.asImmutable=MapPrototype.asImmutable,ListPrototype.wasAltered=MapPrototype.wasAltered,VNode.prototype.removeBefore=function(ownerID,level,index){if(index===level?1<<level:0===this.array.length)return this;var originIndex=index>>>level&MASK;if(originIndex>=this.array.length)return new VNode([],ownerID);var newChild,removingFirst=0===originIndex;if(level>0){var oldChild=this.array[originIndex];if((newChild=oldChild&&oldChild.removeBefore(ownerID,level-SHIFT,index))===oldChild&&removingFirst)return this}if(removingFirst&&!newChild)return this;var editable=editableVNode(this,ownerID);if(!removingFirst)for(var ii=0;ii<originIndex;ii++)editable.array[ii]=void 0;return newChild&&(editable.array[originIndex]=newChild),editable},VNode.prototype.removeAfter=function(ownerID,level,index){if(index===(level?1<<level:0)||0===this.array.length)return this;var sizeIndex=index-1>>>level&MASK;if(sizeIndex>=this.array.length)return this;var newChild;if(level>0){var oldChild=this.array[sizeIndex];if((newChild=oldChild&&oldChild.removeAfter(ownerID,level-SHIFT,index))===oldChild&&sizeIndex===this.array.length-1)return this}var editable=editableVNode(this,ownerID);return editable.array.splice(sizeIndex+1),newChild&&(editable.array[sizeIndex]=newChild),editable};var EMPTY_LIST,DONE={};createClass(OrderedMap,Map),OrderedMap.of=function(){return this(arguments)},OrderedMap.prototype.toString=function(){return this.__toString("OrderedMap {","}")},OrderedMap.prototype.get=function(k,notSetValue){var index=this._map.get(k);return void 0!==index?this._list.get(index)[1]:notSetValue},OrderedMap.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):emptyOrderedMap()},OrderedMap.prototype.set=function(k,v){return updateOrderedMap(this,k,v)},OrderedMap.prototype.remove=function(k){return updateOrderedMap(this,k,NOT_SET)},OrderedMap.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},OrderedMap.prototype.__iterate=function(fn,reverse){var this$0=this;return this._list.__iterate(function(entry){return entry&&fn(entry[1],entry[0],this$0)},reverse)},OrderedMap.prototype.__iterator=function(type,reverse){return this._list.fromEntrySeq().__iterator(type,reverse)},OrderedMap.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID)return this;var newMap=this._map.__ensureOwner(ownerID),newList=this._list.__ensureOwner(ownerID);return ownerID?makeOrderedMap(newMap,newList,ownerID,this.__hash):(this.__ownerID=ownerID,this._map=newMap,this._list=newList,this)},OrderedMap.isOrderedMap=isOrderedMap,OrderedMap.prototype[IS_ORDERED_SENTINEL]=!0,OrderedMap.prototype["delete"]=OrderedMap.prototype.remove;var EMPTY_ORDERED_MAP;createClass(ToKeyedSequence,KeyedSeq),ToKeyedSequence.prototype.get=function(key,notSetValue){return this._iter.get(key,notSetValue)},ToKeyedSequence.prototype.has=function(key){return this._iter.has(key)},ToKeyedSequence.prototype.valueSeq=function(){return this._iter.valueSeq()},ToKeyedSequence.prototype.reverse=function(){var this$0=this,reversedSequence=reverseFactory(this,!0);return this._useKeys||(reversedSequence.valueSeq=function(){return this$0._iter.toSeq().reverse()}),reversedSequence},ToKeyedSequence.prototype.map=function(mapper,context){var this$0=this,mappedSequence=mapFactory(this,mapper,context);return this._useKeys||(mappedSequence.valueSeq=function(){return this$0._iter.toSeq().map(mapper,context)}),mappedSequence},ToKeyedSequence.prototype.__iterate=function(fn,reverse){var ii,this$0=this;return this._iter.__iterate(this._useKeys?function(v,k){return fn(v,k,this$0)}:(ii=reverse?resolveSize(this):0,function(v){return fn(v,reverse?--ii:ii++,this$0)}),reverse)},ToKeyedSequence.prototype.__iterator=function(type,reverse){if(this._useKeys)return this._iter.__iterator(type,reverse);var iterator=this._iter.__iterator(ITERATE_VALUES,reverse),ii=reverse?resolveSize(this):0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,reverse?--ii:ii++,step.value,step)})},ToKeyedSequence.prototype[IS_ORDERED_SENTINEL]=!0,createClass(ToIndexedSequence,IndexedSeq),ToIndexedSequence.prototype.includes=function(value){return this._iter.includes(value)},ToIndexedSequence.prototype.__iterate=function(fn,reverse){var this$0=this,iterations=0;return this._iter.__iterate(function(v){return fn(v,iterations++,this$0)},reverse)},ToIndexedSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse),iterations=0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value,step)})},createClass(ToSetSequence,SetSeq),ToSetSequence.prototype.has=function(key){return this._iter.includes(key)},ToSetSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(v){return fn(v,v,this$0)},reverse)},ToSetSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,step.value,step.value,step)})},createClass(FromEntriesSequence,KeyedSeq),FromEntriesSequence.prototype.entrySeq=function(){return this._iter.toSeq()},FromEntriesSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(entry){if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return fn(indexedIterable?entry.get(1):entry[1],indexedIterable?entry.get(0):entry[0],this$0)}},reverse)},FromEntriesSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator(function(){for(;;){var step=iterator.next();if(step.done)return step;var entry=step.value;if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return iteratorValue(type,indexedIterable?entry.get(0):entry[0],indexedIterable?entry.get(1):entry[1],step)}}})},ToIndexedSequence.prototype.cacheResult=ToKeyedSequence.prototype.cacheResult=ToSetSequence.prototype.cacheResult=FromEntriesSequence.prototype.cacheResult=cacheResultThrough,createClass(Record,KeyedCollection),Record.prototype.toString=function(){return this.__toString(recordName(this)+" {","}")},Record.prototype.has=function(k){return this._defaultValues.hasOwnProperty(k)},Record.prototype.get=function(k,notSetValue){if(!this.has(k))return notSetValue;var defaultVal=this._defaultValues[k];return this._map?this._map.get(k,defaultVal):defaultVal},Record.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var RecordType=this.constructor;return RecordType._empty||(RecordType._empty=makeRecord(this,emptyMap()))},Record.prototype.set=function(k,v){if(!this.has(k))throw new Error('Cannot set unknown key "'+k+'" on '+recordName(this));if(this._map&&!this._map.has(k)){if(v===this._defaultValues[k])return this}var newMap=this._map&&this._map.set(k,v);return this.__ownerID||newMap===this._map?this:makeRecord(this,newMap)},Record.prototype.remove=function(k){if(!this.has(k))return this;var newMap=this._map&&this._map.remove(k);return this.__ownerID||newMap===this._map?this:makeRecord(this,newMap)},Record.prototype.wasAltered=function(){return this._map.wasAltered()},Record.prototype.__iterator=function(type,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k)}).__iterator(type,reverse)},Record.prototype.__iterate=function(fn,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k)}).__iterate(fn,reverse)},Record.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID)return this;var newMap=this._map&&this._map.__ensureOwner(ownerID);return ownerID?makeRecord(this,newMap,ownerID):(this.__ownerID=ownerID,this._map=newMap,this)};var RecordPrototype=Record.prototype;RecordPrototype["delete"]=RecordPrototype.remove,RecordPrototype.deleteIn=RecordPrototype.removeIn=MapPrototype.removeIn,RecordPrototype.merge=MapPrototype.merge,RecordPrototype.mergeWith=MapPrototype.mergeWith,RecordPrototype.mergeIn=MapPrototype.mergeIn,RecordPrototype.mergeDeep=MapPrototype.mergeDeep,RecordPrototype.mergeDeepWith=MapPrototype.mergeDeepWith,RecordPrototype.mergeDeepIn=MapPrototype.mergeDeepIn,RecordPrototype.setIn=MapPrototype.setIn,RecordPrototype.update=MapPrototype.update,RecordPrototype.updateIn=MapPrototype.updateIn,RecordPrototype.withMutations=MapPrototype.withMutations,RecordPrototype.asMutable=MapPrototype.asMutable,RecordPrototype.asImmutable=MapPrototype.asImmutable,createClass(Set,SetCollection),Set.of=function(){return this(arguments)},Set.fromKeys=function(value){return this(KeyedIterable(value).keySeq())},Set.prototype.toString=function(){return this.__toString("Set {","}")},Set.prototype.has=function(value){return this._map.has(value)},Set.prototype.add=function(value){return updateSet(this,this._map.set(value,!0))},Set.prototype.remove=function(value){return updateSet(this,this._map.remove(value))},Set.prototype.clear=function(){return updateSet(this,this._map.clear())},Set.prototype.union=function(){var iters=SLICE$0.call(arguments,0);return iters=iters.filter(function(x){return 0!==x.size}),0===iters.length?this:0!==this.size||this.__ownerID||1!==iters.length?this.withMutations(function(set){for(var ii=0;ii<iters.length;ii++)SetIterable(iters[ii]).forEach(function(value){return set.add(value)})}):this.constructor(iters[0])},Set.prototype.intersect=function(){var iters=SLICE$0.call(arguments,0);if(0===iters.length)return this;iters=iters.map(function(iter){return SetIterable(iter)});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){iters.every(function(iter){return iter.includes(value)})||set.remove(value)})})},Set.prototype.subtract=function(){var iters=SLICE$0.call(arguments,0);if(0===iters.length)return this;iters=iters.map(function(iter){return SetIterable(iter)});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){iters.some(function(iter){return iter.includes(value)})&&set.remove(value)})})},Set.prototype.merge=function(){return this.union.apply(this,arguments)},Set.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return this.union.apply(this,iters)},Set.prototype.sort=function(comparator){return OrderedSet(sortFactory(this,comparator))},Set.prototype.sortBy=function(mapper,comparator){return OrderedSet(sortFactory(this,comparator,mapper))},Set.prototype.wasAltered=function(){return this._map.wasAltered()},Set.prototype.__iterate=function(fn,reverse){var this$0=this;return this._map.__iterate(function(_,k){return fn(k,k,this$0)},reverse)},Set.prototype.__iterator=function(type,reverse){return this._map.map(function(_,k){return k}).__iterator(type,reverse)},Set.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID)return this;var newMap=this._map.__ensureOwner(ownerID);return ownerID?this.__make(newMap,ownerID):(this.__ownerID=ownerID,this._map=newMap,this)},Set.isSet=isSet;var IS_SET_SENTINEL="@@__IMMUTABLE_SET__@@",SetPrototype=Set.prototype;SetPrototype[IS_SET_SENTINEL]=!0,SetPrototype["delete"]=SetPrototype.remove,SetPrototype.mergeDeep=SetPrototype.merge,SetPrototype.mergeDeepWith=SetPrototype.mergeWith,SetPrototype.withMutations=MapPrototype.withMutations,SetPrototype.asMutable=MapPrototype.asMutable,SetPrototype.asImmutable=MapPrototype.asImmutable,SetPrototype.__empty=emptySet,SetPrototype.__make=makeSet;var EMPTY_SET;createClass(OrderedSet,Set),OrderedSet.of=function(){return this(arguments)},OrderedSet.fromKeys=function(value){return this(KeyedIterable(value).keySeq())},OrderedSet.prototype.toString=function(){return this.__toString("OrderedSet {","}")},OrderedSet.isOrderedSet=isOrderedSet;var OrderedSetPrototype=OrderedSet.prototype;OrderedSetPrototype[IS_ORDERED_SENTINEL]=!0,OrderedSetPrototype.__empty=emptyOrderedSet,OrderedSetPrototype.__make=makeOrderedSet;var EMPTY_ORDERED_SET;createClass(Stack,IndexedCollection),Stack.of=function(){return this(arguments)},Stack.prototype.toString=function(){return this.__toString("Stack [","]")},Stack.prototype.get=function(index,notSetValue){var head=this._head;for(index=wrapIndex(this,index);head&&index--;)head=head.next;return head?head.value:notSetValue},Stack.prototype.peek=function(){return this._head&&this._head.value},Stack.prototype.push=function(){if(0===arguments.length)return this;for(var newSize=this.size+arguments.length,head=this._head,ii=arguments.length-1;ii>=0;ii--)head={"value":arguments[ii],"next":head};return this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.pushAll=function(iter){if(iter=IndexedIterable(iter),0===iter.size)return this;assertNotInfinite(iter.size);var newSize=this.size,head=this._head;return iter.reverse().forEach(function(value){newSize++,head={"value":value,"next":head}}),this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.pop=function(){return this.slice(1)},Stack.prototype.unshift=function(){return this.push.apply(this,arguments)},Stack.prototype.unshiftAll=function(iter){return this.pushAll(iter)},Stack.prototype.shift=function(){return this.pop.apply(this,arguments)},Stack.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):emptyStack()},Stack.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size))return this;var resolvedBegin=resolveBegin(begin,this.size);if(resolveEnd(end,this.size)!==this.size)return IndexedCollection.prototype.slice.call(this,begin,end);for(var newSize=this.size-resolvedBegin,head=this._head;resolvedBegin--;)head=head.next;return this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.__ensureOwner=function(ownerID){return ownerID===this.__ownerID?this:ownerID?makeStack(this.size,this._head,ownerID,this.__hash):(this.__ownerID=ownerID,this.__altered=!1,this)},Stack.prototype.__iterate=function(fn,reverse){if(reverse)return this.reverse().__iterate(fn);for(var iterations=0,node=this._head;node&&!1!==fn(node.value,iterations++,this);)node=node.next;return iterations},Stack.prototype.__iterator=function(type,reverse){if(reverse)return this.reverse().__iterator(type);var iterations=0,node=this._head;return new Iterator(function(){if(node){var value=node.value;return node=node.next,iteratorValue(type,iterations++,value)}return iteratorDone()})},Stack.isStack=isStack;var IS_STACK_SENTINEL="@@__IMMUTABLE_STACK__@@",StackPrototype=Stack.prototype;StackPrototype[IS_STACK_SENTINEL]=!0,StackPrototype.withMutations=MapPrototype.withMutations,StackPrototype.asMutable=MapPrototype.asMutable,StackPrototype.asImmutable=MapPrototype.asImmutable,StackPrototype.wasAltered=MapPrototype.wasAltered;var EMPTY_STACK;Iterable.Iterator=Iterator,mixin(Iterable,{"toArray":function(){assertNotInfinite(this.size);var array=new Array(this.size||0);return this.valueSeq().__iterate(function(v,i){array[i]=v}),array},"toIndexedSeq":function(){return new ToIndexedSequence(this)},"toJS":function(){return this.toSeq().map(function(value){return value&&"function"==typeof value.toJS?value.toJS():value}).__toJS()},"toJSON":function(){return this.toSeq().map(function(value){return value&&"function"==typeof value.toJSON?value.toJSON():value}).__toJS()},"toKeyedSeq":function(){return new ToKeyedSequence(this,!0)},"toMap":function(){return Map(this.toKeyedSeq())},"toObject":function(){assertNotInfinite(this.size);var object={};return this.__iterate(function(v,k){object[k]=v}),object},"toOrderedMap":function(){return OrderedMap(this.toKeyedSeq())},"toOrderedSet":function(){return OrderedSet(isKeyed(this)?this.valueSeq():this)},"toSet":function(){return Set(isKeyed(this)?this.valueSeq():this)},"toSetSeq":function(){return new ToSetSequence(this)},"toSeq":function(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},"toStack":function(){return Stack(isKeyed(this)?this.valueSeq():this)},"toList":function(){return List(isKeyed(this)?this.valueSeq():this)},"toString":function(){return"[Iterable]"},"__toString":function(head,tail){return 0===this.size?head+tail:head+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+tail},"concat":function(){return reify(this,concatFactory(this,SLICE$0.call(arguments,0)))},"includes":function(searchValue){return this.some(function(value){return is(value,searchValue)})},"entries":function(){return this.__iterator(ITERATE_ENTRIES)},"every":function(predicate,context){assertNotInfinite(this.size);var returnValue=!0;return this.__iterate(function(v,k,c){if(!predicate.call(context,v,k,c))return returnValue=!1,!1}),returnValue},"filter":function(predicate,context){return reify(this,filterFactory(this,predicate,context,!0))},"find":function(predicate,context,notSetValue){var entry=this.findEntry(predicate,context);return entry?entry[1]:notSetValue},"forEach":function(sideEffect,context){return assertNotInfinite(this.size),this.__iterate(context?sideEffect.bind(context):sideEffect)},"join":function(separator){assertNotInfinite(this.size),separator=void 0!==separator?""+separator:",";var joined="",isFirst=!0;return this.__iterate(function(v){isFirst?isFirst=!1:joined+=separator,joined+=null!==v&&void 0!==v?v.toString():""}),joined},"keys":function(){return this.__iterator(ITERATE_KEYS)},"map":function(mapper,context){return reify(this,mapFactory(this,mapper,context))},"reduce":function(reducer,initialReduction,context){assertNotInfinite(this.size);var reduction,useFirst;return arguments.length<2?useFirst=!0:reduction=initialReduction,this.__iterate(function(v,k,c){useFirst?(useFirst=!1,reduction=v):reduction=reducer.call(context,reduction,v,k,c)}),reduction},"reduceRight":function(reducer,initialReduction,context){var reversed=this.toKeyedSeq().reverse();return reversed.reduce.apply(reversed,arguments)},"reverse":function(){return reify(this,reverseFactory(this,!0))},"slice":function(begin,end){return reify(this,sliceFactory(this,begin,end,!0))},"some":function(predicate,context){return!this.every(not(predicate),context)},"sort":function(comparator){return reify(this,sortFactory(this,comparator))},"values":function(){return this.__iterator(ITERATE_VALUES)},"butLast":function(){return this.slice(0,-1)},"isEmpty":function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},"count":function(predicate,context){return ensureSize(predicate?this.toSeq().filter(predicate,context):this)},"countBy":function(grouper,context){return countByFactory(this,grouper,context)},"equals":function(other){return deepEqual(this,other)},"entrySeq":function(){var iterable=this;if(iterable._cache)return new ArraySeq(iterable._cache);var entriesSequence=iterable.toSeq().map(entryMapper).toIndexedSeq();return entriesSequence.fromEntrySeq=function(){return iterable.toSeq()},entriesSequence},"filterNot":function(predicate,context){return this.filter(not(predicate),context)},"findEntry":function(predicate,context,notSetValue){var found=notSetValue;return this.__iterate(function(v,k,c){if(predicate.call(context,v,k,c))return found=[k,v],!1}),found},"findKey":function(predicate,context){var entry=this.findEntry(predicate,context);return entry&&entry[0]},"findLast":function(predicate,context,notSetValue){return this.toKeyedSeq().reverse().find(predicate,context,notSetValue)},"findLastEntry":function(predicate,context,notSetValue){return this.toKeyedSeq().reverse().findEntry(predicate,context,notSetValue)},"findLastKey":function(predicate,context){return this.toKeyedSeq().reverse().findKey(predicate,context)},"first":function(){return this.find(returnTrue)},"flatMap":function(mapper,context){return reify(this,flatMapFactory(this,mapper,context))},"flatten":function(depth){return reify(this,flattenFactory(this,depth,!0))},"fromEntrySeq":function(){return new FromEntriesSequence(this)},"get":function(searchKey,notSetValue){return this.find(function(_,key){return is(key,searchKey)},void 0,notSetValue)},"getIn":function(searchKeyPath,notSetValue){for(var step,nested=this,iter=forceIterator(searchKeyPath);!(step=iter.next()).done;){var key=step.value;if((nested=nested&&nested.get?nested.get(key,NOT_SET):NOT_SET)===NOT_SET)return notSetValue}return nested},"groupBy":function(grouper,context){return groupByFactory(this,grouper,context)},"has":function(searchKey){return this.get(searchKey,NOT_SET)!==NOT_SET},"hasIn":function(searchKeyPath){return this.getIn(searchKeyPath,NOT_SET)!==NOT_SET},"isSubset":function(iter){return iter="function"==typeof iter.includes?iter:Iterable(iter),this.every(function(value){return iter.includes(value)})},"isSuperset":function(iter){return iter="function"==typeof iter.isSubset?iter:Iterable(iter),iter.isSubset(this)},"keyOf":function(searchValue){return this.findKey(function(value){return is(value,searchValue)})},"keySeq":function(){return this.toSeq().map(keyMapper).toIndexedSeq()},"last":function(){return this.toSeq().reverse().first()},"lastKeyOf":function(searchValue){return this.toKeyedSeq().reverse().keyOf(searchValue)},"max":function(comparator){return maxFactory(this,comparator)},"maxBy":function(mapper,comparator){return maxFactory(this,comparator,mapper)},"min":function(comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator)},"minBy":function(mapper,comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator,mapper)},"rest":function(){return this.slice(1)},"skip":function(amount){return this.slice(Math.max(0,amount))},"skipLast":function(amount){return reify(this,this.toSeq().reverse().skip(amount).reverse())},"skipWhile":function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,!0))},"skipUntil":function(predicate,context){return this.skipWhile(not(predicate),context)},"sortBy":function(mapper,comparator){return reify(this,sortFactory(this,comparator,mapper))},"take":function(amount){return this.slice(0,Math.max(0,amount))},"takeLast":function(amount){return reify(this,this.toSeq().reverse().take(amount).reverse())},"takeWhile":function(predicate,context){return reify(this,takeWhileFactory(this,predicate,context))},"takeUntil":function(predicate,context){return this.takeWhile(not(predicate),context)},"valueSeq":function(){return this.toIndexedSeq()},"hashCode":function(){return this.__hash||(this.__hash=hashIterable(this))}});var IterablePrototype=Iterable.prototype;IterablePrototype[IS_ITERABLE_SENTINEL]=!0,IterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.values,IterablePrototype.__toJS=IterablePrototype.toArray,IterablePrototype.__toStringMapper=quoteString,IterablePrototype.inspect=IterablePrototype.toSource=function(){return this.toString()},IterablePrototype.chain=IterablePrototype.flatMap,IterablePrototype.contains=IterablePrototype.includes,mixin(KeyedIterable,{"flip":function(){return reify(this,flipFactory(this))},"mapEntries":function(mapper,context){var this$0=this,iterations=0;return reify(this,this.toSeq().map(function(v,k){return mapper.call(context,[k,v],iterations++,this$0)}).fromEntrySeq())},"mapKeys":function(mapper,context){var this$0=this;return reify(this,this.toSeq().flip().map(function(k,v){return mapper.call(context,k,v,this$0)}).flip())}});var KeyedIterablePrototype=KeyedIterable.prototype;return KeyedIterablePrototype[IS_KEYED_SENTINEL]=!0,KeyedIterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.entries,KeyedIterablePrototype.__toJS=IterablePrototype.toObject,KeyedIterablePrototype.__toStringMapper=function(v,k){return JSON.stringify(k)+": "+quoteString(v)},mixin(IndexedIterable,{"toKeyedSeq":function(){return new ToKeyedSequence(this,!1)},"filter":function(predicate,context){return reify(this,filterFactory(this,predicate,context,!1))},"findIndex":function(predicate,context){var entry=this.findEntry(predicate,context);return entry?entry[0]:-1},"indexOf":function(searchValue){var key=this.keyOf(searchValue);return void 0===key?-1:key},"lastIndexOf":function(searchValue){var key=this.lastKeyOf(searchValue);return void 0===key?-1:key},"reverse":function(){return reify(this,reverseFactory(this,!1))},"slice":function(begin,end){return reify(this,sliceFactory(this,begin,end,!1))},"splice":function(index,removeNum){var numArgs=arguments.length;if(removeNum=Math.max(0|removeNum,0),0===numArgs||2===numArgs&&!removeNum)return this;index=resolveBegin(index,index<0?this.count():this.size);var spliced=this.slice(0,index);return reify(this,1===numArgs?spliced:spliced.concat(arrCopy(arguments,2),this.slice(index+removeNum)))},"findLastIndex":function(predicate,context){var entry=this.findLastEntry(predicate,context);return entry?entry[0]:-1},"first":function(){return this.get(0)},"flatten":function(depth){return reify(this,flattenFactory(this,depth,!1))},"get":function(index,notSetValue){return index=wrapIndex(this,index),index<0||this.size===1/0||void 0!==this.size&&index>this.size?notSetValue:this.find(function(_,key){return key===index},void 0,notSetValue)},"has":function(index){return(index=wrapIndex(this,index))>=0&&(void 0!==this.size?this.size===1/0||index<this.size:-1!==this.indexOf(index))},"interpose":function(separator){return reify(this,interposeFactory(this,separator))},"interleave":function(){var iterables=[this].concat(arrCopy(arguments)),zipped=zipWithFactory(this.toSeq(),IndexedSeq.of,iterables),interleaved=zipped.flatten(!0);return zipped.size&&(interleaved.size=zipped.size*iterables.length),reify(this,interleaved)},"keySeq":function(){return Range(0,this.size)},"last":function(){return this.get(-1)},"skipWhile":function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,!1))},"zip":function(){return reify(this,zipWithFactory(this,defaultZipper,[this].concat(arrCopy(arguments))))},"zipWith":function(zipper){var iterables=arrCopy(arguments);return iterables[0]=this,reify(this,zipWithFactory(this,zipper,iterables))}}),IndexedIterable.prototype[IS_INDEXED_SENTINEL]=!0,IndexedIterable.prototype[IS_ORDERED_SENTINEL]=!0,mixin(SetIterable,{"get":function(value,notSetValue){return this.has(value)?value:notSetValue},"includes":function(value){return this.has(value)},"keySeq":function(){return this.valueSeq()}}),SetIterable.prototype.has=IterablePrototype.includes,SetIterable.prototype.contains=SetIterable.prototype.includes,mixin(KeyedSeq,KeyedIterable.prototype),mixin(IndexedSeq,IndexedIterable.prototype),mixin(SetSeq,SetIterable.prototype),mixin(KeyedCollection,KeyedIterable.prototype),mixin(IndexedCollection,IndexedIterable.prototype),mixin(SetCollection,SetIterable.prototype),{"Iterable":Iterable,"Seq":Seq,"Collection":Collection,"Map":Map,"OrderedMap":OrderedMap,"List":List,"Stack":Stack,"Set":Set,"OrderedSet":OrderedSet,"Record":Record,"Range":Range,"Repeat":Repeat,"is":is,"fromJS":fromJS}})},"Bev/":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.getHistoryContactsAjax=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator),_utils=(exports.getHistoryContactsAjax=function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(imcore,curPage){var data,newJson;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.gethistorycontactlist,"data":{"curPage":curPage}});case 2:if(data=_context.sent,!data.flag){_context.next=12;break}return newJson={},newJson.curMonthContacts=[],newJson.earlierContacts=[],data.data.curMonthContacts&&data.data.curMonthContacts.forEach(function(v,i){newJson.curMonthContacts.push(Object.assign({},v,{"oppositeMainUrl":v.homePage,"oppositeUserCompany":v.company,"oppositeUserName":v.name,"oppositeUserPhoto":v.photo,"oppositeUserTitle":v.title,"oppositeUserSexName":v.sex,"oppositeUserEdulevelName":v.edulevel,"oppositeWorkAge":v.workage,"oppositeUserDqName":v.dq}))}),data.data.earlierContacts&&data.data.earlierContacts.forEach(function(v,i){newJson.earlierContacts.push(Object.assign({},v,{"oppositeMainUrl":v.homePage,"oppositeUserCompany":v.company,"oppositeUserName":v.name,"oppositeUserPhoto":v.photo,"oppositeUserTitle":v.title,"oppositeUserSexName":v.sex,"oppositeUserEdulevelName":v.edulevel,"oppositeWorkAge":v.workage,"oppositeUserDqName":v.dq}))}),_context.abrupt("return",newJson);case 12:throw(0,_utils2.hKilledAccountAlert)(imcore,data),new Error(data.msg);case 14:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}(),__webpack_require__("c3kU")),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_utils2=__webpack_require__("PQSX")},"BoXN":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_17.5442d823.png"},"BxXn":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.tooldversion=LT.Env.cRoot+"message/#c:1:/message/getcmsg/",exports.mycontacts="https://im.liepin.com/mycontacts.json",exports.simpleInfos=LT.Env.cRoot+"user/simple-infos.json",exports.getsysmsglist4im=LT.Env.cRoot+"message/getsysmsglist4im.json",exports.delsysmessagebyid=LT.Env.cRoot+"message/delsysmessagebyid.json",exports.readedmessagebyid=LT.Env.cRoot+"message/readedmessagebyid.json",exports.snsList=LT.Env.cRoot+"connection/count.json",exports.chart="https://im.liepin.com/chart.json",exports.readed="https://im.liepin.com/readed.json",exports.getonecontact=LT.Env.cRoot+"msg/getonecontact.json",exports.delmycontact="https://im.liepin.com/delmycontact.json",exports.saveChatSetting=LT.Env.cRoot+"msg/save-chat-setting.json",exports.getHiList=LT.Env.cRoot+"msg/get-hi-list.json",exports.canAssessH=LT.Env.cRoot+"msg/can-assess-h.json",exports.assessH=LT.Env.cRoot+"msg/assess-h.json",exports.canSendExtType=LT.Env.cRoot+"msg/canSendExtType.json",exports.recordSendJobCard=LT.Env.cRoot+"msg/recordSendJobCard.json",exports.infoBetweenUsers=LT.Env.cRoot+"user/info-between-users.json",exports.addCBl=LT.Env.cRoot+"user/add-c-bl.json",exports.removeCBl=LT.Env.cRoot+"user/remove-c-bl.json",exports.aadduserhblacklist=LT.Env.cRoot+"user/adduserhblacklist.json",exports.removeuserhblacklist=LT.Env.cRoot+"user/removeuserhblacklist.json",exports.reportChat=LT.Env.cRoot+"msg/report-chat.json",exports.jobstatus=LT.Env.cRoot+"job/feedback/recommandhjob/status.json",exports.jobrefuse=LT.Env.cRoot+"job/feedback/refuse.json",exports.unreadcount="https://im.liepin.com/unreadcount.json"},"C0UE":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.urls=exports.tlogs=exports.tabs=void 0;var _tabs=__webpack_require__("8a8u");Object.defineProperty(exports,"tabs",{"enumerable":!0,"get":function(){return _tabs.tabs}});var _tlogs2=__webpack_require__("VIcT"),_tlogs=_interopRequireWildcard(_tlogs2),_urls2=__webpack_require__("GbQ2"),_urls=_interopRequireWildcard(_urls2);exports.tlogs=_tlogs,exports.urls=_urls},"CJQX":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function getConfig(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"c").toLowerCase()){case"c":return cConfig;case"b":return bConfig;case"h":return hConfig}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=getConfig;var _c=__webpack_require__("Oht4"),cConfig=_interopRequireWildcard(_c),_b=__webpack_require__("C0UE"),bConfig=_interopRequireWildcard(_b),_h=__webpack_require__("hk1R"),hConfig=_interopRequireWildcard(_h)},"DEeB":function(module,exports,__webpack_require__){"use strict";function warning(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=warning},"DKOL":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_constants=__webpack_require__("E9QE"),_send=__webpack_require__("6svF"),_constants2=__webpack_require__("acFS"),_addTlog=__webpack_require__("rF9R"),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames);__webpack_require__("cfHB");var emotionArr=[];for(var i in _constants2.Emotions)emotionArr.push({"key":i,"url":_constants2.Emotions[i]});var ChatForm=function(_Component){function ChatForm(props){_classCallCheck(this,ChatForm);var _this=_possibleConstructorReturn(this,(ChatForm.__proto__||Object.getPrototypeOf(ChatForm)).call(this,props));return _this.state={"emojiActive":!1,"historyActive":!1,"entrustActive":!1,"recommendActive":!1,"inputValue":"","messageVisible":!1,"clipboardImg":"","placeholderVisible":!0,"fileRefresh":!0},_this.config=(0,_config2["default"])(props.imcore.env),_this.textarea=null,_this.emojiEntrance=null,_this.fakeDom=null,_this.iconSendPicDom=null,_this.sendBtnDom=null,_this.userSettingDom=null,_this.blob=null,_this.ie9=navigator.userAgent.indexOf("MSIE 9.0")>0,_this.sending=!1,_this}return _inherits(ChatForm,_Component),_createClass(ChatForm,[{"key":"componentDidMount","value":function(){var _this2=this,that=this;this.props.actions,this.refs.sendBtn;$(document).on("click.emoji",function(e){return e.target!==that.sendBtnDom&&0===$(that.sendBtnDom).has(e.target).length&&e.target!==that.userSettingDom&&0===$(that.userSettingDom).has(e.target).length&&_this2.setState({"messageVisible":!1}),e.target!==that.userSettingDom&&(e.target!==that.emojiEntrance&&void that.disactiveEmoji())}),this.textarea.style.height="40px",this.textarea.focus(),$(document).on("keydown.clipboardImg",function(e){_this2.state.clipboardImg&&_this2.handleKeyDown(e)})}},{"key":"componentWillUnmount","value":function(){$(document).off("click.emoji"),$(document).off("keydown.clipboardImg")}},{"key":"componentWillReceiveProps","value":function(nextProps){nextProps.sendMsg.pictureDom}},{"key":"openMessage","value":function(status){this.setState({"messageVisible":!status})}},{"key":"sendHandler","value":function(){var _this3=this,_props=this.props,imcore=_props.imcore,activeContact=_props.activeContact,actions=_props.actions,userInfo=imcore.userInfo,msg=void 0;if(this.state.clipboardImg)this.sending||(this.sending=!0,msg=new _send.ImgMsg,msg.set({"from":imcore.userInfo,"to":activeContact,"dataType":"img","data":{"file":{"data":this.blob,"url":this.state.clipboardImg,"filetype":"jpg"}}}),actions.sendMsg(imcore,msg),this.onClearClipboardImg(),setTimeout(function(){_this3.sending=!1},300));else{var value=this.state.inputValue.trim();value&&!this.sending&&(this.sending=!0,msg=new _send.TxtMsg,msg.set({"from":userInfo,"to":activeContact,"data":value}),"b"===imcore.env.toLowerCase()&&"3"===this.props.activeContact.oppositeImUserType&&(msg.msgBody.ext.extBody.isFromWorkMate=!0),this.textarea.value="",this.textarea.style.height="40px",this.setState({"inputValue":""}),this.props.setInputHeight(40),actions.sendMsg(imcore,msg),setTimeout(function(){_this3.sending=!1},100),this.setState({"placeholderVisible":!0}))}}},{"key":"handleChange","value":function(){var _this4=this;this.setState({"inputValue":this.textarea.value},function(){var inputHeight=$(_this4.fakeDom).height();_this4.textarea.style.height=inputHeight+"px",_this4.props.setInputHeight(inputHeight)})}},{"key":"handleKeyDown","value":function(e){if(!this.sending){this.ie9&&this.state.placeholderVisible&&this.setState({"placeholderVisible":!1});var dialog=this.props.dialog,keyDown=void 0;keyDown=dialog?13===e.keyCode&&!e.ctrlKey:13==e.keyCode&&e.ctrlKey,keyDown&&(this.sendHandler(),e.preventDefault())}}},{"key":"toggleEmoji","value":function(e){this.state.emojiActive?this.disactiveEmoji():(this.setState({"emojiActive":!0}),window.tlog=window.tlog||[],tlog.push(this.config.tlogs.OPEN_EMOJI)),e.nativeEvent.stopImmediatePropagation()}},{"key":"disactiveEmoji","value":function(){this.setState({"emojiActive":!1})}},{"key":"activeHistory","value":function(){this.setState({"historyActive":!0})}},{"key":"disactiveHistory","value":function(){this.setState({"historyActive":!1})}},{"key":"activeEntrust","value":function(){this.setState({"entrustActive":!0})}},{"key":"disactiveEntrust","value":function(){this.setState({"entrustActive":!1})}},{"key":"activeRecommend","value":function(){this.setState({"recommendActive":!0})}},{"key":"disactiveRecommend","value":function(){this.setState({"recommendActive":!1})}},{"key":"onIconSendPicClick","value":function(){var pictureDom=this.props.sendMsg.pictureDom;window.tlog=window.tlog||[],tlog.push(this.config.tlogs.SEND_IMAGE),pictureDom.click()}},{"key":"onImageFileChange","value":function(){var _props2=this.props,imcore=_props2.imcore,activeContact=_props2.activeContact,actions=_props2.actions,sendMsg=_props2.sendMsg;actions.checkImageFile(imcore,sendMsg.pictureDom,activeContact,function(){sendMsg.pictureDom.value=""})}},{"key":"selectEmotion","value":function(emotion){this.textarea&&(this.textarea.value+=emotion.key),this.ie9&&this.state.placeholderVisible&&this.setState({"placeholderVisible":!1}),this.handleChange(),this.textarea.focus()}},{"key":"handleClickEntrust","value":function(){var _props3=this.props,actions=_props3.actions,imcore=_props3.imcore,activeContact=_props3.activeContact;actions.cEntrustResume(imcore,activeContact.oppositeImId)}},{"key":"setMessage","value":function(status){var that=this,_props4=this.props,actions=_props4.actions,imcore=_props4.imcore,setting=_props4.setting;actions.settingSelect("dialog",status,setting,imcore,"",that.config.tlogs)}},{"key":"recommendJob","value":function(){Apps.Recommend.hjob(this.props.activeContact.usercEncodeId)}},{"key":"renderCustomBtn","value":function(){var _this5=this,_state=this.state,entrustActive=_state.entrustActive,recommendActive=_state.recommendActive;return"c"===this.props.imcore.env&&this.props.activeContact.oppositeUserKind==_constants.UserType.USER_TYPE_H?_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","className":"link-entrust","pushStr":this.config.tlogs.CLICK_ENTRUST_ICON,"onMouseEnter":function(){_this5.activeEntrust()},"onMouseLeave":function(){return _this5.disactiveEntrust()},"onClick":function(){return _this5.handleClickEntrust()}},_react2["default"].createElement("em",{"className":(0,_classnames2["default"])({"webim-icons16":!0,"icons16-arr-gray":!1===entrustActive,"icons16-arr-orange":!0===entrustActive})})," 委托简历"):"h"===this.props.imcore.env?_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","data-nick":"link-recommend","className":"link-recommend","pushStr":this.config.tlogs.CLICK_RECOMMEND_ICON,"onMouseEnter":function(){_this5.activeRecommend()},"onMouseLeave":function(){return _this5.disactiveRecommend()},"onClick":function(){return _this5.recommendJob()}},_react2["default"].createElement("em",{"className":(0,_classnames2["default"])({"webim-icons16":!0,"icons16-recommend-resume":!1===recommendActive,"icons16-recommend-orange":!0===recommendActive})})," 推荐职位"):null}},{"key":"onPaste","value":function(event){if(event.clipboardData||event.originalEvent){var clipboardData=event.clipboardData||event.originalEvent.clipboardData;if(clipboardData.items){var items=clipboardData.items,v=void 0;if(!items.length)return;for(var _i=0;_i<items.length;_i++)if(v=items[_i],-1!==v.type.indexOf("image")){var blob=v.getAsFile();if(0===blob.size)return;var url=window.URL.createObjectURL(blob);return this.setState({"clipboardImg":url}),void(this.blob=blob)}}}}},{"key":"onClearClipboardImg","value":function(){this.setState({"clipboardImg":""}),this.props.setInputHeight(40),this.textarea.value="",this.setState({"inputValue":""}),this.textarea.style.height="40px",this.blob=null}},{"key":"onLoadClipboardImg","value":function(){this.props.setInputHeight(this.refs.cbimg.height+5)}},{"key":"onTextareaBlur","value":function(){this.textarea.value||this.setState({"placeholderVisible":!0})}},{"key":"setTextareaFocus","value":function(){this.textarea.focus()}},{"key":"render","value":function(){var _this6=this,_props5=this.props,imcore=(_props5.activeContact,_props5.imcore),actions=_props5.actions,dialog=_props5.dialog,sendMsg=_props5.sendMsg,_state2=this.state,emojiActive=_state2.emojiActive,historyActive=_state2.historyActive,messageVisible=(_state2.inputData,_state2.messageVisible);return _react2["default"].createElement("div",{"className":"chat-form"},_react2["default"].createElement("div",{"className":"top-options clearfix"},sendMsg.fileRefresh&&_react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"upload-wrap":!0})},_react2["default"].createElement("input",{"id":"uploadImg","name":"file","type":"file","ref":function(dom){sendMsg.pictureDom=dom},"className":"file","onChange":function(){return _this6.onImageFileChange()}}),_react2["default"].createElement("input",{"id":"uploadShim","className":"hide"}),_react2["default"].createElement("a",{"href":"javascript:;","ref":function(dom){_this6.iconSendPicDom=dom},"onClick":function(){_this6.onIconSendPicClick()}},_react2["default"].createElement("em",{"className":"webim-icons16 icons16-picture"}))),_react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"emoji-wrap":!0,"emoji-wrap-ie9":this.ie9})},_react2["default"].createElement("em",{"onClick":function(e){return _this6.toggleEmoji(e)},"className":(0,_classnames2["default"])({"webim-icons16":!0,"icons16-smile":!1===emojiActive,"icons16-smile-orange":!0===emojiActive}),"ref":function(dom){_this6.emojiEntrance=dom}}),_react2["default"].createElement("ul",{"className":(0,_classnames2["default"])({"hide":!1===emojiActive})},emotionArr.map(function(emotion,index){return _react2["default"].createElement("li",{"key":index,"onClick":function(){return _this6.selectEmotion(emotion)}},_react2["default"].createElement("img",{"src":emotion.url,"alt":""}))}))),_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","className":"link-history","onClick":function(){return actions.showHistory(imcore)},"pushStr":this.config.tlogs.CLICK_HISTORY_ICON,"onMouseEnter":function(){_this6.activeHistory()},"onMouseLeave":function(){return _this6.disactiveHistory()}},_react2["default"].createElement("em",{"className":(0,_classnames2["default"])({"webim-icons16":!0,"icons16-history-gray":!1===historyActive,"icons16-history-orange":!0===historyActive})})," 历史消息"),this.renderCustomBtn()),_react2["default"].createElement("div",{"className":"fake-textarea","ref":function(dom){_this6.fakeDom=dom}},this.state.inputValue),_react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"clipboard-img-wrap":!0,"hide":""===this.state.clipboardImg})},_react2["default"].createElement("a",{"href":"javascript:;","className":"close-btn","onClick":function(){return _this6.onClearClipboardImg()}},"×"),_react2["default"].createElement("img",{"src":this.state.clipboardImg,"onLoad":function(){_this6.onLoadClipboardImg()},"ref":"cbimg"})),_react2["default"].createElement("div",{"className":"relative"},_react2["default"].createElement("textarea",{"maxLength":"800","className":(0,_classnames2["default"])({"textarea":!0,"hide":""!==this.state.clipboardImg}),"placeholder":"h"===imcore.env?"说点什么…":"说点什么…（为了您的个人隐私安全，请不要轻易向对方泄露您的联系方式）","onChange":function(e){return _this6.handleChange(e)},"onKeyDown":function(e){_this6.handleKeyDown(e)},"ref":function(input){_this6.textarea=input},"onBlur":function(){return _this6.onTextareaBlur()}}),this.ie9&&_react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"ie9-placeholder":!0,"hide":!this.state.placeholderVisible}),"onClick":function(){_this6.setTextareaFocus()}},"h"===imcore.env?"说点什么…":"说点什么…（为了您的个人隐私安全，请不要轻易向对方泄露您的联系方式）")),_react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"send-wrap":!0,"send-disabled":this.state.sending})},_react2["default"].createElement(_addTlog.Atlog,{"className":"btn-send","href":"javascript:;","pushStr":this.config.tlogs.CLICK_SEND_BTN,"onClick":function(){return _this6.sendHandler()}},"发送"),_react2["default"].createElement("span",{"ref":function(dom){_this6.sendBtnDom=dom},"onClick":function(){_this6.openMessage(messageVisible)}},_react2["default"].createElement("em",null)),_react2["default"].createElement("div",{"ref":function(dom){_this6.userSettingDom=dom},"className":(0,_classnames2["default"])("dialog-setting-box",{"hide":!this.state.messageVisible})},_react2["default"].createElement("ul",null,_react2["default"].createElement("li",{"onClick":function(){_this6.setMessage(!0)}},_react2["default"].createElement("em",{"className":(0,_classnames2["default"])("webim-icons16",{"icons16-radio":!dialog,"icons16-radio-checked":dialog})}),"按Enter发送消息"),_react2["default"].createElement("li",{"onClick":function(){_this6.setMessage(!1)}},_react2["default"].createElement("em",{"className":(0,_classnames2["default"])("webim-icons16",{"icons16-radio":dialog,"icons16-radio-checked":!dialog})}),"按Ctrl+Enter发送消息")))))}}]),ChatForm}(_react.Component),mapStateToProps=function(state){return{"activeContact":state.panel.activeContact,"setting":state.setting.setting,"dialog":state.setting.setting.dialog,"sendMsg":state.sendMsg}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.historyActions,_actions.messageActions,_actions.settingActions,_actions.userSettingActions),dispatch),"dispatch":dispatch}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(ChatForm)},"DT4M":function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function checkFileType(_ref){var file=_ref.file,fileInputId=_ref.fileInputId,fileType=_ref.fileType;if(!fileType){if(file||(file=WebIM.utils.getFileUrl(fileInputId)),!file)return!1;fileType=file.filetype}return-1!==AVAILABLE_TYPES.indexOf(fileType.toLowerCase())}function checkFileSize(_ref2){var file=_ref2.file,fileInputId=_ref2.fileInputId,fileSize=_ref2.fileSize;if(!fileSize){if(file||(file=WebIM.utils.getFileUrl(fileInputId)),!file)return!1;fileSize=file.data.size}return 10485760>fileSize}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.checkFileWH=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_regenerator);exports.checkFileWH=function(){var _ref3=_asyncToGenerator(_regenerator2["default"].mark(function _callee(_ref4){var newImage,file=_ref4.file,fileInputId=_ref4.fileInputId;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(file||(file=WebIM.utils.getFileUrl(fileInputId)),!window.URL||!window.URL.createObjectURL){_context.next=8;break}return _context.next=4,new Promise(function(resolve,reject){var image=new Image;image.onload=function(){resolve(image)},image.onerror=function(){reject(new Error("Could not load image at "+file.url))},image.src=file.url});case 4:return newImage=_context.sent,_context.abrupt("return",newImage.width<1e3&&newImage.height<800);case 8:return _context.abrupt("return",!0);case 9:case"end":return _context.stop()}},_callee,this)}));return function(_x){return _ref3.apply(this,arguments)}}();exports.checkFileType=checkFileType,exports.checkFileSize=checkFileSize;var AVAILABLE_TYPES=["jpg","jpeg","gif","png","bmp"]},"Dw0N":function(module,exports,__webpack_require__){"use strict";function format(top){var formatted=parseInt(top);return isNaN(formatted)&&(formatted=150),formatted}function initToast(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"加载中":_ref$text,time=_ref.time,top=_ref.top,_ref$timer=_ref.timer;return{"text":text,"time":time,"timer":void 0===_ref$timer?null:_ref$timer,"show":!0,"top":format(top)}}function toastReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1];switch(action.type){case _actions.ActionType.OPEN_TOAST:return Object.assign({},state,initToast(action.payload));case _actions.ActionType.CLOSE_TOAST:return Object.assign({},state,action.payload);default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.initialState=void 0,exports.toastReducer=toastReducer;var _actions=__webpack_require__("IPoy"),initialState=exports.initialState={"time":0,"text":"","show":!1,"timer":null,"top":150}},"E9QE":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.MAX_STORAGE_MSG_PER_USER=exports.HX_SEND_IMG_MSG_TIMEOUT=exports.HX_SEND_MSG_TIMEOUT=exports.HX_LOGIN_TIMEOUT=exports.FOCUS_TO_LOGIN_TIMEOUT=exports.MSG_DEAL_TIMEOUT=exports.MESSAGE_SOURCE=exports.getLocalStorageKey=exports.ErrorType=exports.UserType=exports.MsgEvent=void 0;var _LocalStorageKey=__webpack_require__("2SDu");Object.defineProperty(exports,"getLocalStorageKey",{"enumerable":!0,"get":function(){return _LocalStorageKey.getLocalStorageKey}});var _MsgEvent2=__webpack_require__("F3yC"),_MsgEvent=_interopRequireWildcard(_MsgEvent2),_UserType2=__webpack_require__("p7HJ"),_UserType=_interopRequireWildcard(_UserType2),_ErrorType2=__webpack_require__("q02L"),_ErrorType=_interopRequireWildcard(_ErrorType2);exports.MsgEvent=_MsgEvent,exports.UserType=_UserType,exports.ErrorType=_ErrorType;exports.MESSAGE_SOURCE=0,exports.MSG_DEAL_TIMEOUT=5e3,exports.FOCUS_TO_LOGIN_TIMEOUT=1e4,exports.HX_LOGIN_TIMEOUT=5e3,exports.HX_SEND_MSG_TIMEOUT=5e3,exports.HX_SEND_IMG_MSG_TIMEOUT=6e6,exports.MAX_STORAGE_MSG_PER_USER=20},"EDHF":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function RecommendJob(props){var message=props.message,ifISend=(props.scrollToBottom,props.imcore,props.ifISend),title=message.title,salary=message.salary,jobHref=message.jobHref,company=message.company,dqName=message.dqName,senderKind=message.senderKind,Tiletext="",jobTlog=void 0;return"0"===senderKind?(Tiletext="我感兴趣的职位",jobTlog="c:C000010112"):"1"===senderKind?(jobTlog="c:C000010490",Tiletext="邀请您应聘的职位",jobHref=jobHref+"?bs_data="+message.bsData):"2"===senderKind&&(jobTlog="c:C000010489",Tiletext="为您推荐的职位"),message.state===_enums.MsgState.INITIAL?_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("img",{"src":"../../../images/message/sending.gif"})):_react2["default"].createElement("div",{"className":"job-card content"},_react2["default"].createElement("h3",{"className":(0,_classnames2["default"])(ifISend?"":"hsend")},Tiletext),_react2["default"].createElement("a",{"className":"chat-job","onClick":function(){window.tlog=window.tlog||[],tlog.push(jobTlog)},"href":jobHref,"target":"_blank"},_react2["default"].createElement("dl",null,_react2["default"].createElement("dt",null,title,_react2["default"].createElement("em",{"className":"text-warning"}," [",salary,"]")),_react2["default"].createElement("dd",null,company),_react2["default"].createElement("dd",{"className":"clearfix"},_react2["default"].createElement("span",null,dqName),!ifISend&&"2"===senderKind&&_react2["default"].createElement(RefuseJob,props),_react2["default"].createElement("em",null,"查看职位详情")))))}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),getRefuseJobStatus=function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(imcore,jobId,cb){var data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.jobstatus,"type":"post","data":{"jobId":jobId}});case 3:return data=_context.sent,_context.abrupt("return",cb(data));case 7:_context.prev=7,_context.t0=_context["catch"](0),imcore.handleErr(_context.t0);case 10:case"end":return _context.stop()}},_callee,this,[[0,7]])}));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}(),refuseJob=function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(imcore,message,code,cb){var data;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.jobrefuse,"type":"post","data":{"job_id":message.jobId,"fb":code}});case 3:return data=_context2.sent,window.tlog=window.tlog||[],tlog.push("c:C000010488"),_context2.abrupt("return",cb(data));case 9:_context2.prev=9,_context2.t0=_context2["catch"](0),imcore.handleErr(_context2.t0);case 12:case"end":return _context2.stop()}},_callee2,this,[[0,9]])}));return function(_x4,_x5,_x6,_x7){return _ref2.apply(this,arguments)}}();exports["default"]=RecommendJob;var _react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_actions=__webpack_require__("IPoy"),_utils=__webpack_require__("c3kU"),_send=__webpack_require__("6svF"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_enums=__webpack_require__("O4JY"),_reactRedux=(__webpack_require__("2KeS"),__webpack_require__("RH2O")),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog);__webpack_require__("fy8N");var RefuseJob1=function(_Component){function RefuseJob1(props){_classCallCheck(this,RefuseJob1);var _this=_possibleConstructorReturn(this,(RefuseJob1.__proto__||Object.getPrototypeOf(RefuseJob1)).call(this,props));return _this.state={"refuseJobList":[{"code":0,"text":"对行业不感兴趣"},{"code":1,"text":"对职能不感兴趣"},{"code":2,"text":"工作地点与期望不符"},{"code":3,"text":"薪酬范围不理想"},{"code":4,"text":"工作内容不感兴趣"},{"code":5,"text":"职位级别不符合预期"},{"code":6,"text":"暂时不考虑换工作"}],"curCode":0,"dialog":{"refuseJobvisible":!1,"footer":!1,"title":!0,"position":"bottom","width":"100%"}},_this}return _inherits(RefuseJob1,_Component),_createClass(RefuseJob1,[{"key":"showRefuseJobDialog","value":function(e){e.preventDefault();var that=this,_that$props=that.props,imcore=_that$props.imcore,message=(_that$props.actions,_that$props.message);getRefuseJobStatus(imcore,message.jobId,function(data){data.flag?that.setState({"curCode":0,"dialog":{"refuseJobvisible":!0,"footer":!1,"title":"请选择您暂不考虑的理由","position":"bottom","width":"100%"}}):_Dialog2["default"].alert({"parent":"chat","width":300,"text":data.msg})})}},{"key":"closeRefuseJobDialog","value":function(status){var _props=this.props;_props.imcore,_props.actions;this.setState({"dialog":{"refuseJobvisible":!1,"footer":!1,"title":"请选择您暂不考虑的理由","position":"bottom","width":"100%"}})}},{"key":"setRefuseJob","value":function(code,reason){var _this2=this,_props2=this.props,imcore=_props2.imcore,message=(_props2.actions,_props2.message),activeContact=_props2.activeContact,dispatch=_props2.dispatch;refuseJob(imcore,message,code,function(data){if(data.flag){var userInfo=imcore.userInfo,msg=new _send.TxtMsg;msg.set({"from":userInfo,"to":activeContact,"data":"","extType":_enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK,"jobId":message.jobId,"jobKind":message.jobKind,"reason":reason,"title":message.title,"salary":message.salary,"jobHref":message.jobHref}),dispatch(_actions.messageActions.sendMsg(imcore,msg,{"success":function(){_this2.setState({"dialog":{"refuseJobvisible":!1}}),message.isHandler=!0,_actions.panelActions.panelUpdateMsg(imcore,message),dispatch(_actions.toastActions.openToast({"text":"操作成功！"}))}}))}else _this2.setState({"dialog":{"refuseJobvisible":!1}}),_Dialog2["default"].alert({"parent":"chat","width":300,"text":data.msg})})}},{"key":"dialogContent","value":function(){var _this3=this,_props3=this.props,_state=(_props3.imcore,_props3.actions,_props3.message,this.state),dialog=(_state.curCode,_state.dialog),refuseJobList=_state.refuseJobList,html=(_state.iconActive,void 0);return"bottom"===dialog.position?html=_react2["default"].createElement("div",{"className":"refusejob-dialog-box"},_react2["default"].createElement("p",null,refuseJobList.map(function(v,i){return _react2["default"].createElement("a",{"key":i,"onClick":function(){return _this3.setRefuseJob(v.code,v.text)},"href":"javascript:;"},v.text)}))):"center"===dialog.position&&(html=_react2["default"].createElement("p",{"className":"text-center"},"操作成功！")),html}},{"key":"componentDidMount","value":function(){this.props.scrollToBottom()}},{"key":"render","value":function(){var _this4=this,_props4=this.props,message=(_props4.imcore,_props4.actions,_props4.message),_state2=this.state,dialog=(_state2.curCode,_state2.dialog);return message.isHandler?_react2["default"].createElement("em",{"className":"no-thank"},"已拒绝"):_react2["default"].createElement("em",{"className":"no-thank active","onClick":function(e){_this4.showRefuseJobDialog(e)}},"暂不考虑",_react2["default"].createElement(_Dialog.ChatDialog,{"id":"refuseJob","visible":dialog.refuseJobvisible,"onClose":function(){_this4.closeRefuseJobDialog()},"header":!0,"backBtn":!1,"footer":dialog.footer,"title":dialog.title,"position":dialog.position,"width":dialog.width},this.dialogContent()))}}]),RefuseJob1}(_react.Component),mapStateToProps=function(state){return{"activeContact":state.panel.activeContact}},RefuseJob=(0,_reactRedux.connect)(mapStateToProps,null)(RefuseJob1)},"EUEx":function(module,exports){},"EZG+":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _root=__webpack_require__("WlpS"),_root2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_root),_Symbol=_root2["default"].Symbol;exports["default"]=_Symbol},"EiUU":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function getNoticeList(imcore,isNewSys){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var state,curPage,data,sysList,newSysList;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,state=getState().notice,!state.loading&&!state.nomoreNotice){_context.next=4;break}return _context.abrupt("return");case 4:return dispatch({"type":ActionType.GET_NOTICELIST_START,"payload":{"loading":!0}}),curPage=0,isNewSys||(curPage=state.curPage),_context.next=9,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.getsysmsglist4im+"?curPage="+curPage});case 9:data=_context.sent,data.flag?(sysList=data.data.sysMsgList,newSysList=[],newSysList=isNewSys?sysList:state.sysMsgList.concat(sysList),dispatch({"type":ActionType.GET_NOTICELIST_SUCC,"payload":{"sysMsgList":newSysList,"totalCnt":data.data.totalCnt,"curPage":curPage+1,"loading":!1,"nomoreNotice":0===sysList.length,"firstLoaded":!0}})):dispatch({"type":ActionType.GET_NOTICELIST_FAIL,"payload":{"loading":!1,"failMsg":data.msg}}),_context.next=17;break;case 13:_context.prev=13,_context.t0=_context["catch"](0),dispatch({"type":ActionType.GET_NOTICELIST_FAIL,"payload":{"loading":!1}}),imcore.handleErr(_context.t0);case 17:case"end":return _context.stop()}},_callee,_this,[[0,13]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}function deleteNoticeItem(imcore,id,type){var _this2=this;return function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var data;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.delsysmessagebyid+"?msgid="+id+"&messageType="+type});case 3:data=_context2.sent,data.flag&&(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.DELETE_NOTICEITEM,"payload":id}),_context2.next=10;break;case 7:_context2.prev=7,_context2.t0=_context2["catch"](0),imcore.handleErr(_context2.t0);case 10:case"end":return _context2.stop()}},_callee2,_this2,[[0,7]])}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}()}function hasReadNotice(imcore,notice,index){var _this3=this;return function(){var _ref3=_asyncToGenerator(_regenerator2["default"].mark(function _callee3(dispatch,getState){var data;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.readedmessagebyid+"?msgid="+notice.id+"&messageType="+notice.type});case 3:data=_context3.sent,data.flag&&(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.HASREAD_NOTICE,"payload":{"index":index,"id":notice.id}}),_context3.next=10;break;case 7:_context3.prev=7,_context3.t0=_context3["catch"](0),imcore.handleErr(_context3.t0);case 10:case"end":return _context3.stop()}},_callee3,_this3,[[0,7]])}));return function(_x5,_x6){return _ref3.apply(this,arguments)}}()}function showNoticeTabUnread(imcore){return function(dispatch,getState){var state=getState();state.panel.opened&&"notice"===state.panel.activeTab.key||(dispatch(panelActions.setUnReadTabsToLocal(imcore,"notice",!0)),dispatch(panelActions.setPanelUnReadToLocal(imcore,!0)))}}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.getNoticeList=getNoticeList,exports.deleteNoticeItem=deleteNoticeItem,exports.hasReadNotice=hasReadNotice,exports.showNoticeTabUnread=showNoticeTabUnread;var _utils=__webpack_require__("c3kU"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_ActionType=__webpack_require__("TV+w"),ActionType=_interopRequireWildcard(_ActionType),_panel=__webpack_require__("dLnD"),panelActions=_interopRequireWildcard(_panel),_utils2=__webpack_require__("PQSX")},"EjKb":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.config={"domain":LT.Env.cRoot,"ajaxUrl":{"getcurrentuserinfo":LT.Env.cRoot+"user/getcurrentuserinfo.json","handlesend":LT.Env.cRoot+"msg/handlesend.json","handlereceive":LT.Env.cRoot+"msg/handlereceive.json","loadjobinfo":LT.Env.wwwRoot+"job/loadjobinfo.json"}}},"F3yC":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.SEND_MSG="SEND_MSG",exports.RECEIVE_MSG="RECEIVE_MSG",exports.UPDATE_MSG="UPDATE_MSG",exports.CONN_MSG="CONN_MSG",exports.UPDATE_READED_MSG="UPDATE_READED_MSG",exports.UPDATE_LIST_MSG="UPDATE_LIST_MSG"},"FUHg":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function getContacts(imcore,hasConnect,fristLoad){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var state,newContacts,curPage,pageContacts,unreadNum;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,state=getState().contacts,!(state.loading||state.firstLoaded&&state.nomore)){_context.next=4;break}return _context.abrupt("return");case 4:return dispatch({"type":ActionType.GET_CONTACTS_START,"payload":{"loading":!0}}),newContacts=[],curPage=0,hasConnect||(curPage=state.curPage),_context.next=10,_api.contactsApi.getContactList(imcore,curPage);case 10:if(pageContacts=_context.sent){_context.next=13;break}return _context.abrupt("return");case 13:if(newContacts=hasConnect?pageContacts:state.contacts.concat(pageContacts),newContacts.length>0&&(unreadNum=0,newContacts.forEach(function(v){unreadNum+=v.unReadCnt}),dispatch(panelActions.setUnReadTabsToLocal(imcore,"contacts",unreadNum))),(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.GET_CONTACTS_SUCC,"payload":{"contacts":newContacts,"curPage":curPage+1,"loading":!1,"nomore":0===pageContacts.length,"firstLoaded":!0}}),!fristLoad){_context.next=18;break}return _context.abrupt("return",{"contacts":newContacts,"curPage":curPage+1,"loading":!1,"nomore":0===pageContacts.length,"firstLoaded":!0});case 18:_context.next=24;break;case 20:_context.prev=20,_context.t0=_context["catch"](0),dispatch({"type":ActionType.GET_CONTACTS_FAIL,"payload":{"loading":!1}}),imcore.handleErr(_context.t0);case 24:case"end":return _context.stop()}},_callee,_this,[[0,20]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}function deleteContact(imcore,contact){var _this2=this;return function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var imUserType,data,readed,unreadCount;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:imUserType=void 0,_context2.t0=imcore.env,_context2.next="c"===_context2.t0?4:"h"===_context2.t0?6:"b"===_context2.t0?8:10;break;case 4:return imUserType="0",_context2.abrupt("break",10);case 6:return imUserType="2",_context2.abrupt("break",10);case 8:return imUserType="3",_context2.abrupt("break",10);case 10:return _context2.next=12,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.delmycontact,"type":"post","data":{"imUserType":imUserType,"oppositeImId":contact.oppositeImId,"imApp":"1"}});case 12:if(data=_context2.sent,!data.flag){_context2.next=26;break}return _context2.next=16,_api.contactsApi.readed(imcore,contact.oppositeImId);case 16:if(readed=_context2.sent){_context2.next=19;break}return _context2.abrupt("return");case 19:return _context2.next=21,_api.contactsApi.getTotalUnread(imcore);case 21:unreadCount=_context2.sent,1===unreadCount.flag&&dispatch(panelActions.setUnReadTabsToLocal(imcore,"contacts",unreadCount.data.count)),(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.DELETE_CONTACT,"payload":contact}),_context2.next=27;break;case 26:Dialog.alert({"parent":"chat","width":300,"content":React.createElement("p",{"className":"text-center"},data.msg)});case 27:case"end":return _context2.stop()}},_callee2,_this2)}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}()}function changeContactsByReceiveMsg(imcore,msg){var _this3=this;return function(){var _ref3=_asyncToGenerator(_regenerator2["default"].mark(function _callee3(dispatch,getState){var _recordUnRead,state,sender,senderInfo,receiver,_unReadCnt,unReadTab,isfirstLost,newcontact,LSKey,tabsUnReadJson,readed;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return imcore.handleLog("changeContactsByReceiveMsg-----\x3e",msg),_context3.prev=1,_recordUnRead=function(unReadCnt){dispatch(panelActions.setUnReadTabsToLocal(imcore,"contacts",unReadTab)),getState().setting.setting.message&&(imcore.handleLog("change tab and list unread -----\x3e"),!state.panel.opened&&msg.msgBody&&"0"===msg.msgBody.read&&dispatch(panelActions.setPanelUnReadToLocal(imcore,!0)))},state=getState(),sender=msg.getFrom(),senderInfo=msg.getOppositeUserInfo(imcore),receiver=msg.getTo(),_unReadCnt=0,unReadTab=0,isfirstLost=!0,newcontact=void 0,LSKey=(0,_constants.getLocalStorageKey)(imcore.userInfo.oppositeImId),_context3.next=14,imcore.getLocalDataPromise(LSKey.TABS_UNREAD);case 14:if(tabsUnReadJson=_context3.sent,state.contacts.contacts.length>0&&state.contacts.contacts.map(function(v){unReadTab+=v.unReadCnt}),isfirstLost&&(unReadTab+=1),!state.panel.activeContact||state.panel.activeContact.oppositeImId!==sender){_context3.next=24;break}return _context3.next=20,_api.contactsApi.readed(imcore,state.panel.activeContact.oppositeImId);case 20:if(readed=_context3.sent){_context3.next=23;break}return _context3.abrupt("return");case 23:imcore.handleLog("readed has finished-----\x3e state",state);case 24:if(state.contacts.firstLoaded){_context3.next=32;break}if(imcore.handleLog("has not contacts list -----\x3e"),sender!==imcore.userInfo.oppositeImId){_context3.next=28;break}return _context3.abrupt("return");case 28:if(!state.panel.activeContact||state.panel.activeContact.oppositeImId!==sender){_context3.next=30;break}return _context3.abrupt("return");case 30:return _recordUnRead(1),_context3.abrupt("return");case 32:if(sender===imcore.userInfo.oppositeImId&&(sender=receiver),!state.panel.activeContact||state.panel.activeContact.oppositeImId!==sender){_context3.next=37;break}return imcore.handleLog("current activeContact -----\x3e"),setTimeout(function(){dispatch({"type":ActionType.UPDATE_CONTACTS_BY_RECEIVE_MSG,"payload":Object.assign(state.panel.activeContact,msg.getLastMsgFormat(),{"unReadCnt":_unReadCnt})}),dispatch({"type":ActionType.UPDATE_HISTORYCONTACTS_BY_RECEIVE_MSG,"payload":Object.assign(state.panel.activeContact,msg.getLastMsgFormat(),{"unReadCnt":_unReadCnt})})},500),_context3.abrupt("return");case 37:if(newcontact=state.contacts.contacts.filter(function(v){return v.oppositeImId===sender}),0!==newcontact.length){_context3.next=47;break}return imcore.handleLog("has newContact -----\x3e"),_context3.next=42,_api.contactsApi.getOneContact(imcore,senderInfo);case 42:newcontact=_context3.sent,_unReadCnt=msg.getFrom()===imcore.userInfo.oppositeImId?0:null===state.panel.activeContact?1:state.panel.activeContact.oppositeImId===sender?0:1,dispatch({"type":ActionType.UPDATE_CONTACTS_BY_RECEIVE_MSG,"payload":Object.assign(newcontact,msg.getLastMsgFormat(),{"unReadCnt":_unReadCnt})}),_context3.next=50;break;case 47:imcore.handleLog("oldContact -----\x3e"),msg.getFrom()===imcore.userInfo.oppositeImId?(imcore.handleLog("is owner app send -----\x3e",unReadTab),_unReadCnt=0,dispatch(panelActions.setUnReadTabsToLocal(imcore,"contacts",unReadTab-1-newcontact[0].unReadCnt))):(imcore.handleLog("is not nowner app send -----\x3e"),_unReadCnt=newcontact[0].unReadCnt+1),dispatch({"type":ActionType.UPDATE_CONTACTS_BY_RECEIVE_MSG,"payload":Object.assign(newcontact[0],msg.getLastMsgFormat(),{"unReadCnt":_unReadCnt})});case 50:sender!==receiver&&_recordUnRead(1),_context3.next=56;break;case 53:_context3.prev=53,_context3.t0=_context3["catch"](1),imcore.handleErr(_context3.t0);case 56:case"end":return _context3.stop()}},_callee3,_this3,[[1,53]])}));return function(_x5,_x6){return _ref3.apply(this,arguments)}}()}function changeContactsBySendMsg(imcore,msg){var _this4=this;return function(){var _ref4=_asyncToGenerator(_regenerator2["default"].mark(function _callee4(dispatch,getState){var state,contact,receiver,senderInfo;return _regenerator2["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(state=getState(),contact=[],getState().contacts.firstLoaded&&msg.state!==_enums.MsgState.SEND_FAILED){_context4.next=3;break}return _context4.abrupt("return");case 3:if(imcore.handleLog("changeContactsBySendMsg -----\x3e",msg),state.panel.activeContact){_context4.next=22;break}if(receiver=msg.msgBody.to,senderInfo={"oppositeUserId":msg.msgBody.ext.extBody.receiverUserId,"oppositeUserKind":msg.msgBody.ext.extBody.receiverKind},contact=state.contacts.contacts.filter(function(v){return v.oppositeImId===receiver}),imcore.handleLog("not activeContactwin -----\x3e",contact),0!==contact.length){_context4.next=18;break}return _context4.next=12,_api.contactsApi.getOneContact(imcore,senderInfo);case 12:contact=_context4.sent,imcore.handleLog("get new contact -----\x3e",contact),msg.oppositeImId=msg.msgBody.to,contact=Object.assign({},msg,contact,{"unReadCnt":0}),_context4.next=20;break;case 18:contact=Object.assign({},msg,contact[0],{"unReadCnt":0}),imcore.handleLog("get old contact -----\x3e",contact);case 20:_context4.next=26;break;case 22:contact=getState().panel.activeContact,state.history.initialServerHistory.length>0&&state.history.initialServerHistory.some(function(v){return v.from!==imcore.userInfo.oppositeImId})&&(contact.contact=!0),contact=Object.assign({},msg,contact,{"unReadCnt":0}),imcore.handleLog("has activeContactwin -----\x3e",contact);case 26:(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.UPDATE_CONTACTS_BY_SEND_MSG,"payload":{"lastMsg":msg.getLastMsgFormat(),"contact":contact}});case 27:case"end":return _context4.stop()}},_callee4,_this4)}));return function(_x7,_x8){return _ref4.apply(this,arguments)}}()}function setUnReadContactsToLocal(imcore,oppositeImId,unRead){var _this5=this;return function(){var _ref5=_asyncToGenerator(_regenerator2["default"].mark(function _callee5(dispatch,getState){var config,LSKey,unReadArr,i;return _regenerator2["default"].wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return config=(0,_config2["default"])(imcore.env),LSKey=(0,_constants.getLocalStorageKey)(imcore.userInfo.oppositeImId),_context5.next=4,imcore.getLocalDataPromise(LSKey.CONTACTS_UNREAD);case 4:unReadArr=_context5.sent,unReadArr=Array.isArray(unReadArr)?unReadArr.filter(function(v){if(v)return v}):[],i=unReadArr.indexOf(oppositeImId),i>-1?0===unReadCnt&&unReadArr.splice(i,1):unRead&&unReadArr.push(oppositeImId),imcore.setLocalData(LSKey.CONTACTS_UNREAD,unReadArr);case 9:case"end":return _context5.stop()}},_callee5,_this5)}));return function(_x9,_x10){return _ref5.apply(this,arguments)}}()}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.getContacts=getContacts,exports.deleteContact=deleteContact,exports.changeContactsByReceiveMsg=changeContactsByReceiveMsg,exports.changeContactsBySendMsg=changeContactsBySendMsg,exports.setUnReadContactsToLocal=setUnReadContactsToLocal;var _constants=__webpack_require__("E9QE"),_utils=__webpack_require__("c3kU"),_enums=__webpack_require__("O4JY"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_ActionType=__webpack_require__("TV+w"),ActionType=_interopRequireWildcard(_ActionType),_history=__webpack_require__("aCyU"),_panel=(_interopRequireWildcard(_history),__webpack_require__("dLnD")),panelActions=_interopRequireWildcard(_panel),_api=__webpack_require__("wVNl"),_utils2=(__webpack_require__("acFS"),__webpack_require__("6svF"),__webpack_require__("PQSX"))},"FmuY":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_31.ab161103.png"},"Fnm7":function(module,exports,__webpack_require__){"use strict";function symbolObservablePonyfill(root){var result,_Symbol=root.Symbol;return"function"==typeof _Symbol?_Symbol.observable?result=_Symbol.observable:(result=_Symbol("observable"),_Symbol.observable=result):result="@@observable",result}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=symbolObservablePonyfill},"GPuH":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_3.1a2c7864.png"},"GbPe":function(module,exports,__webpack_require__){"use strict";function setImConfig(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"c").toLowerCase()){case"c":return _c.config;case"b":return _b.config;case"h":return _h.config}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.setImConfig=setImConfig;var _c=__webpack_require__("EjKb"),_b=__webpack_require__("K7T8"),_h=__webpack_require__("8x/U")},"GbQ2":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.tooldversion="//lpt.liepin.com/message/showmessageindex/#c:1:/message/showecgrouplist/",exports.mycontacts="https://im.liepin.com/mycontacts.json",exports.simpleInfos=LT.Env.lptRoot+"im/simple-infos.json",exports.chart="https://im.liepin.com/chart.json",exports.getsysmsglist4im=LT.Env.lptRoot+"message/getsysmsglist4im.json",exports.readedmessagebyid=LT.Env.lptRoot+"message/handleunreadsysmessageasread.json",exports.delsysmessagebyid=LT.Env.lptRoot+"message/delsysmessagebyid.json",exports.getonecontact=LT.Env.lptRoot+"im/getonecontact.json",exports.delmycontact="https://im.liepin.com/delmycontact.json",exports.gethistorycontactlist=LT.Env.lptRoot+"im/gethistorycontactlist.json",exports.getapplyidbyejobidandresid=LT.Env.lptRoot+"apply/getapplyidbyejobidandresid.json",exports.batchchangeapplycategorybyapplyids=LT.Env.lptRoot+"apply/batchchangeapplycategorybyapplyids.json",exports.infoBetweenUsers=LT.Env.lptRoot+"im/getrejectstatus.json",exports.rejectreceivemsg=LT.Env.lptRoot+"im/rejectreceivemsg.json",exports.cancelrejectreceivemsg=LT.Env.lptRoot+"im/cancelrejectreceivemsg.json",exports.askresume=LT.Env.lptRoot+"im/checkforaskresume.json",exports.iscanaskresume=LT.Env.lptRoot+"im/canaskresume.json",exports.successaskresume=LT.Env.lptRoot+"im/successaskresume.json",exports.readed="https://im.liepin.com/readed.json",exports.unreadcount="https://im.liepin.com/unreadcount.json"},"HW6M":function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=void 0===arg?"undefined":_typeof(arg);if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}var hasOwn={}.hasOwnProperty;void 0!==module&&module.exports?module.exports=classNames:"object"===_typeof(__webpack_require__("nErl"))&&__webpack_require__("nErl")?(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)):window.classNames=classNames}()},"Htzn":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function verifyPlainObject(value,displayName,methodName){(0,_isPlainObject2["default"])(value)||(0,_warning2["default"])(methodName+"() in "+displayName+" must return a plain object. Instead received "+value+".")}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=verifyPlainObject;var _isPlainObject=__webpack_require__("sMP3"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_warning=__webpack_require__("byaS"),_warning2=_interopRequireDefault(_warning)},"IPoy":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.reportActions=exports.shieldActions=exports.userSettingActions=exports.toastActions=exports.setGreetingActions=exports.historyContactsActions=exports.settingActions=exports.messageActions=exports.imDialogActions=exports.ActionType=exports.historyActions=exports.dragActions=exports.snsActions=exports.noticeActions=exports.contactsActions=exports.panelActions=void 0;var _panel=__webpack_require__("dLnD"),_panelActions=_interopRequireWildcard(_panel),_contacts=__webpack_require__("FUHg"),_contactsActions=_interopRequireWildcard(_contacts),_notice=__webpack_require__("EiUU"),_noticeActions=_interopRequireWildcard(_notice),_sns=__webpack_require__("ngh6"),_snsActions=_interopRequireWildcard(_sns),_drag=__webpack_require__("Plm0"),_dragActions=_interopRequireWildcard(_drag),_history=__webpack_require__("aCyU"),_historyActions=_interopRequireWildcard(_history),_ActionType2=__webpack_require__("TV+w"),_ActionType=_interopRequireWildcard(_ActionType2),_dialog=__webpack_require__("6WwB"),_imDialogActions=_interopRequireWildcard(_dialog),_message=__webpack_require__("UK62"),_messageActions=_interopRequireWildcard(_message),_setting=__webpack_require__("cGfb"),_settingActions=_interopRequireWildcard(_setting),_historyContacts=__webpack_require__("OsLH"),_historyContactsActions=_interopRequireWildcard(_historyContacts),_setGreeting=__webpack_require__("tIMm"),_setGreetingActions=_interopRequireWildcard(_setGreeting),_toast=__webpack_require__("wmWy"),_toastActions=_interopRequireWildcard(_toast),_userSetting=__webpack_require__("1jiI"),_userSettingActions=_interopRequireWildcard(_userSetting),_shield=__webpack_require__("tp+D"),_shieldActions=_interopRequireWildcard(_shield),_report=__webpack_require__("snAd"),_reportActions=_interopRequireWildcard(_report);exports.panelActions=_panelActions,exports.contactsActions=_contactsActions,exports.noticeActions=_noticeActions,exports.snsActions=_snsActions,exports.dragActions=_dragActions,exports.historyActions=_historyActions,exports.ActionType=_ActionType,exports.imDialogActions=_imDialogActions,exports.messageActions=_messageActions,exports.settingActions=_settingActions,exports.historyContactsActions=_historyContactsActions,exports.setGreetingActions=_setGreetingActions,exports.toastActions=_toastActions,exports.userSettingActions=_userSettingActions,exports.shieldActions=_shieldActions,exports.reportActions=_reportActions},"Ie6m":function(module,exports,__webpack_require__){"use strict";(function(process){function checkPropTypes(typeSpecs,values,location,componentName,getStack){if("production"!==process.env.NODE_ENV)for(var typeSpecName in typeSpecs)if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{invariant("function"==typeof typeSpecs[typeSpecName],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",componentName||"React class",location,typeSpecName,_typeof(typeSpecs[typeSpecName])),error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}if(warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",componentName||"React class",location,typeSpecName,void 0===error?"undefined":_typeof(error)),error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0;var stack=getStack?getStack():"";warning(!1,"Failed %s type: %s%s",location,error.message,null!=stack?stack:"")}}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};if("production"!==process.env.NODE_ENV)var invariant=__webpack_require__("cxPT"),warning=__webpack_require__("YyeZ"),ReactPropTypesSecret=__webpack_require__("gt/O"),loggedTypeFailures={};module.exports=checkPropTypes}).call(exports,__webpack_require__("W2nU"))},"ItXD":function(module,exports){},"J/I/":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _overArg=__webpack_require__("28Po"),_overArg2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_overArg),getPrototype=(0,_overArg2["default"])(Object.getPrototypeOf,Object);exports["default"]=getPrototype},"JGBG":function(module,exports){},"JSwt":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_14.0220e5c9.png"},"JjOt":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_constants=__webpack_require__("E9QE"),_ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType),_actions=__webpack_require__("IPoy"),_ChatWin=__webpack_require__("Ap7/"),_ChatWin2=_interopRequireDefault(_ChatWin),_Setting=__webpack_require__("wBoX"),_Setting2=_interopRequireDefault(_Setting),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_addTlog=__webpack_require__("rF9R");__webpack_require__("EUEx");var _classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_utils=__webpack_require__("PQSX"),Panel=function(_Component){function Panel(props){_classCallCheck(this,Panel);var _this=_possibleConstructorReturn(this,(Panel.__proto__||Object.getPrototypeOf(Panel)).call(this,props));return _this.config=(0,_config2["default"])(props.imcore.env),_this.state={"dialogVisible":!1},_this.ie9=navigator.userAgent.indexOf("MSIE 9.0")>0,_this}return _inherits(Panel,_Component),_createClass(Panel,[{"key":"componentDidMount","value":function(){var _this2=this,_props=this.props,imcore=_props.imcore,actions=_props.actions,openPanel=(_props.unRead,_props.toggleUnRead,_props.openPanel),wrap=(_props.opened,_props.wrap),dispatch=_props.dispatch,componentDidMounted=_props.componentDidMounted,onSelectContact=(_props.settingShow,_props.onSelectContact);openPanel(function(){window.tlog=window.tlog||[],tlog.push(_this2.config.tlogs.OPEN_PANEL),$(wrap).addClass("move-to-show"),actions.openPanel(imcore)}),imcore.event.on(_constants.MsgEvent.SEND_MSG,function(msg){actions.panelSendMsg(imcore,msg)}),imcore.event.on(_constants.MsgEvent.RECEIVE_MSG,function(msg){actions.panelReceiveMsg(imcore,msg)}),imcore.event.on(_constants.MsgEvent.UPDATE_MSG,function(msg){actions.panelUpdateMsg(imcore,msg)}),imcore.event.on(_constants.MsgEvent.UPDATE_LIST_MSG,function(msg){actions.panelUpdateListMsg(imcore,msg)}),imcore.event.on(_constants.MsgEvent.UPDATE_READED_MSG,function(toImId){actions.panelUpdateReadedMsg(imcore,toImId)}),imcore.event.on(_constants.MsgEvent.CONN_MSG,function(hasConnect){actions.initPanel(imcore,hasConnect,!0)}),Object.keys(ActionType).forEach(function(v){imcore.subscribe(v,function(type,action){action.pageId!==imcore.pageId&&dispatch({"type":action.type,"payload":action.payload})})}),componentDidMounted&&componentDidMounted({"imcore":imcore,"actions":actions,"dispatch":dispatch}),imcore.event.on("selectContact",function(contact){onSelectContact&&onSelectContact(contact)})}},{"key":"componentWillReceiveProps","value":function(nextProps){nextProps.unRead!==this.props.unRead&&this.props.toggleUnRead(nextProps.unRead)}},{"key":"shouldComponentUpdate","value":function(nextProps,nextState){var _props2=this.props,thisOthers=(_props2.allstate,_objectWithoutProperties(_props2,["allstate"])),_nextProps=nextProps,nextOthers=(_nextProps.allstate,_objectWithoutProperties(_nextProps,["allstate"])),thisProps=thisOthers;return nextProps=nextOthers,(0,_utils.comparePropsState)(thisProps,this.state,nextProps,nextState)}},{"key":"openDialog","value":function(){this.setState({"dialogVisible":!0})}},{"key":"closePanel","value":function(){var _props3=this.props,imcore=_props3.imcore,actions=_props3.actions,wrap=_props3.wrap;$(wrap).removeClass("move-to-show"),actions.closePanel(imcore)}},{"key":"clickTab","value":function(v){var _props4=this.props,actions=_props4.actions,imcore=_props4.imcore;actions.selectTab(imcore,v)}},{"key":"renderChatWin","value":function(){return this.props.activeContact||this.props.loadingActiveContact?_react2["default"].createElement(_ChatWin2["default"],{"imcore":this.props.imcore,"msgcard":this.props.msgcard}):null}},{"key":"clickSetting","value":function(){var _props5=this.props,actions=_props5.actions,settingShow=_props5.settingShow;actions.settingShow(settingShow)}},{"key":"render","value":function(){var _this3=this,_props6=this.props,imcore=_props6.imcore,activeTab=(_props6.actions,_props6.activeTab),unReadTabs=_props6.unReadTabs,greetingType=_props6.greetingType;_props6.opened,_props6.allstate,this.ie9;return _react2["default"].createElement("div",null,_react2["default"].createElement(_Setting2["default"],{"greetingType":greetingType,"imcore":imcore}),_react2["default"].createElement("aside",null,_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","className":"link-close-panel","onClick":function(){return _this3.closePanel()},"pushStr":this.config.tlogs.CLOSE_PANEL},_react2["default"].createElement("i",{"className":"webim-icons16 icons16-arrow"})),_react2["default"].createElement("ul",null,activeTab&&this.config.tabs.map(function(v,i){return _react2["default"].createElement("li",{"key":i},_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","onClick":function(){return _this3.clickTab(v)},"pushStr":_this3.config.tlogs["OPEN_"+v.key.toUpperCase()]},_react2["default"].createElement("i",{"className":"side-icon side-icon-"+v.key+(v.key===activeTab.key?" active":"")}),_react2["default"].createElement("span",null,v.name),"contacts"===v.key?_react2["default"].createElement("em",{"className":(0,_classnames2["default"])({"contactsdot":!0,"hide":0===parseInt(unReadTabs[0])})},parseInt(unReadTabs[0])>99?"99+":unReadTabs[0]):_react2["default"].createElement("em",{"className":(0,_classnames2["default"])({"dot":!0,"hide":!unReadTabs[i]})})))})),_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","onClick":function(){return _this3.clickSetting()},"pushStr":this.config.tlogs.PANEL_SETTING,"className":"link-open-setting"},_react2["default"].createElement("i",{"className":"webim-icons16 icons16-setting-white"}))),_react2["default"].createElement("div",{"className":"main-content"},activeTab&&this.config.tabs.map(function(v,i){var Main=v.comp;return _react2["default"].createElement(Main,{"key":i,"imcore":imcore})}),_react2["default"].createElement("div",{"id":"main-dialog-container"})),this.renderChatWin(),_react2["default"].createElement("div",{"id":"panel-dialog-container"}))}}]),Panel}(_react.Component),mapStateToProps=function(state,props){return{"allstate":state,"activeTab":state.panel.activeTab,"activeContact":state.panel.activeContact,"unRead":state.panel.unRead,"unReadTabs":state.panel.unReadTabs,"opened":state.panel.opened,"settingShow":state.setting.show,"greeting":state.setting.setting.greeting,"greetingType":state.setGreeting.greetingType,"greetingText":state.setGreeting.greetingText,"loadingActiveContact":state.panel.loadingActiveContact}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.panelActions,_actions.contactsActions,_actions.historyActions,_actions.historyContactsActions,_actions.settingActions,_actions.setGreetingActions,_actions.messageActions),dispatch),"dispatch":dispatch}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(Panel)},"JmZS":function(module,exports){},"Jmof":function(module,exports){module.exports=React},"JtmH":function(module,exports,__webpack_require__){"use strict";(function(process){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},emptyFunction=__webpack_require__("e6+Q"),invariant=__webpack_require__("cxPT"),warning=__webpack_require__("YyeZ"),assign=__webpack_require__("BEQ0"),ReactPropTypesSecret=__webpack_require__("gt/O"),checkPropTypes=__webpack_require__("Ie6m");module.exports=function(isValidElement,throwOnDirectAccess){function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}function is(x,y){return x===y?0!==x||1/x==1/y:x!==x&&y!==y}function PropTypeError(message){this.message=message,this.stack=""}function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName,secret){if(componentName=componentName||ANONYMOUS,propFullName=propFullName||propName,secret!==ReactPropTypesSecret)if(throwOnDirectAccess)invariant(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var cacheKey=componentName+":"+propName;!manualPropTypeCallCache[cacheKey]&&manualPropTypeWarningCount<3&&(warning(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",propFullName,componentName),manualPropTypeCallCache[cacheKey]=!0,manualPropTypeWarningCount++)}return null==props[propName]?isRequired?new PropTypeError(null===props[propName]?"The "+location+" `"+propFullName+"` is marked as required in `"+componentName+"`, but its value is `null`.":"The "+location+" `"+propFullName+"` is marked as required in `"+componentName+"`, but its value is `undefined`."):null:validate(props,propName,componentName,location,propFullName)}if("production"!==process.env.NODE_ENV)var manualPropTypeCallCache={},manualPropTypeWarningCount=0;var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];if(getPropType(propValue)!==expectedType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPreciseType(propValue)+"` supplied to `"+componentName+"`, expected `"+expectedType+"`.");return null}return createChainableTypeChecker(validate)}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.");var propValue=props[propName];if(!Array.isArray(propValue)){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected an array.")}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getClassName(props[propName])+"` supplied to `"+componentName+"`, expected instance of `"+expectedClassName+"`.")}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(is(propValue,expectedValues[i]))return null;return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+propValue+"` supplied to `"+componentName+"`, expected one of "+JSON.stringify(expectedValues)+".")}return Array.isArray(expectedValues)?createChainableTypeChecker(validate):("production"!==process.env.NODE_ENV&&warning(!1,"Invalid argument supplied to oneOf, expected an instance of array."),emptyFunction.thatReturnsNull)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.");var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected an object.");for(var key in propValue)if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){if(null==(0,arrayOfTypeCheckers[i])(props,propName,componentName,location,propFullName,ReactPropTypesSecret))return null}return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to `"+componentName+"`.")}if(!Array.isArray(arrayOfTypeCheckers))return"production"!==process.env.NODE_ENV&&warning(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),emptyFunction.thatReturnsNull;for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if("function"!=typeof checker)return warning(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",getPostfixForTypeWarning(checker),i),emptyFunction.thatReturnsNull}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `object`.");for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}}return null}return createChainableTypeChecker(validate)}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `object`.");var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker)return new PropTypeError("Invalid "+location+" `"+propFullName+"` key `"+key+"` supplied to `"+componentName+"`.\nBad object: "+JSON.stringify(props[propName],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(shapeTypes),null,"  "));var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(void 0===propValue?"undefined":_typeof(propValue)){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||isValidElement(propValue))return!0;var iteratorFn=getIteratorFn(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function isSymbol(propType,propValue){return"symbol"===propType||("Symbol"===propValue["@@toStringTag"]||"function"==typeof Symbol&&propValue instanceof Symbol)}function getPropType(propValue){var propType=void 0===propValue?"undefined":_typeof(propValue);return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":isSymbol(propType,propValue)?"symbol":propType}function getPreciseType(propValue){if(void 0===propValue||null===propValue)return""+propValue;var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case"array":case"object":return"an "+type;case"boolean":case"date":case"regexp":return"a "+type;default:return type}}function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:ANONYMOUS}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator",ANONYMOUS="<<anonymous>>",ReactPropTypes={"array":createPrimitiveTypeChecker("array"),"bool":createPrimitiveTypeChecker("boolean"),"func":createPrimitiveTypeChecker("function"),"number":createPrimitiveTypeChecker("number"),"object":createPrimitiveTypeChecker("object"),"string":createPrimitiveTypeChecker("string"),"symbol":createPrimitiveTypeChecker("symbol"),"any":function(){return createChainableTypeChecker(emptyFunction.thatReturnsNull)}(),"arrayOf":createArrayOfTypeChecker,"element":function(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected a single ReactElement.")}return null}return createChainableTypeChecker(validate)}(),"instanceOf":createInstanceTypeChecker,"node":function(){function validate(props,propName,componentName,location,propFullName){return isNode(props[propName])?null:new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to `"+componentName+"`, expected a ReactNode.")}return createChainableTypeChecker(validate)}(),"objectOf":createObjectOfTypeChecker,"oneOf":createEnumTypeChecker,"oneOfType":createUnionTypeChecker,"shape":createShapeTypeChecker,"exact":createStrictShapeTypeChecker};return PropTypeError.prototype=Error.prototype,ReactPropTypes.checkPropTypes=checkPropTypes,ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}}).call(exports,__webpack_require__("W2nU"))},"K7T8":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.config={"domain":LT.Env.lptRoot,"ajaxUrl":{"getcurrentuserinfo":LT.Env.lptRoot+"user/getcurrentuserinfo.json","handlesend":LT.Env.lptRoot+"msg/handlesend.json","handlereceive":LT.Env.lptRoot+"msg/handlereceive.json","loadresumeinfo":LT.Env.lptRoot+"im/loadresumeinfo.json","loadjobinfo":LT.Env.lptRoot+"ejob/loadjobinfo.json","saveemmessage":LT.Env.lptRoot+"/message/saveemmessage.json"}}},"KSGD":function(module,exports,__webpack_require__){"use strict";(function(process){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};if("production"!==process.env.NODE_ENV){var REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,isValidElement=function(object){return"object"===(void 0===object?"undefined":_typeof(object))&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE};module.exports=__webpack_require__("JtmH")(isValidElement,!0)}else module.exports=__webpack_require__("Q4WQ")()}).call(exports,__webpack_require__("W2nU"))},"KXXa":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_10.f476d39a.png"},"Kd7u":function(module,exports,__webpack_require__){"use strict";(function(global){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),CoreClass=function(){function CoreClass(){return _classCallCheck(this,CoreClass),this.tpls={},this.scripts={},this.datas={},this._initTpls()._initScripts(),this}return _createClass(CoreClass,[{"key":"_generate","value":function(){return Math.random().toString().replace(".","")}},{"key":"_initTpls","value":function(){var $NODETPL=this;return this.tpls={"main":function($DATA,guid){var _="",duid=$NODETPL.duid();guid=guid||$NODETPL.guid(),_+="<style>#"+guid+" {  height: 552px;}#"+guid+" .chat-title {  padding: 0 20px;  line-height: 48px;  font-size: 16px;  color: #fff;  background: #3689b3;}#"+guid+" .new-friends {  position: relative;  height: 504px;  overflow-y: auto;}#"+guid+" .new-friends span.no-friend {  position: absolute;  left: 0;  right: 0;  top: 50%;  margin-top: -45px;  padding-top: 74px;  text-align: center;  font-size: 16px;  color: #999;  background: url("+__webpack_require__("5OkU")+") center 0 no-repeat;}#"+guid+" .new-friends ul li {  border-bottom: 1px solid #f6f6f6;}#"+guid+" .new-friends ul li:hover {  background: #f6f6f6;}#"+guid+' .new-friends ul li a {  display: block;  padding: 20px 20px 8px 0;  color: #333;  text-decoration: none;  outline: none;  font-family: "Microsoft Yahei";}#'+guid+" .new-friends ul li dl {  margin-left: 14px;}#"+guid+" .new-friends ul li dl dt {  display: inline-block;  margin: 2px 15px 0 0;  vertical-align: top;}#"+guid+" .new-friends ul li dl dd {  display: inline-block;  width: 81%;  vertical-align: middle;}#"+guid+" .new-friends ul li dl dd h4 {  margin: 0;  font-size: 12px;  font-weight: normal;}#"+guid+" .new-friends ul li dl dd h4 label {  float: left;  font-size: 14px;  cursor: pointer;}#"+guid+" .new-friends ul li dl dd h4 label .text-success {  color: #455fd1;}#"+guid+" .new-friends ul li dl dd h4 time {  float: right;  width: 72px;  text-align: center;  color: #999;}#"+guid+" .new-friends ul li dl dd p {  color: #999;}#"+guid+" .new-friends ul li dl dd p span {  float: left;  width: 252px;  margin-top: 8px;  overflow: hidden;  white-space: nowrap;  text-overflow: ellipsis;}#"+guid+" .new-friends ul li dl dd p span.text-success {  float: right;  width: 60px;  padding: 0;  margin-top: 5px;  line-height: 24px;  color: #fff;  border: 0;  cursor: pointer;  background-color: #2c99fe;}#"+guid+" .new-friends ul li dl dd p .btn {  float: right;  width: 60px;  padding: 0;  margin-top: 5px;  line-height: 24px;  color: #fff;  border: 0;  cursor: pointer;}#"+guid+" .new-friends ul li dl dd p .send-message {  background-color: #2c99fe;}#"+guid+" .new-friends .more-history {  line-height: 40px;  text-align: center;}#"+guid+" .new-friends .more-history span img {  vertical-align: middle;  margin-right: 5px;}</style>";try{_+='<div id="'+guid+'">\n    <div class="chat-title">新的朋友</div>\n    <div class="new-friends">\n      ',0===$DATA.list.length?_+='\n        <span class="no-friend">没有新朋友</span>\n      ':(_+='\n        <ul>\n        </ul>\n        <div class="more-history">\n          <span>\n            ',$DATA.hasNextPage?_+='\n              <img src="'+__webpack_require__("R02E")+'" />加载中...\n            ':_+="\n              没有更多消息\n            ",_+="\n          </span>\n        </div>\n      "),_+="\n    </div>\n  </div>"}catch(e){console.log(e.stack)}return $DATA&&($NODETPL.datas[duid]=$DATA),function(scripts){var cache="undefined"!=typeof window?window:void 0!==global?global:{};cache._nodetpl_=cache._nodetpl_||{},cache._nodetpl_[guid+"-"+duid]=scripts["main"]}($NODETPL.scripts),_+="<script>\n",_+="(function(){\n",_+="  var cache = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : {};\n",_+="  cache._nodetpl_['"+guid+"-"+duid+"']('"+guid+"', '"+duid+"');\n",_+="  delete cache._nodetpl_['"+guid+"-"+duid+"'];\n",_+="})();\n",_+="<\/script>\n"}.bind(this),"morefriends":function($DATA,guid){var _="",duid=$NODETPL.duid();guid=guid||$NODETPL.guid();try{var _eqstring;$DATA.datas&&$DATA.datas.forEach(function(v,i){_+="\n    <li data-id=",_eqstring=$NODETPL.escapeHtml(i),_+=void 0===_eqstring?"":_eqstring,_+=" data-uid=",_eqstring=$NODETPL.escapeHtml(v.userId),_+=void 0===_eqstring?"":_eqstring,_+=" data-imType=",_eqstring=$NODETPL.escapeHtml(v.imUserType),_+=void 0===_eqstring?"":_eqstring,_+=" data-name=",_eqstring=$NODETPL.escapeHtml(v.imId),_+=void 0===_eqstring?"":_eqstring,_+=" data-ukind=",_eqstring=$NODETPL.escapeHtml(v.userKind),_+=void 0===_eqstring?"":_eqstring,_+=' >\n      <a target="_blank" href="',_eqstring=$NODETPL.escapeHtml("0"===v.userKind?"https://c.liepin.com/main/"+v.encodeUserId:"2"===v.userKind?"https://www.liepin.com/LT"+v.userId:""),_+=void 0===_eqstring?"":_eqstring,_+='">\n        <dl>\n          <dt>\n            <img class="tinyFace circle" src=',_eqstring=$NODETPL.escapeHtml(v.icon?"https://image0.lietou-static.com/normal/"+v.icon:"../images/tpls/new-friends/no-friend.png"),_+=void 0===_eqstring?"":_eqstring,_+=' />\n          </dt>\n          <dd>\n            <h4 class="clearfix">\n              <label>',_eqstring=$NODETPL.escapeHtml(v.name),_+=void 0===_eqstring?"":_eqstring,_+="\n                ",1===v.relationCode||6===v.relationCode?_+='\n                  <span class="text-success">关注了你</span>\n                ':3===v.relationCode?_+='\n                 <span class="text-warning">申请添加您为好友</span>\n                ':2===v.relationCode?_+='\n                  <span class="text-success">已关注</span>\n                ':4===v.relationCode&&(_+='\n                  <span class="text-warning">已加好友</span>\n                '),_+="\n              </label>\n              <time>";var date=new Date(v.createTime);_eqstring=$NODETPL.escapeHtml(LT.Date.format(date,"MM-dd HH:mm")),_+=void 0===_eqstring?"":_eqstring,_+='</time>\n            </h4>\n            <p class="clearfix">\n              ',2===v.relationCode?_+="\n                <span>我们已经相互关注成功，很高兴认识您，欢迎随时与我交流~</span>\n              ":4===v.relationCode?_+="\n                <span>我们已经成为好友，很高兴认识您，欢迎随时与我交流~</span>\n              ":(_+="\n                <span>",_eqstring=$NODETPL.escapeHtml(v.addFriendExtInfo||v.companyName+"-"+v.title),_+=void 0===_eqstring?"":_eqstring,_+="</span>\n              "),_+="\n              \n              ",1===v.relationCode?(_+='\n                <em class="btn btn-primary btn-success" data-selector="add-attention">',_eqstring=$NODETPL.escapeHtml(v.relationDesc),_+=void 0===_eqstring?"":_eqstring,_+="</em>\n                \n              "):2===v.relationCode?_+='\n                <em class="btn btn-primary btn-success send-message" data-selector="add-attention">发消息</em>\n                \n              ':3===v.relationCode?(_+='\n                <em class="btn btn-primary btn-success" data-selector="accept-requests">',_eqstring=$NODETPL.escapeHtml(v.relationDesc),_+=void 0===_eqstring?"":_eqstring,_+="</em>\n                \n              "):4===v.relationCode?_+='\n                <em class="btn btn-primary btn-success send-message" data-selector="accept-requests">发消息</em>\n                \n              ':6===v.relationCode&&(_+='\n                <em class="btn btn-primary btn-success" data-selector="relation-attention">',_eqstring=$NODETPL.escapeHtml(v.relationDesc),_+=void 0===_eqstring?"":_eqstring,_+="</em>\n              "),_+="\n            </p>\n          </dd>\n        </dl>\n      </a>\n    </li>\n  "})}catch(e){console.log(e.stack)}return $DATA&&($NODETPL.datas[duid]=$DATA),_}.bind(this)},$NODETPL}},{"key":"_initScripts","value":function(){var $NODETPL=this;return this.scripts={"main":function(guid,duid){function getMoreFriendList(options,callback){LT.ajax({"url":LT.Env.cRoot+"connection/new-friend.json","data":{"currentPage":options||0},"success":function(_ref){var flag=_ref.flag,data=_ref.data;1===flag&&callback(data)}})}var ROOT=document.getElementById(guid),$TPLS=(document.getElementById(guid+duid),$NODETPL.tpls),$DATA=$NODETPL.datas[duid],$ROOT=$(ROOT),newFriends=$TPLS["morefriends"]({"datas":$DATA.list},guid);$(".new-friends ul",$ROOT).append(newFriends);var $moreHistory=$(".more-history",$ROOT);$DATA.dispatch,$DATA.subscribe;LT.Attention=LT.Attention||Apps.Attention,LT.Message=LT.Message||Apps.Message,$(".new-friends ul",$ROOT).on("click",'[data-selector="accept-requests"]',function(e){e.preventDefault();var that=$(this),dataId=that.closest("li").attr("data-name");if(that.hasClass("send-message"))LT.Message.send({"oppositeImId":dataId,"oppositeImUserType":that.closest("li").attr("data-imType"),"oppositeUserId":that.closest("li").attr("data-uid"),"oppositeUserKind":that.closest("li").attr("data-ukind")});else{var uid=that.closest("li").attr("data-uid");LT.Relation.agree(uid,function(){that.addClass("send-message").text("发消息"),that.prev().text("我们已经成为好友，很高兴认识您，欢迎随时与我交流~"),that.closest("li").find("h4 label span").text("已加好友")})}return!1}),$(".new-friends ul",$ROOT).on("click",'[data-selector="add-attention"]',function(e){e.preventDefault();var that=$(this),uid=that.closest("li").attr("data-uid"),dataId=that.closest("li").attr("data-name");return that.hasClass("send-message")?LT.Message.send({"oppositeImId":dataId,"oppositeImUserType":that.closest("li").attr("data-imType"),"oppositeUserId":that.closest("li").attr("data-uid"),"oppositeUserKind":that.closest("li").attr("data-ukind")}):LT.Attention.add(uid,function(){that.addClass("send-message").text("发消息"),that.prev().text("我们已经相互关注成功，很高兴认识您，欢迎随时与我交流~"),that.closest("li").find("h4 label span").text("已关注")}),!1}),$(".new-friends ul",$ROOT).on("click",'[data-selector="relation-attention"]',function(e){e.preventDefault();var that=$(this),dataId=that.closest("li").attr("data-name");if(that.hasClass("send-message"))LT.Message.send({"oppositeImId":dataId,"oppositeImUserType":that.closest("li").attr("data-imType"),"oppositeUserId":that.closest("li").attr("data-uid"),"oppositeUserKind":that.closest("li").attr("data-ukind")});else{var uid=that.closest("li").attr("data-uid");LT.Relation.addAttention(uid,!1,function(){that.addClass("send-message").text("发消息"),that.prev().text("我们已经相互关注成功，很高兴认识您，欢迎随时与我交流~"),that.closest("li").find("h4 label span").text("已关注")})}return!1});var currentPage=0;$(".new-friends",$ROOT).on("scroll",function(){var that=$(this);that.scrollTop()+that.height()>=$("ul",that).outerHeight()&&(++currentPage,getMoreFriendList(currentPage,function(data){var newFriends=$TPLS["morefriends"](data,guid);$(".new-friends ul",$ROOT).append(newFriends),data.hasNextPage||$("span",$moreHistory).html("没有更多消息")}))})}.bind(this)},$NODETPL}},{"key":"duid","value":function(){return"nodetpl_d_"+this._generate()}},{"key":"guid","value":function(){return"nodetpl_g_"+this._generate()}},{"key":"escapeHtml","value":function(html){return html?html.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):html}},{"key":"render","value":function(data,guid){return this.tpls.main(data,guid||this.guid())}}]),CoreClass}();module.exports={"render":function(data){return(new CoreClass).render(data)}}}).call(exports,__webpack_require__("DuR2"))},"LF1K":function(module,exports,__webpack_require__){"use strict";function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}Object.defineProperty(exports,"__esModule",{"value":!0});var _Symbol2=__webpack_require__("EZG+"),_Symbol3=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_Symbol2),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol3["default"]?_Symbol3["default"].toStringTag:void 0;exports["default"]=getRawTag},"M0YV":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function Image(props){var message=props.message,scrollToBottom=props.scrollToBottom;return message.state===_enums.MsgState.INITIAL?_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("img",{"src":_sending2["default"]})):message.data?_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("a",{"href":"javascript:;","onClick":function(){(0,_imgPreview2["default"])({"src":message.data})},"className":"preview-image"},_react2["default"].createElement("img",{"src":message.data,"onLoad":function(){return scrollToBottom()}}))):_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("img",{"src":_2["default"],"style":{"width":36,"height":36}}))}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=Image;var _react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_enums=__webpack_require__("O4JY"),_imgPreview=__webpack_require__("et+h"),_imgPreview2=_interopRequireDefault(_imgPreview),_sending=__webpack_require__("r0S8"),_sending2=_interopRequireDefault(_sending),_=__webpack_require__("b72d"),_2=_interopRequireDefault(_)},"M3rw":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.OPEN_PANEL="c:C000010090",exports.CLOSE_PANEL="c:C000010092",exports.OPEN_NOTICE="c:C000010096",exports.OPEN_CONTACTS="c:C000010095",exports.OPEN_SNS="c:C000010097",exports.OLD_VERSION="c:C000010101",exports.OPEN_EMOJI="c:C000010109",exports.SEND_IMAGE="c:C000010108",exports.CLICK_HISTORY_ICON="c:C000010107",exports.CLICK_SEND_BTN="c:C000010110",exports.CLICK_ENTRUST_ICON="c:C000010116",exports.CLICK_HISTORY_LINK="c:C000010106",exports.OPEN_CPAGE="c:C000010103",exports.OPEN_HPAGE="c:C000010104",exports.OPEN_BPAGE="c:C000010105",exports.PANEL_SETTING="c:C000010091",exports.SELECT_REMIND="c:C000010093",exports.SELECT_NOREMIND="c:C000010094",exports.SELECT_DIALOG_ENTER="c:C000010391",exports.SELECT_DIALOG_CTRLENTER="c:C000010392",exports.ATTENTION_BTN="c:C000010115",exports.CANCEL_ATTENTION_BTN="c:C000010114",exports.DEL_CURRENT_MESSAGE="c:C000010102",exports.OPEN_DIALOG_C="c:C000010098",exports.OPEN_DIALOG_B="c:C000010099",exports.OPEN_DIALOG_H="c:C000010100",exports.DELETE_NOTICE="c:C000010119",exports.OPEN_NOTICE_LAYER="c:C000010118"},"MCT5":function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function createListenerCollection(){var current=[],next=[];return{"clear":function(){next=CLEARED,current=CLEARED},"notify":function(){for(var listeners=current=next,i=0;i<listeners.length;i++)listeners[i]()},"get":function(){return next},"subscribe":function(listener){var isSubscribed=!0;return next===current&&(next=current.slice()),next.push(listener),function(){isSubscribed&&current!==CLEARED&&(isSubscribed=!1,next===current&&(next=current.slice()),next.splice(next.indexOf(listener),1))}}}}Object.defineProperty(exports,"__esModule",{"value":!0});var CLEARED=null,nullListeners={"notify":function(){}},Subscription=function(){function Subscription(store,parentSub,onStateChange){_classCallCheck(this,Subscription),this.store=store,this.parentSub=parentSub,this.onStateChange=onStateChange,this.unsubscribe=null,this.listeners=nullListeners}return Subscription.prototype.addNestedSub=function(listener){return this.trySubscribe(),this.listeners.subscribe(listener)},Subscription.prototype.notifyNestedSubs=function(){this.listeners.notify()},Subscription.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},Subscription.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=createListenerCollection())},Subscription.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=nullListeners)},Subscription}();exports["default"]=Subscription},"MILx":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_32.2c79e786.png"},"N46j":function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function drag(){return function(Comp){return function(_Component){function _class(props){_classCallCheck(this,_class);var _this=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this,props));return _this.originCX=null,_this.originCY=null,_this.state={"draging":!1},_this.onMouseUp=_this.onMouseUp.bind(_this),_this.onMouseMove=_this.onMouseMove.bind(_this),_this.setAgain=_this.setAgain.bind(_this),_this}return _inherits(_class,_Component),_createClass(_class,[{"key":"componentDidMount","value":function(){window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.setAgain)}},{"key":"componentWillUnmount","value":function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.setAgain)}},{"key":"setAgain","value":function(){this.props.actions.dragWindowResize()}},{"key":"onMouseMove","value":function(e){if(this.state.draging){var distanceX=e.clientX-this.originCX,distanceY=e.clientY-this.originCY;this.props.actions.dragDistance({"distanceX":distanceX,"distanceY":distanceY}),this.originCX=e.clientX,this.originCY=e.clientY}}},{"key":"onMouseUp","value":function(e){this.state.draging&&this.setState({"draging":!1})}},{"key":"onMousedown","value":function(e){2!==e.button&&(this.originCX=e.clientX,this.originCY=e.clientY,this.setState({"draging":!0}))}},{"key":"render","value":function(){var _this2=this,_props=this.props,_props$style=_props.style,style=void 0===_props$style?{}:_props$style,rest=_objectWithoutProperties(_props,["style"]);return _react2["default"].createElement(Comp,_extends({"style":Object.assign.apply(Object,[{}].concat(_toConsumableArray(style),[{"cursor":this.state.draging?"all-scroll":"auto"}]))},rest,{"onMouseDown":function(e){_this2.onMousedown(e)}}))}}]),_class}(_react.Component)}}function dragMove(){return function(Comp){return function(_Component2){function _class2(){return _classCallCheck(this,_class2),_possibleConstructorReturn(this,(_class2.__proto__||Object.getPrototypeOf(_class2)).apply(this,arguments))}return _inherits(_class2,_Component2),_createClass(_class2,[{"key":"render","value":function(){var _props2=this.props,_props2$style=_props2.style,style=void 0===_props2$style?{}:_props2$style,top=_props2.top,right=_props2.right,rest=_objectWithoutProperties(_props2,["style","top","right"]),newStyle=Object.assign.apply(Object,[{}].concat(_toConsumableArray(style),[{"top":top,"right":right}]));return _react2["default"].createElement(Comp,_extends({"style":newStyle},rest))}}]),_class2}(_react.Component)}}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.drag=drag,exports.dragMove=dragMove;var _react=__webpack_require__("Jmof"),_react2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_react)},"NhJ5":function(module,exports){},"Nlr2":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_utils=__webpack_require__("PQSX"),_actions=(__webpack_require__("rF9R"),__webpack_require__("IPoy")),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_NoticeDetail=__webpack_require__("4u8l"),_NoticeDetail2=_interopRequireDefault(_NoticeDetail),_Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog),_socket=__webpack_require__("Tdzb"),_socket2=_interopRequireDefault(_socket);__webpack_require__("fPvA");var Notice=function(_Component){function Notice(props){_classCallCheck(this,Notice);var _this=_possibleConstructorReturn(this,(Notice.__proto__||Object.getPrototypeOf(Notice)).call(this,props));return _this.state={"showNoticeDetail":!1,"dialogVisible":!1,"canload":!0},_this}return _inherits(Notice,_Component),_createClass(Notice,[{"key":"componentDidMount","value":function(){var _props=this.props,imcore=_props.imcore,actions=_props.actions,imUserType=(_props.loading,_props.nomore,"0");switch(imcore.env){case"c":imUserType="0";break;case"h":imUserType="2";break;case"b":imUserType="3"}new _socket2["default"]({"imUserType":imUserType}).on("event_msg_unread_cnt_change",function(_ref){var flag=_ref.flag,data=_ref.data;data=data&&JSON.parse(data),1===flag&&data.s_unread_cnt>0&&(actions.showNoticeTabUnread(imcore),actions.getNoticeList(imcore,!0))})}},{"key":"scrollList","value":function(){var _props2=this.props,imcore=_props2.imcore,actions=_props2.actions,wrapHeight=this.refs.noticeWrap.clientHeight;this.refs.noticeListH.offsetHeight-wrapHeight-this.refs.noticeWrap.scrollTop<50&&this.canload&&(this.canload=!1,actions.getNoticeList(imcore))}},{"key":"componentWillReceiveProps","value":function(nextProps){var sysMsgList=nextProps.sysMsgList,_props3=this.props,actions=_props3.actions,activeTab=_props3.activeTab;nextProps.activeTab.key!==activeTab.key&&!1===nextProps.firstLoaded&&"notice"===nextProps.activeTab.key&&actions.selectTab(imcore,nextProps.activeTab),this.props.sysMsgList&&sysMsgList.length!==this.props.sysMsgList.length&&sysMsgList.length!==this.props.totalCnt&&(this.canload=!0),nextProps.activeTab.key!==this.props.activeTab.key&&"notice"===this.props.activeTab.key&&_Dialog2["default"].closeAllConfirm({"parent":"main"})}},{"key":"openDialog","value":function(){this.setState({"dialogVisible":!0})}},{"key":"closeDialog","value":function(){this.setState({"dialogVisible":!1})}},{"key":"selectNotice","value":function(imcore,noticeDetail,index){window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.OPEN_NOTICE_LAYER),this.props.actions.hasReadNotice(imcore,noticeDetail,index),this.setState({"showNoticeDetail":!0,"index":index,"noticeDetail":noticeDetail})}},{"key":"closeDetail","value":function(imcore){this.setState({"showNoticeDetail":!1,"index":0}),"b"===imcore.env&&(window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.CLOSE_NOTICE_LAYER))}},{"key":"delNoticeItem","value":function(e,id,type){var _this2=this;e.stopPropagation();var _props4=this.props,actions=_props4.actions,imcore=_props4.imcore;window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.DELETE_NOTICE),this.objectId=id,this.objectType=type,_Dialog2["default"].confirm({"parent":"main","text":"确定要删除通知吗","onOk":function(){actions.deleteNoticeItem(imcore,_this2.objectId,_this2.objectType)}})}},{"key":"render","value":function(){var _this3=this,_props5=this.props,activeTab=_props5.activeTab,sysMsgList=_props5.sysMsgList,imcore=(_props5.totalCnt,_props5.imcore),firstLoaded=(_props5.actions,_props5.nomoreNotice,_props5.loading,_props5.firstLoaded),failMsg=_props5.failMsg;return firstLoaded?0===sysMsgList.length?_react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"hide":"notice"!==activeTab.key},"notice")},_react2["default"].createElement("div",{"className":"no-message"},_react2["default"].createElement("span",null,"暂无通知"))):_react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"hide":"notice"!==activeTab.key},"notice")},_react2["default"].createElement("div",{"className":"noticeWrap","ref":"noticeWrap","onScroll":function(){return _this3.scrollList()}},_react2["default"].createElement("ul",{"className":"notice-list","ref":"noticeListH"},sysMsgList&&sysMsgList.map(function(val,index){return _react2["default"].createElement("li",{"key":index,"onClick":function(){return _this3.selectNotice(imcore,val,index)},"data-id":val.id,"data-type":val.type},_react2["default"].createElement("a",{"href":"javascript:;","className":"close","onClick":function(e){return _this3.delNoticeItem(e,val.id,val.type)}},"×"),_react2["default"].createElement("dl",{"className":"clearfix"},_react2["default"].createElement("dd",null,_react2["default"].createElement("span",{"className":"clearfix"},_react2["default"].createElement("time",null,val.createtime?(0,_utils.dateFormat)(val.createtime,"notice"):""),_react2["default"].createElement("label",null,(0,_utils.getBrief)(val.title,5)),"0"===val.readFlag?_react2["default"].createElement("i",{"className":"dot"},"new"):""),_react2["default"].createElement("p",null,LT.String.substr("<"===val.context.charAt(0)?$(val.context).text():$("<div></div>").html(val.context).text(),"0","84","…")))))}))),this.state.showNoticeDetail?_react2["default"].createElement(_NoticeDetail2["default"],{"index":this.state.index,"canLoad":this.canload,"closeDetail":this.closeDetail.bind(this),"imcore":imcore,"noticeDetail":this.state.noticeDetail}):""):_react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"hide":"notice"!==activeTab.key},"notice")},failMsg?_react2["default"].createElement("div",{"className":"fail-loading"},failMsg,"，请刷新页面重试！"):_react2["default"].createElement("div",{"className":"list-loading"},_react2["default"].createElement("em",null)))}}]),Notice}(_react.Component),mapStateToProps=function(state){return{"activeTab":state.panel.activeTab,"unReadTabs":state.panel.unReadTabs,"sysMsgList":state.notice.sysMsgList,"totalCnt":state.notice.totalCnt,"firstLoaded":state.notice.firstLoaded,"nomoreNotice":state.notice.nomoreNotice,"loading":state.notice.loading,"failMsg":state.notice.failMsg}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.noticeActions,_actions.panelActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(Notice)},"O4/o":function(module,exports,__webpack_require__){"use strict";function userSettingReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:userSettingInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.USERSETTING_DIALOG:return Object.assign({},state,{"dialogVisible":action.payload});default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.userSettingInitialState=void 0,exports.userSettingReducer=userSettingReducer;var _actions=__webpack_require__("IPoy"),userSettingInitialState=exports.userSettingInitialState={"dialogVisible":!1}},"O4JY":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.CompatibleExtType=exports.MsgState=exports.ExtType=void 0;var _ExtType2=__webpack_require__("T5KR"),_ExtType=_interopRequireWildcard(_ExtType2),_MsgState2=__webpack_require__("xKIR"),_MsgState=_interopRequireWildcard(_MsgState2),_CompatibleExtType2=__webpack_require__("B8Ug"),_CompatibleExtType=_interopRequireWildcard(_CompatibleExtType2);exports.ExtType=_ExtType,exports.MsgState=_MsgState,exports.CompatibleExtType=_CompatibleExtType},"OG2G":function(module,exports,__webpack_require__){"use strict";function ImError(errorCode){this.name="ImError",this.message=errorCode||"10000",this.stack=(new Error).stack}Object.defineProperty(exports,"__esModule",{"value":!0}),ImError.prototype=Object.create(Error.prototype),ImError.prototype.constructor=ImError,exports["default"]=ImError},"Oht4":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.urls=exports.tlogs=exports.tabs=void 0;var _tabs=__webpack_require__("4gJL");Object.defineProperty(exports,"tabs",{"enumerable":!0,"get":function(){return _tabs.tabs}});var _tlogs2=__webpack_require__("M3rw"),_tlogs=_interopRequireWildcard(_tlogs2),_urls2=__webpack_require__("BxXn"),_urls=_interopRequireWildcard(_urls2);exports.tlogs=_tlogs,exports.urls=_urls},"OsLH":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function getHistoryContactsList(imcore,hasConnect,fristLoad){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var state,newPageList,curPage,pageList;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(state=getState().historyContacts,!state.loading&&!state.nomore){_context.next=3;break}return _context.abrupt("return");case 3:return dispatch({"type":ActionType.GET_HISTORYCONTACTS_START,"payload":{"loading":!0}}),_context.prev=4,newPageList=[],curPage=0,hasConnect||(curPage=state.curPage),_context.next=10,_api.historyContactsApi.getHistoryContactsAjax(imcore,curPage);case 10:if(pageList=_context.sent,!pageList.curMonthContacts&&(pageList.curMonthContacts=[]),!pageList.earlierContacts&&(pageList.earlierContacts=[]),hasConnect?(newPageList.curMonthContacts=pageList.curMonthContacts,newPageList.earlierContacts=pageList.earlierContacts):(newPageList.curMonthContacts=state.curMonthContacts.concat(pageList.curMonthContacts),newPageList.earlierContacts=state.earlierContacts.concat(pageList.earlierContacts)),(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.GET_HISTORYCONTACTS_SUCC,"payload":{"curMonthContacts":newPageList.curMonthContacts,"earlierContacts":newPageList.earlierContacts,"loading":!1,"curPage":curPage+1,"nomore":pageList.curMonthContacts.length+pageList.earlierContacts.length===0,"firstLoaded":!0}}),!fristLoad){_context.next=17;break}return _context.abrupt("return",{"curMonthContacts":newPageList.curMonthContacts,"earlierContacts":newPageList.earlierContacts,"loading":!1,"curPage":curPage+1,"nomore":pageList.curMonthContacts.length+pageList.earlierContacts.length===0,"firstLoaded":!0});case 17:_context.next=22;break;case 19:_context.prev=19,_context.t0=_context["catch"](4),dispatch({"type":ActionType.GET_HISTORYCONTACTS_FAIL,"payload":{"loading":!1}});case 22:case"end":return _context.stop()}},_callee,_this,[[4,19]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}function changeContactsBySendMsg(imcore,msg){var _this2=this;return function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var state,contact,receiver,senderInfo;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(state=getState(),contact=[],getState().historyContacts.firstLoaded&&msg.state!==_enums.MsgState.SEND_FAILED){_context2.next=3;break}return _context2.abrupt("return");case 3:if(state.panel.activeContact){_context2.next=18;break}if(receiver=msg.msgBody.to,senderInfo={"oppositeUserId":msg.msgBody.ext.extBody.receiverUserId,"oppositeUserKind":msg.msgBody.ext.extBody.receiverKind},contact=state.historyContacts.curMonthContacts.concat(state.historyContacts.earlierContacts).filter(function(v){return v.oppositeImId===receiver}),0!==contact.length){_context2.next=15;break}return _context2.next=10,_api.contactsApi.getOneContact(imcore,senderInfo);case 10:contact=_context2.sent,msg.oppositeImId=msg.msgBody.to,contact=Object.assign({},msg,contact,{"unReadCnt":0}),_context2.next=16;break;case 15:contact=Object.assign({},msg,contact[0],{"unReadCnt":0});case 16:_context2.next=20;break;case 18:contact=getState().panel.activeContact,contact=Object.assign({},msg,contact,{"unReadCnt":0});case 20:(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.UPDATE_HISTORYCONTACTS_BY_SEND_MSG,"payload":{"lastMsg":msg.getLastMsgFormat(),"contact":contact}});case 21:case"end":return _context2.stop()}},_callee2,_this2)}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}()}function changeContactsByReceiveMsg(imcore,msg){var _this3=this;return function(){var _ref3=_asyncToGenerator(_regenerator2["default"].mark(function _callee3(dispatch,getState){var state,sender,senderInfo,receiver,unReadCnt,isfirstLost,newcontact;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,state=getState(),sender=msg.getFrom(),senderInfo=msg.getOppositeUserInfo(imcore),receiver=msg.getTo(),unReadCnt=0,isfirstLost=!0,newcontact=void 0,sender===imcore.userInfo.oppositeImId&&(sender=receiver),!state.panel.activeContact||state.panel.activeContact.oppositeImId!==sender){_context3.next=14;break}return unReadCnt=0,dispatch({"type":ActionType.UPDATE_CONTACTS_BY_RECEIVE_MSG,"payload":Object.assign(state.panel.activeContact,msg.getLastMsgFormat(),{"unReadCnt":unReadCnt})}),dispatch({"type":ActionType.UPDATE_HISTORYCONTACTS_BY_RECEIVE_MSG,"payload":Object.assign(state.panel.activeContact,msg.getLastMsgFormat(),{"unReadCnt":unReadCnt})}),_context3.abrupt("return");case 14:newcontact=state.historyContacts.curMonthContacts.concat(state.historyContacts.earlierContacts).filter(function(v){return v.oppositeImId===sender}),0===newcontact.length||(unReadCnt=msg.getFrom()===imcore.userInfo.oppositeImId?0:newcontact[0].unReadCnt+1,dispatch({"type":ActionType.UPDATE_HISTORYCONTACTS_BY_RECEIVE_MSG,"payload":Object.assign(newcontact[0],msg.getLastMsgFormat(),{"unReadCnt":unReadCnt})})),_context3.next=21;break;case 18:_context3.prev=18,_context3.t0=_context3["catch"](0),imcore.handleErr(_context3.t0);case 21:case"end":return _context3.stop()}},_callee3,_this3,[[0,18]])}));return function(_x5,_x6){return _ref3.apply(this,arguments)}}()}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.getHistoryContactsList=getHistoryContactsList,exports.changeContactsBySendMsg=changeContactsBySendMsg,exports.changeContactsByReceiveMsg=changeContactsByReceiveMsg;var _enums=(__webpack_require__("E9QE"),__webpack_require__("O4JY")),_config=(__webpack_require__("c3kU"),__webpack_require__("CJQX")),_ActionType=(_interopRequireDefault(_config),__webpack_require__("TV+w")),ActionType=_interopRequireWildcard(_ActionType),_contacts=__webpack_require__("FUHg"),_panel=(_interopRequireWildcard(_contacts),__webpack_require__("dLnD")),_api=(_interopRequireWildcard(_panel),__webpack_require__("wVNl")),_utils2=__webpack_require__("PQSX")},"P20F":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy"),_constants=__webpack_require__("E9QE"),_Dialog=__webpack_require__("W7fc"),_constants2=__webpack_require__("acFS"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),Shield=function(_Component){function Shield(props){_classCallCheck(this,Shield);var _this=_possibleConstructorReturn(this,(Shield.__proto__||Object.getPrototypeOf(Shield)).call(this,props));return _this.state={"tipDialog":!1},_this}return _inherits(Shield,_Component),_createClass(Shield,[{"key":"componentDidMount","value":function(){var _props=this.props;_props.imcore,_props.actions,_props.activeContact,_props.inBlack}},{"key":"setBlack","value":function setBlack(){var that=this,_props2=this.props,imcore=_props2.imcore,actions=_props2.actions,activeContact=_props2.activeContact,inBlack=_props2.inBlack,dialog=_props2.dialog,tipDialog=this.state.tipDialog;inBlack?"c"===imcore.env?actions.removeBlack(imcore,activeContact,inBlack,function(){actions.hideUserSetting(),actions.changeText(imcore,inBlack)}):"b"===imcore.env&&(window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.SHIELD_MSG_RELIVE),!LT.Cookie.get(_constants2.enums.COOKIE_KEY_DELETESHIELD)||eval(LT.Cookie.get(_constants2.enums.COOKIE_KEY_DELETESHIELD))?(actions.openDialog(),this.setState({"tipDialog":!1})):actions.removeBlack(imcore,activeContact,inBlack,function(){actions.hideUserSetting(),actions.changeText(imcore,inBlack)})):("b"===imcore.env&&(window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.SHIELD_MSG)),!LT.Cookie.get(_constants2.enums.COOKIE_KEY_SHIELD)||eval(LT.Cookie.get(_constants2.enums.COOKIE_KEY_SHIELD))?(actions.openDialog(),this.setState({"tipDialog":!1})):actions.addBlack(imcore,activeContact,inBlack,function(){actions.hideUserSetting(),actions.changeText(imcore,inBlack)}))}},{"key":"toggleBlack","value":function(){var _props3=this.props,imcore=_props3.imcore,actions=_props3.actions,activeContact=_props3.activeContact,inBlack=_props3.inBlack;if("b"===imcore.env){inBlack?(0,_config2["default"])(imcore.env).tlogs.SHIELD_MSG_WINDOW:(0,_config2["default"])(imcore.env).tlogs.SHIELD_MSG_RELIVE_WINDOW;window.tlog=window.tlog||[],window.tlog.push((0,_config2["default"])(imcore.env).tlogs.SHIELD_MSG)}inBlack?actions.removeBlack(imcore,activeContact,inBlack,function(){actions.hideUserSetting()}):actions.addBlack(imcore,activeContact,inBlack,function(){actions.hideUserSetting()}),actions.changeText(imcore,inBlack)}},{"key":"shieldDialogTips","value":function(){var _props4=this.props,imcore=_props4.imcore,activeContact=(_props4.actions,_props4.activeContact),inBlack=_props4.inBlack,text=void 0;return"c"===imcore.env?activeContact.oppositeUserKind==_constants.UserType.USER_TYPE_H?text="屏蔽后，你将无法应聘对方发布的职位，对方将不能查看你的简历信息以及给你发送消息。":activeContact.oppositeUserKind==_constants.UserType.USER_TYPE_C&&(text="屏蔽后，将解除双方现有关系，对方将不能给你发消息。"):"b"===imcore.env&&(text=inBlack?"是否确认解除对该候选职聊消息的屏蔽？":"屏蔽后您将不会再收到候选人的职聊信息！"),text}},{"key":"showShielddialog","value":function(status){var _props5=this.props,inBlack=(_props5.imcore,_props5.inBlack);this.setState({"tipDialog":!status}),inBlack?LT.Cookie.set(_constants2.enums.COOKIE_KEY_DELETESHIELD,status,360,"/"):LT.Cookie.set(_constants2.enums.COOKIE_KEY_SHIELD,status,360,"/")}},{"key":"closeShieldDialog","value":function(){var _props6=this.props,actions=(_props6.imcore,_props6.actions);_props6.activeContact,_props6.inBlack,_props6.dialogVisible;actions.closeDialog(),actions.hideUserSetting()}},{"key":"render","value":function(){var _this2=this,_props7=this.props,imcore=_props7.imcore,inBlack=(_props7.actions,_props7.activeContact,_props7.inBlack),dialogVisible=_props7.dialogVisible,tipDialog=this.state.tipDialog;return _react2["default"].createElement("a",{"className":(0,_classnames2["default"])({"btn-controller":"b"===imcore.env,"sheild-resume":"b"===imcore.env}),"href":"javascript:;","onClick":function(){return _this2.setBlack()}},inBlack?"解除屏蔽":"c"===imcore.env?"屏蔽":"屏蔽消息",_react2["default"].createElement(_Dialog.ChatDialog,{"id":"shield","visible":dialogVisible,"onClose":function(){_this2.closeShieldDialog()},"header":!0,"backBtn":!1,"footer":!1,"title":"温馨提示","position":"bottom","width":"100%"},_react2["default"].createElement("div",{"className":"shield-dialog-box"},_react2["default"].createElement("p",{"className":"text-center"},this.shieldDialogTips()),_react2["default"].createElement("div",{"className":"btns-group"},_react2["default"].createElement("label",{"onClick":function(){return _this2.showShielddialog(tipDialog)}},_react2["default"].createElement("em",{"className":(0,_classnames2["default"])("webim-icons16",{"icons16-checkbox":!tipDialog,"icons16-checkbox-checked":tipDialog})}),"不再显示"),_react2["default"].createElement("a",{"href":"javascript:;","onClick":function(){return _this2.toggleBlack()},"className":"btn btn-primary btn-mini"},"c"===imcore.env?"确认屏蔽":inBlack?"解除屏蔽":"确认屏蔽")))))}}]),Shield}(_react.Component),mapStateToProps=function(state){return{"activeContact":state.panel.activeContact,"inBlack":state.shield.inBlack,"dialogVisible":state.shield.dialogVisible}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.shieldActions,_actions.userSettingActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(Shield)},"PMgr":function(module,exports,__webpack_require__){"use strict";(function(process){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==(void 0===call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+(void 0===superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function warnAboutReceivingStore(){didWarnAboutReceivingStore||(didWarnAboutReceivingStore=!0,(0,_warning2["default"])("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/reactjs/react-redux/releases/tag/v2.0.0 for the migration instructions."))}function createProvider(){var _Provider$childContex,storeKey=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",subKey=arguments[1],subscriptionKey=subKey||storeKey+"Subscription",Provider=function(_Component){function Provider(props,context){_classCallCheck(this,Provider);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));return _this[storeKey]=props.store,_this}return _inherits(Provider,_Component),Provider.prototype.getChildContext=function(){var _ref;return _ref={},_ref[storeKey]=this[storeKey],_ref[subscriptionKey]=null,_ref},Provider.prototype.render=function(){return _react.Children.only(this.props.children)},Provider}(_react.Component);return"production"!==process.env.NODE_ENV&&(Provider.prototype.componentWillReceiveProps=function(nextProps){this[storeKey]!==nextProps.store&&warnAboutReceivingStore()}),Provider.propTypes={"store":_PropTypes.storeShape.isRequired,"children":_propTypes2["default"].element.isRequired},Provider.childContextTypes=(_Provider$childContex={},_Provider$childContex[storeKey]=_PropTypes.storeShape.isRequired,_Provider$childContex[subscriptionKey]=_PropTypes.subscriptionShape,_Provider$childContex),Provider}Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.createProvider=createProvider;var _react=__webpack_require__("Jmof"),_propTypes=__webpack_require__("KSGD"),_propTypes2=_interopRequireDefault(_propTypes),_PropTypes=__webpack_require__("faAt"),_warning=__webpack_require__("byaS"),_warning2=_interopRequireDefault(_warning),didWarnAboutReceivingStore=!1;exports["default"]=createProvider()}).call(exports,__webpack_require__("W2nU"))},"PQSX":function(module,exports,__webpack_require__){"use strict";function dateFormat(inputTime){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",now=new Date;if("notice"===type){var str=inputTime.replace(/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/,function(){return(arguments.length<=1?void 0:arguments[1])+"/"+(arguments.length<=2?void 0:arguments[2])+"/"+(arguments.length<=3?void 0:arguments[3])+" "+(arguments.length<=4?void 0:arguments[4])+":"+(arguments.length<=5?void 0:arguments[5])+":"+(arguments.length<=6?void 0:arguments[6])});inputTime=new Date(str)}if("msg"===type){if(inputTime=new Date(inputTime),LT.Date.format(inputTime,"yyyy-MM-dd")===LT.Date.format(now,"yyyy-MM-dd"))return["",LT.Date.format(inputTime,"HH:mm")];if(inputTime.getFullYear()===now.getFullYear())return[LT.Date.format(inputTime,"MM-dd"),LT.Date.format(inputTime,"HH:mm")];if(inputTime.getFullYear()!==now.getFullYear())return[LT.Date.format(inputTime,"yyyy-MM-dd"),LT.Date.format(inputTime,"HH:mm")]}else if("history"===type){if(inputTime=new Date(inputTime),LT.Date.format(inputTime,"yyyy-MM-dd")===LT.Date.format(now,"yyyy-MM-dd"))return["今天",LT.Date.format(inputTime,"HH:mm:ss")];if(inputTime.getFullYear()===now.getFullYear())return[LT.Date.format(inputTime,"MM-dd"),LT.Date.format(inputTime,"HH:mm:ss")];if(inputTime.getFullYear()!==now.getFullYear())return[LT.Date.format(inputTime,"yyyy-MM-dd"),LT.Date.format(inputTime,"HH:mm:ss")]}else{if(LT.Date.format(inputTime,"yyyy-MM-dd")===LT.Date.format(now,"yyyy-MM-dd"))return LT.Date.format(inputTime,"HH:mm");if(inputTime.getFullYear()===now.getFullYear())return LT.Date.format(inputTime,"MM-dd");if(inputTime.getFullYear()!==now.getFullYear())return LT.Date.format(inputTime,"yyyy-MM")}}function timeVisibleFormat(arr){var timeArr=[];return arr.map(function(v){var _dateFormat=dateFormat(v.timestamp,"msg"),_dateFormat2=_slicedToArray(_dateFormat,2),day=_dateFormat2[0],time=_dateFormat2[1];return""===day&&-1===timeArr.indexOf(time)?(timeArr.push(time),v.time=time):""!==day&&-1===timeArr.indexOf(day+" "+time)&&(timeArr.push(day+" "+time),v.time=day+" "+time),v})}function historyTimeVisibleFormat(arr){var dayArr=[];return arr.map(function(v){var _dateFormat3=dateFormat(v.timestamp,"history"),_dateFormat4=_slicedToArray(_dateFormat3,2),day=_dateFormat4[0],time=_dateFormat4[1];return-1===dayArr.indexOf(day)&&(dayArr.push(day),v.day=day),v.time=time,v})}function publish(imcore,dispatch,action){return action=Object.assign({},action,{"pageId":imcore.pageId}),dispatch(action),imcore.publish(action.type,action)}function hKilledAccountAlert(imcore,data){("300330003"===data.code||"h"===imcore.env&&"5000"===data.code)&&vdialog.error(data.msg)}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.comparePropsState=exports.getBrief=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.dateFormat=dateFormat,exports.timeVisibleFormat=timeVisibleFormat,exports.historyTimeVisibleFormat=historyTimeVisibleFormat,exports.publish=publish,exports.hKilledAccountAlert=hKilledAccountAlert;var _config=__webpack_require__("CJQX"),_immutable=(function(obj){obj&&obj.__esModule}(_config),__webpack_require__("BYKG"));exports.getBrief=function(){var str=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",len=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return str&&(str=str.replace(/\n/gm,""),str=str.length===len?""+str.slice(0,len):str.length>len?str.slice(0,len)+"...":str),str},exports.comparePropsState=function(){var thisProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},thisState=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},nextProps=arguments[2],nextState=arguments[3];if(Object.keys(thisProps).length!==Object.keys(nextProps).length||Object.keys(thisState).length!==Object.keys(nextState).length)return!0;for(var key in nextProps)if(thisProps[key]!==nextProps[key]||!(0,_immutable.is)(thisProps[key],nextProps[key]))return!0;for(var _key in nextState)if(thisState[_key]!==nextState[_key]||!(0,_immutable.is)(thisState[_key],nextState[_key]))return!0;return!1}},"PUFv":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__("RH2O"),_enums=(__webpack_require__("c3kU"),__webpack_require__("O4JY")),_cMessageActions=(__webpack_require__("IPoy"),__webpack_require__("QidO")),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames);__webpack_require__("AZB4");var NameCard=function(_Component){function NameCard(props){_classCallCheck(this,NameCard);var _this=_possibleConstructorReturn(this,(NameCard.__proto__||Object.getPrototypeOf(NameCard)).call(this,props));return _this.state={"sendStatus":props.sendStatus||!1},_this}return _inherits(NameCard,_Component),_createClass(NameCard,[{"key":"componentDidMount","value":function(){}},{"key":"componentWillReceiveProps","value":function(nextProps){nextProps.message.sendStatus!==this.props.message.sendStatus&&this.setState({"sendStatus":nextProps.message.sendStatus})}},{"key":"sendResume","value":function(event){event.preventDefault();var _props=this.props,dispatch=_props.dispatch,imcore=_props.imcore,message=_props.message,that=(_props.actions,this);this.state.sendStatus||dispatch((0,_cMessageActions.canApply)(imcore,message.jobKind,message.jobId,function(){window.tlog=window.tlog||[],tlog.push("c:C000010795"),that.setState({"sendStatus":!0})}))}},{"key":"render","value":function(){var _this2=this,message=this.props.message,sendStatus=this.state.sendStatus;return message.state===_enums.MsgState.INITIAL?_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("img",{"src":"../../../images/message/sending.gif"})):_react2["default"].createElement("div",{"className":"name-card content"},_react2["default"].createElement("a",{"className":"name-card-main","href":message.resumeUrl,"target":"_blank"},_react2["default"].createElement("dl",null,_react2["default"].createElement("dt",null,_react2["default"].createElement("i",{"className":"webim-icons32 icons32-resume"})),_react2["default"].createElement("dd",null,_react2["default"].createElement("ul",null,_react2["default"].createElement("li",null,_react2["default"].createElement("span",{"className":"title","title":message.name},message.name),_react2["default"].createElement("span",null,message.sex||"")),_react2["default"].createElement("li",null,_react2["default"].createElement("span",null,null!=message.workyear?message.workyear?message.workyear+"年经验":"少于1年工作经验":""),_react2["default"].createElement("span",{"className":"dq-name","title":message.dq||""},message.dq||"")),_react2["default"].createElement("li",null,_react2["default"].createElement("span",{"className":"job-tit","title":message.title},message.title||""),_react2["default"].createElement("span",null,"|"),_react2["default"].createElement("span",{"className":"cpy-tit","title":message.company},message.company||"")),_react2["default"].createElement("li",null,_react2["default"].createElement("em",{"className":(0,_classnames2["default"])({"muted":sendStatus}),"onClick":function(event){_this2.sendResume(event)}},sendStatus?"已发送":"发送简历")))))))}}]),NameCard}(_react.Component);exports["default"]=(0,_reactRedux.connect)(null,null)(NameCard)},"Pbom":function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_react),_reactRedux=(__webpack_require__("2KeS"),__webpack_require__("RH2O"));__webpack_require__("9ae/");var Toast=function(_Component){function Toast(){return _classCallCheck(this,Toast),_possibleConstructorReturn(this,(Toast.__proto__||Object.getPrototypeOf(Toast)).apply(this,arguments))}return _inherits(Toast,_Component),_createClass(Toast,[{"key":"render","value":function(){var _props$toast=this.props.toast,text=_props$toast.text,top=_props$toast.top,show=_props$toast.show,compstyle=Object.assign({},{"top":top}),visible=void 0===show||show?"block":"none",mergedStyles=Object.assign(compstyle,{"display":visible});return _react2["default"].createElement("div",null,_react2["default"].createElement("div",{"style":mergedStyles,"className":"toast"},text))}}]),Toast}(_react.Component),mapStateToProps=function(state){return{"toast":state.toast}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,null)(Toast)},"Plm0":function(module,exports,__webpack_require__){"use strict";function dragDistance(_ref){var _ref$distanceX=_ref.distanceX,distanceX=void 0===_ref$distanceX?0:_ref$distanceX,_ref$distanceY=_ref.distanceY,distanceY=void 0===_ref$distanceY?0:_ref$distanceY;return function(dispatch,getState){var wh=$(window).height(),ww=$(window).width(),top=Math.max(0,getState().drag.top+distanceY),right=Math.max(0,getState().drag.right-distanceX);right>ww-threshold.right&&(right=ww-threshold.right),top>wh-threshold.top&&(top=wh-threshold.top),dispatch({"type":ActionType.DRAG_DISTANCE,"payload":{"top":top,"right":right}})}}function dragWindowResize(){return function(dispatch,getState){var wh=$(window).height(),ww=$(window).width(),top=getState().drag.top,right=getState().drag.right;right>ww-threshold.right&&(right=ww-threshold.right),top>wh-threshold.top&&(top=wh-threshold.top),dispatch({"type":ActionType.DRAG_DISTANCE,"payload":{"top":top,"right":right}})}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.dragDistance=dragDistance,exports.dragWindowResize=dragWindowResize;var _ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType),threshold={"top":120,"right":380}},"PmDn":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy"),_constants=__webpack_require__("E9QE"),_Shield=(__webpack_require__("W7fc"),__webpack_require__("P20F")),_Shield2=_interopRequireDefault(_Shield),_Report=__webpack_require__("rNCW"),_Report2=_interopRequireDefault(_Report);__webpack_require__("cOiO");var UserSetting=function(_Component){function UserSetting(props){return _classCallCheck(this,UserSetting),_possibleConstructorReturn(this,(UserSetting.__proto__||Object.getPrototypeOf(UserSetting)).call(this,props))}return _inherits(UserSetting,_Component),_createClass(UserSetting,[{"key":"componentDidMount","value":function(){}},{"key":"render","value":function(){var _props=this.props,imcore=_props.imcore,activeContact=(_props.actions,_props.activeContact),dialogVisible=_props.dialogVisible;return _react2["default"].createElement("div",{"ref":"usersettingBtn","className":(0,_classnames2["default"])("shield-box",{"hide":!dialogVisible})},activeContact.oppositeUserKind!=_constants.UserType.USER_TYPE_B&&_react2["default"].createElement(_Shield2["default"],{"imcore":imcore}),"c"===imcore.env&&_react2["default"].createElement(_Report2["default"],{"imcore":imcore}))}}]),UserSetting}(_react.Component),mapStateToProps=function(state){return{"activeContact":state.panel.activeContact,"dialogVisible":state.userSetting.dialogVisible}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.userSettingActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(UserSetting)},"PyTE":function(module,exports,__webpack_require__){"use strict";function reportReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:reportInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.REPORT_CODE:return Object.assign({},state,{"reportCode":action.payload});case _actions.ActionType.REPORT_DIALOG:return Object.assign({},state,{"dialogVisible":action.payload});default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.reportInitialState=void 0,exports.reportReducer=reportReducer;var _actions=__webpack_require__("IPoy"),reportInitialState=exports.reportInitialState={"reportCode":5,"dialogVisible":!1}},"Q1LG":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_35.535757d0.png"},"Q3sl":function(module,exports){},"Q4WQ":function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__("e6+Q"),invariant=__webpack_require__("cxPT"),ReactPropTypesSecret=__webpack_require__("gt/O");module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){secret!==ReactPropTypesSecret&&invariant(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={"array":shim,"bool":shim,"func":shim,"number":shim,"object":shim,"string":shim,"symbol":shim,"any":shim,"arrayOf":getShim,"element":shim,"instanceOf":getShim,"node":shim,"objectOf":getShim,"oneOf":getShim,"oneOfType":getShim,"shape":getShim,"exact":getShim};return ReactPropTypes.checkPropTypes=emptyFunction,ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},"Q8Uo":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_23.80c14b07.png"},"Q9QW":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.USER_TYPE_C=0,exports.USER_TYPE_B=1,exports.USER_TYPE_H=2,exports.COOKIE_KEY_SETTING_MESSAGE="fe_all_messageremind",exports.COOKIE_KEY_SETTING_DIALOG="fe_all_sendmessage",exports.DEFAULT_TOAST_TIME=2500,exports.HISTORY_PAGESIZE=20,exports.COOKIE_KEY_SHIELD="fe_all_shield",exports.COOKIE_KEY_DELETESHIELD="fe_all_deleteshield",exports.COOKIE_KEY_CUR_TAB="fe_all_activetab"},"QGoG":function(module,exports,__webpack_require__){"use strict";(function(process){function defaultMergeProps(stateProps,dispatchProps,ownProps){return _extends({},ownProps,stateProps,dispatchProps)}function wrapMergePropsFunc(mergeProps){return function(dispatch,_ref){var displayName=_ref.displayName,pure=_ref.pure,areMergedPropsEqual=_ref.areMergedPropsEqual,hasRunOnce=!1,mergedProps=void 0;return function(stateProps,dispatchProps,ownProps){var nextMergedProps=mergeProps(stateProps,dispatchProps,ownProps);return hasRunOnce?pure&&areMergedPropsEqual(nextMergedProps,mergedProps)||(mergedProps=nextMergedProps):(hasRunOnce=!0,mergedProps=nextMergedProps,"production"!==process.env.NODE_ENV&&(0,_verifyPlainObject2["default"])(mergedProps,displayName,"mergeProps")),mergedProps}}}function whenMergePropsIsFunction(mergeProps){return"function"==typeof mergeProps?wrapMergePropsFunc(mergeProps):void 0}function whenMergePropsIsOmitted(mergeProps){return mergeProps?void 0:function(){return defaultMergeProps}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.defaultMergeProps=defaultMergeProps,exports.wrapMergePropsFunc=wrapMergePropsFunc,exports.whenMergePropsIsFunction=whenMergePropsIsFunction,exports.whenMergePropsIsOmitted=whenMergePropsIsOmitted;var _verifyPlainObject=__webpack_require__("Htzn"),_verifyPlainObject2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_verifyPlainObject),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports["default"]=[whenMergePropsIsFunction,whenMergePropsIsOmitted]}).call(exports,__webpack_require__("W2nU"))},"QidO":function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function cSendResume(imcore,info,text){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var userInfo,contact;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.prev=0,userInfo=imcore.userInfo,(contact=getState().panel.activeContact)&&(info.id||info.oppositeImId===contact.oppositeImId)){_context2.next=7;break}return _context2.next=6,_api.contactsApi.getOneContact(imcore,info);case 6:contact=_context2.sent;case 7:dispatch(_actions.panelActions.selectContact(imcore,contact,function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee(contact,inBlack){var msg;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:msg=void 0,msg=new _send.TxtMsg,msg.set({"from":userInfo,"to":contact,"data":"","extType":_enums.ExtType.MESSAGE_RESUME,"title":userInfo.oppositeUserTitle,"name":userInfo.oppositeUserName,"userId":userInfo.oppositeUserId,"company":userInfo.oppositeUserCompany,"resumeUrl":LT.Env.cRoot+"resume/getdefaultresume/"}),dispatch(_actions.messageActions.sendMsg(imcore,msg,{"success":function(){text&&(msg=new _send.TxtMsg,msg.set({"from":userInfo,"to":contact,"extType":_enums.ExtType.MESSAGE_SEND_TOOLTIP,"data":text}),dispatch(_actions.messageActions.sendMsg(imcore,msg))),dispatch(_actions.toastActions.openToast({"text":"委托成功！"}))},"fail":function(err){text&&(msg=new _send.TxtMsg,msg.set({"from":userInfo,"to":contact,"extType":_enums.ExtType.MESSAGE_SEND_TOOLTIP,"data":text}),dispatch(_actions.messageActions.sendMsg(imcore,msg)))}}));case 4:case"end":return _context.stop()}},_callee,_this)}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}())),_context2.next=13;break;case 10:_context2.prev=10,_context2.t0=_context2["catch"](0),imcore.handleErr(_context2.t0);case 13:case"end":return _context2.stop()}},_callee2,_this,[[0,10]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}function cSendJobCardAndApplyResume(imcore,options){var _this2=this;return function(){var _ref3=_asyncToGenerator(_regenerator2["default"].mark(function _callee4(dispatch,getState){var jobDetail,oppositeImId,jobKind,jobId,userInfo,greetingFlag,greetingText,msg;return _regenerator2["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:try{jobDetail=options.jobDetail,oppositeImId=options.oppositeImId,jobKind=jobDetail.jobKind,jobId=jobDetail.jobId,userInfo=imcore.userInfo,greetingFlag=getState().setting.setting.greeting,greetingText=getState().setGreeting.greetingText,msg=void 0,dispatch(_actions.panelActions.selectContact(imcore,options,function(){var _ref4=_asyncToGenerator(_regenerator2["default"].mark(function _callee3(contact,inBlack){var data;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,canSendExtType(imcore,jobKind,jobId);case 2:data=_context3.sent,data.flag?data.data.canSendJobCard&&dispatch(canSendJobCard(imcore,userInfo,contact,jobDetail,greetingFlag,greetingText,jobKind,jobId)):vdialog.error(data.msg);case 4:case"end":return _context3.stop()}},_callee3,_this2)}));return function(_x7,_x8){return _ref4.apply(this,arguments)}}()))}catch(e){imcore.handleErr(e)}case 1:case"end":return _context4.stop()}},_callee4,_this2)}));return function(_x5,_x6){return _ref3.apply(this,arguments)}}()}function canSendJobCard(imcore,userInfo,contact,jobDetail,greetingFlag,greetingText,jobKind,jobId){var _this3=this;return function(){var _ref5=_asyncToGenerator(_regenerator2["default"].mark(function _callee6(dispatch,getState){var msg;return _regenerator2["default"].wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:msg=new _send.TxtMsg,msg.set({"from":userInfo,"to":contact,"data":"","extType":_enums.ExtType.MESSAGE_SEND_JOB,"dqName":jobDetail.dqName,"title":jobDetail.title,"salary":jobDetail.salary,"jobId":jobDetail.jobId,"jobKind":jobDetail.jobKind,"company":jobDetail.company,"jobHref":jobDetail.jobHref}),dispatch(_actions.messageActions.sendMsg(imcore,msg,{"success":function(){var _ref6=_asyncToGenerator(_regenerator2["default"].mark(function _callee5(){return _regenerator2["default"].wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return greetingFlag&&(msg=new _send.TxtMsg,msg.set({"from":userInfo,"to":contact,"data":greetingText,"extType":_enums.ExtType.MESSAGE_SEND_TOOLTIP}),dispatch(_actions.messageActions.sendMsg(imcore,msg))),_context5.next=3,sendJobCardBack(imcore,jobKind,jobId);case 3:case"end":return _context5.stop()}},_callee5,_this3)}));return function(){return _ref6.apply(this,arguments)}}()}));case 3:case"end":return _context6.stop()}},_callee6,_this3)}));return function(_x9,_x10){return _ref5.apply(this,arguments)}}()}function canApply(imcore,jobKind,jobId,_success){var _this5=this;return function(){var _ref9=_asyncToGenerator(_regenerator2["default"].mark(function _callee9(dispatch,getState){var inBlack,contact,arr,codesData,codesStr,canApplyData,userInfo,msg;return _regenerator2["default"].wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(inBlack=getState().shield.inBlack,contact=getState().panel.activeContact,!_api.messageApi.checkIfCansend(imcore,contact,inBlack)){_context9.next=20;break}return arr=[],_context9.next=6,getResumesCodes();case 6:if(codesData=_context9.sent,codesStr=void 0,window.tlog=window.tlog||[],tlog.push("c:c_jobdetail_applycv_apply"),!codesData.flag){_context9.next=20;break}return codesData.data.data.resume.forEach(function(item){item.default_res_encode&&(arr.includes(item.res_id_encode)||arr.push(item.res_id_encode))}),codesStr=arr.toString(),$('.send-message [data-selector="btn-send"]').LoadingUI("show"),_context9.next=16,saveApply(jobKind,jobId,codesStr);case 16:canApplyData=_context9.sent,$('.send-message [data-selector="btn-send"]').LoadingUI("hide"),userInfo=imcore.userInfo,canApplyData.flag?(msg=new _send.TxtMsg,msg.set({"extType":_enums.ExtType.MESSAGE_SEND_APPLYRESUME,"from":userInfo,"to":contact,"jobId":jobId,"resCodes":codesStr,"title":userInfo.oppositeUserTitle,"name":userInfo.oppositeUserName,"userId":userInfo.oppositeImId,"company":userInfo.oppositeUserCompany,"resumeUrl":LT.Env.cRoot+"resume/detail/?res_id_encode="+codesStr}),dispatch(_actions.messageActions.sendMsg(imcore,msg,{"success":function(){$("body .btn-apply").removeClass("btn-apply").removeAttr("data-selector").addClass("btn-apply-disabled").html("简历已发送"),_success&&_success()},"fail":function(){console.log("fail")}}))):vdialog.error(canApplyData.msg);case 20:case"end":return _context9.stop()}},_callee9,_this5)}));return function(_x13,_x14){return _ref9.apply(this,arguments)}}()}function canSendExtType(imcore,jobKind,jobId){return(0,_utils.pajax)({"url":LT.Env.cRoot+"msg/canSendExtType.json","data":{"jobKind":jobKind,"jobId":jobId},"type":"post"})}function sendJobCardBack(imcore,jobKind,jobId){return(0,_utils.pajax)({"url":LT.Env.cRoot+"msg/recordSendJobCard.json","data":{"jobKind":jobKind,"jobId":jobId},"type":"post"})}function getResumesCodes(){return(0,_utils.pajax)({"url":LT.Env.cRoot+"apply/getresumes.json","type":"post"})}function saveApply(jobKind,jobId,resCodes){return(0,_utils.pajax)({"url":LT.Env.cRoot+"apply/saveapply.json","data":{"res_id_encodes":resCodes,"apply_prior":0,"job_id":jobId,"job_kind":jobKind},"type":"post"})}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.canApply=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_regenerator);exports.cSendResume=cSendResume,exports.cSendJobCardAndApplyResume=cSendJobCardAndApplyResume;var _api=__webpack_require__("wVNl"),_enums=__webpack_require__("O4JY"),_send=__webpack_require__("6svF"),_utils=__webpack_require__("c3kU"),_actions=__webpack_require__("IPoy");exports.canApply=canApply},"QyTA":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function Connection(options){switch(this.options=options||{},this.listen(options.connectOpts),this.listenNetwork(this.onOnline,this.onOffline),this.isOpenState=!1,this._storage=window.lpStorage,this.beExited=!1,this.linkTime=0,this.accountQuit=!1,this.reConnectTime=0,this.config=(0,_config.setImConfig)(this.options.env),this.options.env){case"c":this.imUserType="0";break;case"h":this.imUserType="2";break;case"b":this.imUserType="3"}var that=this;that.SocketMultTab=new _socket2["default"]({"imUserType":this.imUserType}),that.SocketMultTab.on("error",function(err){console.log("err",err),err.connectLost?that.onClosed(err):err.error&&that.userQuit(err||"")}),that.SocketMultTab.on("success",function(data){that.onOpened(),that.isOpenState=!0,that.onReconnect()}),that.SocketMultTab.socket.getToken(function(data){that.options.callback&&that.options.callback(Object.assign({},data,{"imUserType":that.imUserType,"noFuc":that.linkTime>0})),that.linkTime++,that.imClientId=data.imClientId,that.accessToken=data.accessToken,that.imId=data.imId,that.userId=data.userId,that.isOpenState=data.isOpenState,that.isOpenState||that.onReconnect()}),that.SocketMultTab.on("imReceive",function(msg){that.receive(msg)}),that.SocketMultTab.on("imReaded",function(msg){that.onSyncReaded(msg.toImId)})}Object.defineProperty(exports,"__esModule",{"value":!0});var _socket=(__webpack_require__("3e+o"),__webpack_require__("Tdzb")),_socket2=_interopRequireDefault(_socket);__webpack_require__("z56A");var _config=__webpack_require__("GbPe"),_Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog);window.WebIM={},WebIM.connection=Connection,WebIM.utils={},window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,WebIM.utils.getFileUrl=function(fileInputId){var uri={"url":"","filename":"","filetype":"","data":""},fileObj="string"==typeof fileInputId?document.getElementById(fileInputId):fileInputId;if(!fileObj)return uri;if(window.URL&&window.URL.createObjectURL){var fileItems=fileObj.files||fileObj.file;if(fileItems.length>0){var u=fileItems.item(0);uri.data=u,uri.url=window.URL.createObjectURL(u),uri.filename=u.name||""}}else{fileInputId.select(),fileInputId.blur();var path=document.selection.createRange().text;uri.url=path,uri.filename=path,uri.data={},uri.data.size=0}var index=uri.filename.lastIndexOf(".");return-1!=index&&(uri.filetype=uri.filename.substring(index+1).toLowerCase()),uri},WebIM.utils.uploadFile=function(uploadObj){$.ajaxFileUpload({"url":"https://im.liepin.com/upload/","secureuri":!1,"fileElementId":uploadObj.inputElm.id,"dataType":"json","data":{"type":"img","imApp":"1"},"onAppend":function(){uploadObj.onFileAppend()},"success":function(data,status){1===data.flag?uploadObj.onFileUploadComplete(data.data):(_Dialog2["default"].alert({"parent":"chat","width":300,"text":data.msg}),uploadObj.onFileUploadError(data))},"error":function(data,status,e){uploadObj.onFileUploadError(data)}})},Connection.prototype.listen=function(opt){var _this=this;return this.onClosed=function(message){opt.onClosed()},this.onTextMessage=function(message){opt.onTextMessage(message)},this.onSyncReaded=function(toImId){opt.onSyncReaded(toImId)},this.onReconnect=function(data){opt.onReconnect(data)},this.onPictureMessage=function(message){opt.onPictureMessage(message)},this.onAudioMessage=function(message){opt.onAudioMessage(message)},this.onBreakMessge=function(message){opt.onBreakMessge(message)},this.onOpened=function(message){opt.onOpened(message)},this.onOnline=function(message){opt.onOnline(message),_this.onReconnect(!0)},this.onOffline=function(message){opt.onOffline(message)},this.onError=function(message){opt.onError(message)},this},Connection.prototype.send=function(opt,callback){var that=this;that.isOpenState&&window.name&&"grcw"!==window.name?that._sendMsg(opt,callback):that.SocketMultTab.socket.connect(function(){that._sendMsg(opt,callback)})},Connection.prototype._sendMsg=function(opt,callback){var that=this,bodies=null;"txt"==opt.type&&(bodies={"bodies":[{"msg":opt.msg,"type":opt.type}]}),"img"==opt.type&&(bodies={"bodies":[{"file_length":opt.body.file_length,"filename":opt.body.filename,"size":{"height":opt.body.size.height,"width":opt.body.size.width},"type":opt.type,"thumb":opt.body.thumbUrl,"url":opt.url}]});var opts=Object.assign({},opt,bodies),url=window.WebSocket&&window.WebSocket.prototype.send?"https://im.liepin.com/send.json":"https://im.liepin.com/send2.json";LT.ajax({"url":url,"type":"POST","data":{"imClientId":that.imClientId,"imId":that.imId,"imUserType":that.imUserType,"oppositeImId":opts.to,"oppositeImUserType":opts.totype,"msgTime":opts.timestamp,"chatType":"0","payload":JSON.stringify({"ext":opts.ext,"bodies":opts.bodies}),"imApp":"1","msgType":opt.type},"cache":!1,"dataType":"json","success":function(data){if(1==data.flag)if(opt.success(opt.id,data.data.msgId),that.isOpenState){var message={"action":"send","messageToken":data.data.msgToken};that.SocketMultTab.socket.emit(opts.to,message)}else that.SocketMultTab.socket.connect(function(){var message={"action":"send","messageToken":data.data.msgToken};that.SocketMultTab.socket.emit(opts.to,message)});else opt.fail(data.msg,data.code),callback({"msg":data.msg||"","code":data.code||""})}})},Connection.prototype.receive=function(message){var that=this;switch(message.data.msgType){case"txt":that.onTextMessage(message.data);break;case"img":that.onPictureMessage(message.data);break;default:that.onAudioMessage(message.data)}},Connection.prototype.listenNetwork=function(onlineCallback,offlineCallback){window.addEventListener?(window.addEventListener("online",onlineCallback),window.addEventListener("offline",offlineCallback)):window.attachEvent&&(document.body?(document.body.attachEvent("ononline",onlineCallback),document.body.attachEvent("onoffline",offlineCallback)):window.attachEvent("load",function(){document.body.attachEvent("ononline",onlineCallback),document.body.attachEvent("onoffline",offlineCallback)}))},Connection.prototype.isOpened=function(){return this.isOpenState},Connection.prototype.disconnect=function(){var that=this;that.isOpenState=!1,that.SocketMultTab.disConnect()},Connection.prototype.unSign=function(callback){function getUnreadContent(){LT.ajax({"url":"https://im.liepin.com/unsign.json","type":"POST","data":{"imUserType":that.imUserType,"imClientId":that.imClientId,"imApp":"1"},"cache":!1,"dataType":"json","success":function(_ref){var data=_ref.data,flag=_ref.flag,msg=_ref.msg,code=_ref.code;if(flag){var unReadCounts=0,messages=[],readflag=!0;return data.unsignMessages&&data.unsignMessages.forEach(function(v){unReadCounts+=parseInt(v.signCnt),v.messages&&v.messages.forEach(function(item){var msgPayload=item.payload&&JSON.parse(item.payload);msgPayload&&msgPayload.bodies&&msgPayload.bodies[0].type;switch("0"===item.readflag&&(readflag=!1,messages.push(v.messages)),item.msgType){case"txt":that.onTextMessage(item);break;case"img":that.onPictureMessage(item);break;case"audio":that.onAudioMessage(item)}})}),callback&&callback({"unReadCounts":unReadCounts,"messages":messages,"readFlag":readflag})}that.userQuit({"code":code,"msg":msg}||"")}})}var that=this;that.imClientId?getUnreadContent():that.SocketMultTab.socket.getToken(function(data){that.imClientId=data.imClientId,that.accessToken=data.accessToken,that.imId=data.imId,that.userId=data.userId,getUnreadContent()})},Connection.prototype.userQuit=function(err){var that=this;"300330003"===err.code&&(that.isOpenState&&(that.disconnect(),that.accountQuit=!0),vdialog.alert(""+err.msg,{"parent":"chat","width":300,"ok":function(){window.location.reload()}}))},exports["default"]=WebIM},"R02E":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/im-init-c/lib/message/loading.4f323667.gif"},"RH2O":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.connect=exports.connectAdvanced=exports.createProvider=exports.Provider=void 0;var _Provider=__webpack_require__("PMgr"),_Provider2=_interopRequireDefault(_Provider),_connectAdvanced=__webpack_require__("SAW1"),_connectAdvanced2=_interopRequireDefault(_connectAdvanced),_connect=__webpack_require__("yyvF"),_connect2=_interopRequireDefault(_connect);exports.Provider=_Provider2["default"],exports.createProvider=_Provider.createProvider,exports.connectAdvanced=_connectAdvanced2["default"],exports.connect=_connect2["default"]},"Rakl":function(module,exports){},"Rsul":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.OPEN_PANEL="c:C000010063",exports.CLOSE_PANEL="c:C000010065",exports.PANEL_SETTING="c:C000010064",exports.SELECT_REMIND="c:C000010066",exports.SELECT_NOREMIND="c:C000010067",exports.OPEN_CONTACTS="c:C000010068",exports.OPEN_NOTICE="c:C000010069",exports.OPEN_HISTORYLIST="c:C000010070",exports.CLICK_HISTORYCONTACTS="c:C000010071",exports.OPEN_DIALOG_C="c:C000010072",exports.OLD_VERSION="c:C000010073",exports.DEL_CURRENT_MESSAGE="c:C000010074",exports.CLICK_CONTACTSCARD="c:C000010075",exports.CLICK_DIALOG_CONTACTSINFO="c:C000010076",exports.CLICK_DIALOG_RESUMEBTN="c:C000010077",exports.ATTENTION_BTN="c:C000010078",exports.CANCEL_ATTENTION_BTN="c:C000010079",exports.CLICK_HISTORY_LINK="c:C000010080",exports.CLICK_HISTORY_ICON="c:C000010081",exports.SEND_IMAGE="c:C000010082",exports.OPEN_EMOJI="c:C000010083",exports.CLICK_SEND_BTN="c:C000010084",exports.CLICK_RECOMMEND_ICON="c:C000010085",exports.CLICK_RECOMMEND_DETAIL="c:C000010086",exports.OPEN_CPAGE="c:C000010087",exports.OPEN_NOTICE_LAYER="c:C000010088",exports.DELETE_NOTICE="c:C000010089",exports.CLICK_ASKRESUME="c:C000010800",exports.CLICK_APPLYRESUME="c:C000010801"},"S2kR":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_37.32ea96d8.png"},"SAW1":function(module,exports,__webpack_require__){"use strict";(function(process){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==(void 0===call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+(void 0===superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function noop(){}function makeSelectorStateful(sourceSelector,store){var selector={"run":function(props){try{var nextProps=sourceSelector(store.getState(),props);(nextProps!==selector.props||selector.error)&&(selector.shouldComponentUpdate=!0,selector.props=nextProps,selector.error=null)}catch(error){selector.shouldComponentUpdate=!0,selector.error=error}}};return selector}function connectAdvanced(selectorFactory){var _contextTypes,_childContextTypes,_ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$getDisplayName=_ref.getDisplayName,getDisplayName=void 0===_ref$getDisplayName?function(name){return"ConnectAdvanced("+name+")"}:_ref$getDisplayName,_ref$methodName=_ref.methodName,methodName=void 0===_ref$methodName?"connectAdvanced":_ref$methodName,_ref$renderCountProp=_ref.renderCountProp,renderCountProp=void 0===_ref$renderCountProp?void 0:_ref$renderCountProp,_ref$shouldHandleStat=_ref.shouldHandleStateChanges,shouldHandleStateChanges=void 0===_ref$shouldHandleStat||_ref$shouldHandleStat,_ref$storeKey=_ref.storeKey,storeKey=void 0===_ref$storeKey?"store":_ref$storeKey,_ref$withRef=_ref.withRef,withRef=void 0!==_ref$withRef&&_ref$withRef,connectOptions=_objectWithoutProperties(_ref,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),subscriptionKey=storeKey+"Subscription",version=hotReloadingVersion++,contextTypes=(_contextTypes={},_contextTypes[storeKey]=_PropTypes.storeShape,_contextTypes[subscriptionKey]=_PropTypes.subscriptionShape,_contextTypes),childContextTypes=(_childContextTypes={},_childContextTypes[subscriptionKey]=_PropTypes.subscriptionShape,_childContextTypes);return function(WrappedComponent){(0,_invariant2["default"])("function"==typeof WrappedComponent,"You must pass a component to the function returned by "+methodName+". Instead received "+JSON.stringify(WrappedComponent));var wrappedComponentName=WrappedComponent.displayName||WrappedComponent.name||"Component",displayName=getDisplayName(wrappedComponentName),selectorFactoryOptions=_extends({},connectOptions,{"getDisplayName":getDisplayName,"methodName":methodName,"renderCountProp":renderCountProp,"shouldHandleStateChanges":shouldHandleStateChanges,"storeKey":storeKey,"withRef":withRef,"displayName":displayName,"wrappedComponentName":wrappedComponentName,"WrappedComponent":WrappedComponent}),Connect=function(_Component){function Connect(props,context){_classCallCheck(this,Connect);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));return _this.version=version,_this.state={},_this.renderCount=0,_this.store=props[storeKey]||context[storeKey],_this.propsMode=Boolean(props[storeKey]),_this.setWrappedInstance=_this.setWrappedInstance.bind(_this),(0,_invariant2["default"])(_this.store,'Could not find "'+storeKey+'" in either the context or props of "'+displayName+'". Either wrap the root component in a <Provider>, or explicitly pass "'+storeKey+'" as a prop to "'+displayName+'".'),_this.initSelector(),_this.initSubscription(),_this}return _inherits(Connect,_Component),Connect.prototype.getChildContext=function(){var _ref2,subscription=this.propsMode?null:this.subscription;return _ref2={},_ref2[subscriptionKey]=subscription||this.context[subscriptionKey],_ref2},Connect.prototype.componentDidMount=function(){shouldHandleStateChanges&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},Connect.prototype.componentWillReceiveProps=function(nextProps){this.selector.run(nextProps)},Connect.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},Connect.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=noop,this.store=null,this.selector.run=noop,this.selector.shouldComponentUpdate=!1},Connect.prototype.getWrappedInstance=function(){return(0,_invariant2["default"])(withRef,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+methodName+"() call."),this.wrappedInstance},Connect.prototype.setWrappedInstance=function(ref){this.wrappedInstance=ref},Connect.prototype.initSelector=function(){var sourceSelector=selectorFactory(this.store.dispatch,selectorFactoryOptions);this.selector=makeSelectorStateful(sourceSelector,this.store),this.selector.run(this.props)},Connect.prototype.initSubscription=function(){if(shouldHandleStateChanges){var parentSub=(this.propsMode?this.props:this.context)[subscriptionKey];this.subscription=new _Subscription2["default"](this.store,parentSub,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},Connect.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(dummyState)):this.notifyNestedSubs()},Connect.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},Connect.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},Connect.prototype.addExtraProps=function(props){if(!(withRef||renderCountProp||this.propsMode&&this.subscription))return props;var withExtras=_extends({},props);return withRef&&(withExtras.ref=this.setWrappedInstance),renderCountProp&&(withExtras[renderCountProp]=this.renderCount++),this.propsMode&&this.subscription&&(withExtras[subscriptionKey]=this.subscription),withExtras},Connect.prototype.render=function(){var selector=this.selector;if(selector.shouldComponentUpdate=!1,selector.error)throw selector.error;return(0,_react.createElement)(WrappedComponent,this.addExtraProps(selector.props))},Connect}(_react.Component);return Connect.WrappedComponent=WrappedComponent,Connect.displayName=displayName,Connect.childContextTypes=childContextTypes,Connect.contextTypes=contextTypes,Connect.propTypes=contextTypes,"production"!==process.env.NODE_ENV&&(Connect.prototype.componentWillUpdate=function(){var _this2=this;if(this.version!==version){this.version=version,this.initSelector();var oldListeners=[];this.subscription&&(oldListeners=this.subscription.listeners.get(),this.subscription.tryUnsubscribe()),this.initSubscription(),shouldHandleStateChanges&&(this.subscription.trySubscribe(),oldListeners.forEach(function(listener){return _this2.subscription.listeners.subscribe(listener)}))}}),(0,_hoistNonReactStatics2["default"])(Connect,WrappedComponent)}}Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports["default"]=connectAdvanced;var _hoistNonReactStatics=__webpack_require__("hYij"),_hoistNonReactStatics2=_interopRequireDefault(_hoistNonReactStatics),_invariant=__webpack_require__("crWv"),_invariant2=_interopRequireDefault(_invariant),_react=__webpack_require__("Jmof"),_Subscription=__webpack_require__("MCT5"),_Subscription2=_interopRequireDefault(_Subscription),_PropTypes=__webpack_require__("faAt"),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},hotReloadingVersion=0,dummyState={}}).call(exports,__webpack_require__("W2nU"))},"SCLk":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _redux=__webpack_require__("2KeS"),_contacts=__webpack_require__("kWFh"),_drag=__webpack_require__("p7Nc"),_history=__webpack_require__("yVVU"),_historyContacts=__webpack_require__("Vgfc"),_notice=__webpack_require__("sbaz"),_panel=__webpack_require__("566u"),_sns=__webpack_require__("76vq"),_dialog=__webpack_require__("4kqs"),_setting=__webpack_require__("YBA8"),_setGreeting=__webpack_require__("sOLS"),_toast=__webpack_require__("Dw0N"),_userSetting=__webpack_require__("O4/o"),_shield=__webpack_require__("jQQJ"),_report=__webpack_require__("PyTE"),_sendMsg=__webpack_require__("/pPQ");exports["default"]=(0,_redux.combineReducers)({"contacts":_contacts.contactsReducer,"drag":_drag.dragReducer,"history":_history.historyReducer,"notice":_notice.noticeReducer,"panel":_panel.panelReducer,"sns":_sns.snsReducer,"dialog":_dialog.dialogReducer,"historyContacts":_historyContacts.historyContactsReducer,"setting":_setting.settingReducer,"setGreeting":_setGreeting.setGreetingReducer,"toast":_toast.toastReducer,"userSetting":_userSetting.userSettingReducer,"shield":_shield.shieldReducer,"report":_report.reportReducer,"sendMsg":_sendMsg.sendMsgReducer})},"SE0Z":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function ApplyResumeFeedback(props){var message=props.message;props.imcore;if(message.state===_enums.MsgState.INITIAL)return _react2["default"].createElement("img",{"src":"../../../images/message/sending.gif"});var msg="";return _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK===message.extType&&(msg=message.ext&&message.ext.extBody&&0===message.ext.extBody.messageSource&&message.reason?"由于【"+(message.reason.name?message.reason.name:message.reason)+"】，所以我暂不考虑应聘该职位，非常感谢您的推荐。":0===message.messageSource?"由于【"+(message.reason.name?message.reason.name:message.reason)+"】，所以我暂不考虑应聘该职位，非常感谢您的推荐。":message.reason?message.reason:"我暂不考虑应聘该职位，非常感谢您的推荐"),_react2["default"].createElement("ul",{"className":"feed-back content"},_react2["default"].createElement("li",null,msg),_react2["default"].createElement("li",null,"相关职位：",_react2["default"].createElement("a",{"className":"job-link cjob","href":message.jobHref,"target":"_blank"},message.title?message.title:"",_react2["default"].createElement("em",null,"[",message.salary?message.salary:"","]"))))}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=ApplyResumeFeedback;var _react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_enums=__webpack_require__("O4JY"),_classnames=(__webpack_require__("2KeS"),__webpack_require__("RH2O"),__webpack_require__("HW6M"));_interopRequireDefault(_classnames);__webpack_require__("ccQO")},"Svzl":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.tooldversion=LT.Env.hRoot+"message/showmessage/",exports.mycontacts="https://im.liepin.com/mycontacts.json",exports.simpleInfos=LT.Env.hRoot+"user/simple-infos.json",exports.getsysmsglist4im=LT.Env.hRoot+"message/getsysmsglist4im.json",exports.delsysmessagebyid=LT.Env.hRoot+"message/delsysmessagebyid.json",exports.readedmessagebyid=LT.Env.hRoot+"message/readedmessagebyid.json",exports.chart="https://im.liepin.com/chart.json",exports.readed="https://im.liepin.com/readed.json",exports.getonecontact=LT.Env.hRoot+"message/getonecontact.json",exports.delmycontact="https://im.liepin.com/delmycontact.json",exports.getonecontactotherinfo=LT.Env.hRoot+"im/getonecontactotherinfo.json",exports.gethistorycontactlist=LT.Env.hRoot+"im/gethistorycontactlist.json",exports.isapplyfeedback=LT.Env.hRoot+"resume/isapplyfeedback.json",exports.updateappresappropriate4im=LT.Env.hRoot+"resume/updateappresappropriate4im.json",exports.hasaskedresume=LT.Env.hRoot+"message/hasaskedresume.json",exports.checkaskresume=LT.Env.hRoot+"message/checkaskresume.json",exports.askresume=LT.Env.hRoot+"message/askresume.json",exports.unreadcount="https://im.liepin.com/unreadcount.json"},"T5KR":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.MESSAGE_TEXT=1,exports.MESSAGE_CONVEY=2,exports.MESSAGE_ACCEPT=3,exports.MESSAGE_POSITION_INVITE=4,exports.MESSAGE_SAY_HELLO=5,exports.MESSAGE_RESUME=6,exports.MESSAGE_SHARE_POSITION=7,exports.MESSAGE_SEND_POSITION_LINK=8,exports.MESSAGE_CERTIFICATE_HER=9,exports.MESSAGE_TOPIC_SHARE=10,exports.MESSAGE_CARD_SHARE=11,exports.MESSAGE_ACTIVITY_SHARE=12,exports.MESSAGE_SEND_JOB=13,exports.MESSAGE_SEND_TOOLTIP=17,exports.MESSAGE_SEND_APPLYRESUME=18,exports.MESSAGE_SEND_RATINGBAR=19,exports.MESSAGE_SEND_APPLYFAILDFEEDBACK=20,exports.MESSAGE_SEND_APPLYSUCFEEDBACK=21,exports.MESSAGE_SEND_NAMECARD=23,exports.MESSAGE_ASK_RESUME=24,exports.MESSAGE_IMAGE=1,exports.MESSAGE_LOCATION=1,exports.MESSAGE_VOICE=1},"TJbS":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function CIdentity(props){var item=props.item,icons=(props.config,"");switch(item.oppositeUserKind){case _constants.UserType.USER_TYPE_B.toString():icons="icons24-hr";break;case _constants.UserType.USER_TYPE_H.toString():icons="icons24-lietou";break;case _constants.UserType.USER_TYPE_C.toString():"0"===item.oppositeImUserType||"1"===item.oppositeImUserType&&(icons="icons24-recruit")}return _react2["default"].createElement("span",{"className":"user-name link-img"},(0,_utils.getBrief)(item.oppositeUserName,4)," ",_react2["default"].createElement("em",{"className":"webim-icons24 "+icons}))}function ContactInfo(props){var env=props.imcore.env.toLowerCase(),config=(0,_config2["default"])(env),userInfo=props.imcore.userInfo,v=props.contacts,isSettingShield=!(v.unReadCnt>0);switch((new _lastmsg.LastMessage).set(v.lastPayload),env){case"c":return _react2["default"].createElement("div",{"className":"contact-info clearfix","onClick":function(){return props.actions.selectContact(props.imcore,v)}},_react2["default"].createElement("div",{"className":"photo"},_react2["default"].createElement("img",{"className":"tinyFace circle","src":"//image0.lietou-static.com/normal/"+v.oppositeUserPhoto}),_react2["default"].createElement("i",{"className":(0,_classnames2["default"])({"dot":!0,"hide":isSettingShield})},v.unReadCnt>99?"99+":v.unReadCnt)),_react2["default"].createElement("div",{"className":"info"},_react2["default"].createElement("p",null,_react2["default"].createElement(CIdentity,{"config":config.tlogs,"item":v}),_react2["default"].createElement("time",null,v.latestMsgTime?(0,_utils.dateFormat)(new Date(v.latestMsgTime)):"")),_react2["default"].createElement("p",{"className":"last"},_react2["default"].createElement(_LastMsg2["default"],{"env":env,"message":v.lastPayload,"name":(0,_utils.getBrief)(userInfo.oppositeUserName,3)}))));case"b":return _react2["default"].createElement("div",{"className":"contact-info clearfix","onClick":function(){return props.actions.selectContact(props.imcore,v)}},_react2["default"].createElement("div",{"className":"photo"},_react2["default"].createElement("img",{"className":"tinyFace circle","src":"https://image0.lietou-static.com/normal/"+v.oppositeUserPhoto}),_react2["default"].createElement("i",{"className":(0,_classnames2["default"])({"dot":!0,"hide":isSettingShield})},v.unReadCnt>99?"99+":v.unReadCnt),v.contact&&props.isHistory?_react2["default"].createElement("em",{"className":"connected"},"曾沟通"):""),_react2["default"].createElement("div",{"className":"info"},_react2["default"].createElement("p",null,3==v.oppositeImUserType?_react2["default"].createElement("span",null,_react2["default"].createElement("span",{"className":"name"},(0,_utils.getBrief)(v.oppositeUserName,6)),_react2["default"].createElement("span",{"className":"labels labels-blue"},"同事")):_react2["default"].createElement("span",null,_react2["default"].createElement("span",{"className":"name"},(0,_utils.getBrief)(v.oppositeUserName,2)),_react2["default"].createElement("em",{"className":"job-title"},(0,_utils.getBrief)(v.oppositeUserTitle,3))),_react2["default"].createElement("time",null,v.latestMsgTime?(0,_utils.dateFormat)(new Date(v.latestMsgTime)):"")),_react2["default"].createElement("p",{"className":"last"},_react2["default"].createElement(_LastMsg2["default"],{"env":env,"message":v.lastPayload,"name":(0,_utils.getBrief)(v.oppositeUserName,3)}))));case"h":return _react2["default"].createElement("div",{"className":"contact-info clearfix","onClick":function(){return props.actions.selectContact(props.imcore,v)}},_react2["default"].createElement("div",{"className":"photo"},_react2["default"].createElement("img",{"className":"tinyFace circle","src":"https://image0.lietou-static.com/normal/"+v.oppositeUserPhoto}),_react2["default"].createElement("i",{"className":(0,_classnames2["default"])({"dot":!0,"hide":isSettingShield})},v.unReadCnt>99?"99+":v.unReadCnt),v.contact&&props.isHistory?_react2["default"].createElement("em",{"className":"connected"},"曾沟通"):""),_react2["default"].createElement("div",{"className":"info"},_react2["default"].createElement("p",null,_react2["default"].createElement("span",{"className":"name"},(0,_utils.getBrief)(v.oppositeUserName,3)),_react2["default"].createElement("em",{"className":"job-title"},(0,_utils.getBrief)(v.oppositeUserTitle,3)),_react2["default"].createElement("time",null,v.latestMsgTime?(0,_utils.dateFormat)(new Date(v.latestMsgTime)):"")),_react2["default"].createElement("p",{"className":"last"},_react2["default"].createElement(_LastMsg2["default"],{"env":env,"message":v.lastPayload,"name":(0,_utils.getBrief)(v.oppositeUserName,3)}))))}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.CIdentity=CIdentity,exports["default"]=ContactInfo;var _constants=(__webpack_require__("O4JY"),__webpack_require__("E9QE")),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_utils=__webpack_require__("PQSX"),_LastMsg=__webpack_require__("jtzr"),_LastMsg2=_interopRequireDefault(_LastMsg),_lastmsg=__webpack_require__("93X0");__webpack_require__("rF9R");__webpack_require__("2hHQ")},"TRlD":function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(exports){function EventEmitter(){}function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}function isValidListener(listener){return"function"==typeof listener||listener instanceof RegExp||!(!listener||"object"!==(void 0===listener?"undefined":_typeof(listener)))&&isValidListener(listener.listener)}var proto=EventEmitter.prototype,originalGlobalValue=exports.EventEmitter;proto.getListeners=function(evt){var response,key,events=this._getEvents();if(evt instanceof RegExp){response={};for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key])}else response=events[evt]||(events[evt]=[]);return response},proto.flattenListeners=function(listeners){var i,flatListeners=[];for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners},proto.getListenersAsObject=function(evt){var response,listeners=this.getListeners(evt);return listeners instanceof Array&&(response={},response[evt]=listeners),response||listeners},proto.addListener=function(evt,listener){if(!isValidListener(listener))throw new TypeError("listener must be a function");var key,listeners=this.getListenersAsObject(evt),listenerIsWrapped="object"===(void 0===listener?"undefined":_typeof(listener));for(key in listeners)listeners.hasOwnProperty(key)&&-1===indexOfListener(listeners[key],listener)&&listeners[key].push(listenerIsWrapped?listener:{"listener":listener,"once":!1});return this},proto.on=alias("addListener"),proto.addOnceListener=function(evt,listener){return this.addListener(evt,{"listener":listener,"once":!0})},proto.once=alias("addOnceListener"),proto.defineEvent=function(evt){return this.getListeners(evt),this},proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this},proto.removeListener=function(evt,listener){var index,key,listeners=this.getListenersAsObject(evt);for(key in listeners)listeners.hasOwnProperty(key)&&-1!==(index=indexOfListener(listeners[key],listener))&&listeners[key].splice(index,1);return this},proto.off=alias("removeListener"),proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)},proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)},proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if("object"!==(void 0===evt?"undefined":_typeof(evt))||evt instanceof RegExp)for(i=listeners.length;i--;)single.call(this,evt,listeners[i]);else for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));return this},proto.removeEvent=function(evt){var key,type=void 0===evt?"undefined":_typeof(evt),events=this._getEvents();if("string"===type)delete events[evt];else if(evt instanceof RegExp)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this},proto.removeAllListeners=alias("removeEvent"),proto.emitEvent=function(evt,args){var listeners,listener,i,key,listenersMap=this.getListenersAsObject(evt);for(key in listenersMap)if(listenersMap.hasOwnProperty(key))for(listeners=listenersMap[key].slice(0),i=0;i<listeners.length;i++)listener=listeners[i],!0===listener.once&&this.removeListener(evt,listener.listener),listener.listener.apply(this,args||[])===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener);return this},proto.trigger=alias("emitEvent"),proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)},proto.setOnceReturnValue=function(value){return this._onceReturnValue=value,this},proto._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},proto._getEvents=function(){return this._events||(this._events={})},EventEmitter.noConflict=function(){return exports.EventEmitter=originalGlobalValue,EventEmitter},void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return EventEmitter}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}({})},"TV+w":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.PANEL_RECEIVE_MSG="PANEL_RECEIVE_MSG",exports.PANEL_SEND_MSG="PANEL_SEND_MSG",exports.PANEL_UPDATE_MSG="PANEL_UPDATE_MSG",exports.PANEL_CONN_MSG="PANEL_CONN_MSG",exports.OPEN_PANEL="OPEN_PANEL",exports.CLOSE_PANEL="CLOSE_PANEL",exports.INIT_TAB="INIT_TAB",exports.SELECT_TAB="SELECT_TAB",exports.SELECT_CONTACT="SELECT_CONTACT",exports.UNSELECT_ACTIVE_CONTACT="UNSELECT_ACTIVE_CONTACT",exports.SET_PANEL_UNREAD="SET_PANEL_UNREAD",exports.SET_TABS_UNREAD="SET_TABS_UNREAD",exports.SET_CONTACTS_UNREAD="SET_CONTACTS_UNREAD",exports.SELECT_CONTACT_CANSEND_ERR="SELECT_CONTACT_CANSEND_ERR",exports.SELECT_CONTACT_START="SELECT_CONTACT_START",exports.UPDATE_MSGLIST="UPDATE_MSGLIST",exports.SELECT_SNS="SELECT_SNS",exports.GET_CONTACTS_START="GET_CONTACTS_START",exports.GET_CONTACTS_SUCC="GET_CONTACTS_SUCC",exports.GET_CONTACTS_FAIL="GET_CONTACTS_FAIL",exports.DELETE_CONTACT="DELETE_CONTACT",exports.UPDATE_CONTACTS_BY_SEND_MSG="UPDATE_CONTACTS_BY_SEND_MSG",exports.UPDATE_CONTACTS_BY_RECEIVE_MSG="UPDATE_CONTACTS_BY_RECEIVE_MSG",exports.UPDATE_READED_MSG="UPDATE_READED_MSG",exports.UPDATE_CONTACT_READED_MSG="UPDATE_CONTACT_READED_MSG",exports.GET_NOTICELIST_START="GET_NOTICELIST_START",exports.GET_NOTICELIST_SUCC="GET_NOTICELIST_SUCC",exports.GET_NOTICELIST_FAIL="GET_NOTICELIST_FAIL",exports.DELETE_NOTICEITEM="DELETE_NOTICEITEM",exports.HASREAD_NOTICE="HASREAD_NOTICE",exports.UNSELECT_NOTICE="UNSELECT_NOTICE",exports.READ_NOTICE="READ_NOTICE",exports.DRAG_DISTANCE="DRAG_DISTANCE",exports.DRAG_DONE="DRAG_DONE",exports.GET_INITIAL_SERVER_HISTORY="GET_INITIAL_SERVER_HISTORY",exports.CLEAR_INITIAL_SERVER_HISTORY="CLEAR_INITIAL_SERVER_HISTORY",exports.SHOW_HISTORY="SHOW_HISTORY",exports.HIDE_HISTORY="HIDE_HISTORY",exports.GET_SERVER_HISTORY_STARTED="GET_SERVER_HISTORY_STARTED",exports.GET_SERVER_HISTORY_SUCCESS="GET_SERVER_HISTORY_SUCCESS",exports.GET_SERVER_HISTORY_FAILED="GET_SERVER_HISTORY_FAILED",exports.GET_INITIAL_SERVER_HISTORY_START="GET_INITIAL_SERVER_HISTORY_START",exports.GET_INITIAL_SERVER_HISTORY_FAIL="GET_INITIAL_SERVER_HISTORY_FAIL",exports.UPDATE_INITIAL_SERVER_HISTORY="UPDATE_INITIAL_SERVER_HISTORY",exports.GET_HISTORYCONTACTS_START="GET_HISTORYCONTACTS_START",exports.GET_HISTORYCONTACTS_SUCC="GET_HISTORYCONTACTS_SUCC",exports.GET_HISTORYCONTACTS_FAIL="GET_HISTORYCONTACTS_FAIL",exports.UPDATE_HISTORYCONTACTS_BY_SEND_MSG="UPDATE_HISTORYCONTACTS_BY_SEND_MSG",exports.UPDATE_HISTORYCONTACTS_BY_RECEIVE_MSG="UPDATE_HISTORYCONTACTS_BY_RECEIVE_MSG",exports.UPDATE_HISTORYCONTACT_READED_MSG="UPDATE_HISTORYCONTACT_READED_MSG",exports.OPEN_SETTING="OPEN_SETTING",exports.SELECT_SETTING="SELECT_SETTING",exports.OPEN_SETGREETING="OPEN_SETGREETING",exports.SETGREETING_LIST="SETGREETING_LIST",exports.SELECT_GREETING="SELECT_GREETING",exports.OPEN_TOAST="OPEN_TOAST",exports.CLOSE_TOAST="CLOSE_TOAST",exports.GET_ISATTENTION="GET_ISATTENTION",exports.UPDATE_ATTENTION="UPDATE_ATTENTION",exports.USERSETTING_DIALOG="USER_SETTING",exports.INBLACK_STATUS="INBLACK_STATUS",exports.INBLACK_DIALOG="INBLACK_DIALOG",exports.REPORT_CODE="REPORT_CODE",exports.REPORT_DIALOG="REPORT_DIALOG",exports.REFUSEJOB_CODE="REFUSEJOB_CODE",exports.REFUSEJOB_DIALOG="REFUSEJOB_DIALOG",exports.SEND_IMG_FAIL="SEND_IMG_FAIL",exports.SEND_IMG_SUCC="SEND_IMG_SUCC",exports.SEND_IMG_START="SEND_IMG_START"},"Tij+":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_ContactInfo=__webpack_require__("TJbS"),_ContactInfo2=_interopRequireDefault(_ContactInfo),_ContactCard=__webpack_require__("6iSI"),_ContactCard2=_interopRequireDefault(_ContactCard),_actions=__webpack_require__("IPoy");__webpack_require__("rF9R");__webpack_require__("JmZS");var _Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog),HistoryContacts=function(_Component){function HistoryContacts(props){_classCallCheck(this,HistoryContacts);var _this=_possibleConstructorReturn(this,(HistoryContacts.__proto__||Object.getPrototypeOf(HistoryContacts)).call(this,props));return _this.canload=!0,_this.curMsgPage=0,_this.state={"hover":!1},_this.containerDom=null,_this}return _inherits(HistoryContacts,_Component),_createClass(HistoryContacts,[{"key":"componentDidMount","value":function(){var _props=this.props,that=(_props.imcore,_props.actions,_props.contacts,_props.loading,_props.nomore,_props.firstLoaded,this),$container=$(this.containerDom);$container.on("scroll",function(){var containerHeight=$container.height();this.scrollTop+containerHeight+20>$container.find(".scrolldiv").height()&&that.getHistoryContacts()}),$container.hover(function(){$(this).addClass("lihover")},function(){$(this).removeClass("lihover")})}},{"key":"componentWillReceiveProps","value":function(nextProps){var _props2=this.props,actions=_props2.actions,activeTab=_props2.activeTab;nextProps.activeTab.key!==activeTab.key&&!1===nextProps.firstLoaded&&"historycontacts"===nextProps.activeTab.key&&actions.selectTab(imcore,nextProps.activeTab),nextProps.activeTab.key!==activeTab.key&&"historycontacts"===activeTab.key&&_Dialog2["default"].closeAllConfirm({"parent":"main"})}},{"key":"getHistoryContacts","value":function(){var _props3=this.props,imcore=_props3.imcore,actions=_props3.actions,loading=_props3.loading;_props3.nomore||loading||actions.getHistoryContactsList(imcore)}},{"key":"delContact","value":function(v,e){var _props4=this.props,actions=_props4.actions,imcore=_props4.imcore;_Dialog2["default"].confirm({"parent":"main","onOk":function(){actions.deleteContact(imcore,v)},"text":"确定删除该联系人吗"}),e.stopPropagation()}},{"key":"setHoverStyle","value":function(){this.setState({"hover":!0})}},{"key":"removeHoverStyle","value":function(){this.setState({"hover":!1})}},{"key":"renderList","value":function(){var _this2=this,_props5=this.props,firstLoaded=(_props5.activeTab,_props5.firstLoaded),curMonthContacts=_props5.curMonthContacts,earlierContacts=_props5.earlierContacts,imcore=_props5.imcore,actions=_props5.actions,setting=_props5.setting;return firstLoaded?_react2["default"].createElement("div",{"className":"scrolldiv"},_react2["default"].createElement("h4",null,"本月"),_react2["default"].createElement("ul",null,curMonthContacts.map(function(v,i){return _react2["default"].createElement("li",{"key":i,"className":"clearfix"},_react2["default"].createElement("a",{"className":"close","href":"javascript:;","onClick":function(e){return _this2.delContact(v,e)}},"×"),_react2["default"].createElement(_ContactInfo2["default"],{"imcore":imcore,"contacts":v,"actions":actions,"isHistory":!1}),_react2["default"].createElement(_ContactCard2["default"],{"imcore":imcore,"contacts":v}))})),_react2["default"].createElement("h4",null,"更早"),_react2["default"].createElement("ul",null,earlierContacts&&earlierContacts.map(function(v,i){return _react2["default"].createElement("li",{"key":i,"onClick":function(){return actions.selectContact(imcore,v)},"className":"clearfix","onMouseEnter":function(){_this2.setHoverStyle()},"onMouseLeave":function(){_this2.removeHoverStyle()}},_react2["default"].createElement("a",{"className":"close","href":"javascript:;","onClick":function(e){return _this2.delContact(v,e)}},"×"),_react2["default"].createElement(_ContactInfo2["default"],{"imcore":imcore,"contacts":v,"isHistory":!1,"actions":actions,"setting":setting}),_react2["default"].createElement(_ContactCard2["default"],{"imcore":imcore,"contacts":v}))}))):_react2["default"].createElement("div",{"className":"list-loading"},_react2["default"].createElement("em",null))}},{"key":"render","value":function(){var _this3=this,_props6=this.props,activeTab=_props6.activeTab;_props6.actions,_props6.setting;return _react2["default"].createElement("div",{"className":(0,_classnames2["default"])("historycontacts",{"hide":"historycontacts"!==activeTab.key})},_react2["default"].createElement("div",{"className":"history-contact-list","ref":function(dom){return _this3.containerDom=dom}},this.renderList()))}}]),HistoryContacts}(_react.Component),mapStateToProps=function(state){return{"activeTab":state.panel.activeTab,"firstLoaded":state.historyContacts.firstLoaded,"curMonthContacts":state.historyContacts.curMonthContacts,"earlierContacts":state.historyContacts.earlierContacts,"loading":state.historyContacts.loading,"nomore":state.historyContacts.nomore,"setting":state.setting}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.contactsActions,_actions.panelActions,_actions.historyContactsActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(HistoryContacts)},"Tpys":function(module,exports){},"U33l":function(module,exports,__webpack_require__){"use strict";(function(process){function wrapMapToPropsConstant(getConstant){return function(dispatch,options){function constantSelector(){return constant}var constant=getConstant(dispatch,options);return constantSelector.dependsOnOwnProps=!1,constantSelector}}function getDependsOnOwnProps(mapToProps){return null!==mapToProps.dependsOnOwnProps&&void 0!==mapToProps.dependsOnOwnProps?Boolean(mapToProps.dependsOnOwnProps):1!==mapToProps.length}function wrapMapToPropsFunc(mapToProps,methodName){return function(dispatch,_ref){var displayName=_ref.displayName,proxy=function(stateOrDispatch,ownProps){return proxy.dependsOnOwnProps?proxy.mapToProps(stateOrDispatch,ownProps):proxy.mapToProps(stateOrDispatch)};return proxy.dependsOnOwnProps=!0,proxy.mapToProps=function(stateOrDispatch,ownProps){proxy.mapToProps=mapToProps,proxy.dependsOnOwnProps=getDependsOnOwnProps(mapToProps);var props=proxy(stateOrDispatch,ownProps);return"function"==typeof props&&(proxy.mapToProps=props,proxy.dependsOnOwnProps=getDependsOnOwnProps(props),props=proxy(stateOrDispatch,ownProps)),"production"!==process.env.NODE_ENV&&(0,_verifyPlainObject2["default"])(props,displayName,methodName),props},proxy}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.wrapMapToPropsConstant=wrapMapToPropsConstant,exports.getDependsOnOwnProps=getDependsOnOwnProps,exports.wrapMapToPropsFunc=wrapMapToPropsFunc;var _verifyPlainObject=__webpack_require__("Htzn"),_verifyPlainObject2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_verifyPlainObject)}).call(exports,__webpack_require__("W2nU"))},"U515":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function checkIfCanAssessH(imcore,userhId,messageId){return imcore.handleLog("check canAssessH--\x3e"),(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.canAssessH,"data":{"userhId":userhId,"messageId":messageId},"type":"post"})}function AssessH(imcore,userhId,messageId,starScore){return imcore.handleLog("assessH--\x3e"),(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.assessH,"data":{"userhId":userhId,"messageId":messageId,"level":starScore}})}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_utils=__webpack_require__("c3kU"),_reactRedux=__webpack_require__("RH2O"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_actions=__webpack_require__("IPoy"),_redux=__webpack_require__("2KeS"),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames);__webpack_require__("yWdb");var stars=[{"score":1,"desc":"不专业"},{"score":2,"desc":"需提高"},{"score":3,"desc":"一般般"},{"score":4,"desc":"较专业"},{"score":5,"desc":"很专业"}],Rating=function(_Component){function Rating(props){_classCallCheck(this,Rating);var _this=_possibleConstructorReturn(this,(Rating.__proto__||Object.getPrototypeOf(Rating)).call(this,props));return _this.state={"canRate":!1,"rated":!1,"hoverScore":0},_this.starsDom=null,_this}return _inherits(Rating,_Component),_createClass(Rating,[{"key":"componentDidMount","value":function(){var that=this;$(this.starsDom).find("span").hover(function(){that.setState({"hoverScore":$(this).index()+2})},function(){that.setState({"hoverScore":0})})}},{"key":"nowRate","value":function(){function nowRate(_x,_x2,_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(imcore,userId,messageId){var actions,data,rate=arguments.length>3&&void 0!==arguments[3]&&arguments[3],starScore=arguments[4];return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,actions=this.props.actions,_context.next=4,checkIfCanAssessH(imcore,userId,messageId);case 4:if(data=_context.sent,data.flag){_context.next=10;break}this.setState({"canRate":!1}),actions.openToast({"text":data.data.msg}),_context.next=21;break;case 10:if(0===data.data.status){_context.next=15;break}actions.openToast({"text":data.data.msg}),this.setState({"canRate":!1}),_context.next=21;break;case 15:if(this.setState({"canRate":!0}),!rate){_context.next=21;break}return _context.next=19,AssessH(imcore,userId,messageId,starScore);case 19:data=_context.sent,data.flag?this.setState({"rated":!0}):(this.setState({"rated":!1}),actions.openToast({"text":data.data.msg}));case 21:_context.next=26;break;case 23:_context.prev=23,_context.t0=_context["catch"](0),imcore.handleErr(_context.t0);case 26:case"end":return _context.stop()}},_callee,this,[[0,23]])}));return nowRate}()},{"key":"render","value":function(){var _this2=this,_props=this.props,message=_props.message,activeContact=_props.activeContact,id=message.id,_state=this.state,rated=_state.rated,canRate=_state.canRate,hoverScore=_state.hoverScore;return rated?_react2["default"].createElement("div",{"className":"rating-card"},_react2["default"].createElement("section",{"className":"rating-success"},_react2["default"].createElement("h3",null),_react2["default"].createElement("hr",null),_react2["default"].createElement("ul",null,_react2["default"].createElement("li",null,"您已完成评价，非常感谢")))):_react2["default"].createElement("div",{"className":"rating-card"},_react2["default"].createElement("section",{"className":(0,_classnames2["default"])("not-rating",{"hide":canRate})},_react2["default"].createElement("h3",null),_react2["default"].createElement("ul",null,_react2["default"].createElement("hr",null),_react2["default"].createElement("li",null,"为猎头顾问",_react2["default"].createElement("span",{"className":"from-name"},activeContact.oppositeUserName||activeContact.oppositeUserNameShow),"的服务做个评价吧"),_react2["default"].createElement("li",null,_react2["default"].createElement("button",{"type":"button","className":"btn-rating","onClick":function(){_this2.nowRate(imcore,activeContact.oppositeUserId,id)}},"我要评价")))),_react2["default"].createElement("section",{"className":(0,_classnames2["default"])("rating-bar",{"hide":!canRate})},_react2["default"].createElement("h3",null,"请选择"),_react2["default"].createElement("ul",null,_react2["default"].createElement("li",{"className":"stars","ref":function(dom){return _this2.starsDom=dom}},stars.map(function(v,i){return _react2["default"].createElement("span",{"key":i,"title":v.desc,"onClick":function(){_this2.nowRate(imcore,activeContact.oppositeUserId,id,!0,v.score)}},_react2["default"].createElement("i",{"className":(0,_classnames2["default"])({"webim-icons32":!0,"icons32-starno":hoverScore<=v.score,"icons32-star":hoverScore>v.score})}))})))))}}]),Rating}(_react.Component),mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.toastActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(null,mapDispatchToProps)(Rating)},"U7Nd":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.tabs=void 0;var _Contacts=__webpack_require__("dXXP"),_Contacts2=_interopRequireDefault(_Contacts),_HistoryContacts=__webpack_require__("Tij+"),_HistoryContacts2=_interopRequireDefault(_HistoryContacts),_Notice=__webpack_require__("Nlr2"),_Notice2=_interopRequireDefault(_Notice);exports.tabs=[{"key":"contacts","name":"消息","comp":_Contacts2["default"]},{"key":"historycontacts","name":"历史","comp":_HistoryContacts2["default"]},{"key":"notice","name":"通知","comp":_Notice2["default"]}]},"UGzB":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.Image=exports.Txt=void 0;var _Txt2=__webpack_require__("wBvH"),_Txt3=_interopRequireDefault(_Txt2),_Image2=__webpack_require__("M0YV"),_Image3=_interopRequireDefault(_Image2);exports.Txt=_Txt3["default"],exports.Image=_Image3["default"]},"UK62":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function sendMsg(imcore,msg){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},cb=arguments[3];return function(dispatch,getState){var inBlack=options.inBlack,_options$checkFirst=(options.cansendErrMsg,options.checkFirst),checkFirst=void 0===_options$checkFirst||_options$checkFirst,_options$success=options.success,success=void 0===_options$success?function(){}:_options$success,_options$fail=options.fail,fail=void 0===_options$fail?function(){"img"===msg.type&&(cb&&cb(),_Dialog2["default"].alert({"parent":"chat","width":300,"content":React.createElement("p",{"className":"text-center"},"图片上传失败，请刷新页面重试")}),dispatch({"type":ActionType.SEND_IMG_FAIL,"payload":{"fileRefresh":!0,"pictureDom":null}}))}:_options$fail;if(checkFirst){inBlack=void 0===inBlack?getState().shield.inBlack:inBlack;var contact=getState().panel.activeContact;_api.messageApi.checkIfCansend(imcore,contact,inBlack)&&(msg.status=!0,msg.isClick=!0,imcore.send(msg,success,fail,function(_ref){var code=_ref.code,msg=_ref.msg;_api.messageApi.serverSendErr(imcore,{"code":code,"msg":msg},getState())}))}else imcore.send(msg,success,fail,function(_ref2){var code=_ref2.code,msg=_ref2.msg;_api.messageApi.serverSendErr(imcore,{"code":code,"msg":msg},getState())})}}function resendMsg(imcore,message){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(dispatch,getState){var _options$success2=options.success,success=void 0===_options$success2?function(){}:_options$success2,_options$fail2=options.fail,fail=void 0===_options$fail2?function(){}:_options$fail2,msgList=getState().panel.sendList,theMsg=msgList.find(function(v){return v.id===message.id}),newMsg=null;theMsg&&(theMsg.hasOwnProperty("set")||theMsg.isPrototypeOf("set")||(newMsg=new _send.ImgMsg,theMsg=$.extend(!0,newMsg,theMsg)),theMsg.status=!0,theMsg.isClick=!0,imcore.resend(theMsg,success,fail,function(_ref3){var code=_ref3.code,msg=_ref3.msg;_api.messageApi.serverSendErr(imcore,{"code":code,"msg":msg},getState())},!0))}}function cEntrustResume(imcore,oppositeImId){var _this=this;return function(){var _ref4=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:try{LT.Message=LT.Message||Apps.Message,LT.Message.entrustResume({"id":oppositeImId})}catch(e){alert(e.description),imcore.handleErr(e)}case 1:case"end":return _context.stop()}},_callee,_this)}));return function(_x3,_x4){return _ref4.apply(this,arguments)}}()}function checkImageFile(imcore,pictureDom,activeContact,cb){var _this2=this;return function(){var _ref5=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var imageWH;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.prev=0,(0,_checkFile.checkFileType)({"fileInputId":pictureDom})){_context2.next=7;break}return cb&&cb(),dispatch({"type":ActionType.SEND_IMG_FAIL,"payload":{"pictureDom":null}}),_Dialog2["default"].alert({"parent":"chat","width":300,"content":React.createElement("p",{"className":"text-center"},_constants.ErrorType.UPLOAD_FILE_TYPE_ERROR)}),imcore.handleVisibleErr("UPLOAD_FILE_TYPE_ERROR"),_context2.abrupt("return");case 7:if((0,_checkFile.checkFileSize)({"fileInputId":pictureDom})){_context2.next=13;break}return cb&&cb(),dispatch({"type":ActionType.SEND_IMG_FAIL,"payload":{"pictureDom":null}}),_Dialog2["default"].alert({"parent":"chat","width":300,"content":React.createElement("p",{"className":"text-center"},_constants.ErrorType.UPLOAD_FILE_OVERSIZE)}),imcore.handleVisibleErr("UPLOAD_FILE_OVERSIZE"),_context2.abrupt("return");case 13:return _context2.next=15,(0,_checkFile.checkFileWH)({"fileInputId":pictureDom});case 15:if(imageWH=_context2.sent){_context2.next=22;break}return cb&&cb(),dispatch({"type":ActionType.SEND_IMG_FAIL,"payload":{"pictureDom":null}}),_Dialog2["default"].alert({"parent":"chat","width":300,"content":React.createElement("p",{"className":"text-center"},_constants.ErrorType.UPLOAD_FILE_WH)}),imcore.handleVisibleErr("UPLOAD_FILE_WH"),_context2.abrupt("return");case 22:dispatch(sendImage(imcore,pictureDom,activeContact,cb)),_context2.next=29;break;case 25:_context2.prev=25,_context2.t0=_context2["catch"](0),alert(_context2.t0.description),imcore.handleErr(_context2.t0);case 29:case"end":return _context2.stop()}},_callee2,_this2,[[0,25]])}));return function(_x5,_x6){return _ref5.apply(this,arguments)}}()}function sendImage(imcore,pictureDom,activeContact,cb){return function(dispatch,getState){var msg=new _send.ImgMsg;msg.set({"from":imcore.userInfo,"to":activeContact,"dataType":"img","data":{"fileInputId":pictureDom},"onFileAppend":function(){dispatch({"type":ActionType.SEND_IMG_FAIL,"payload":{"fileRefresh":!1}})},"onFileUploadError":function(error){dispatch({"type":ActionType.SEND_IMG_FAIL,"payload":{"fileRefresh":!0}})},"onFileUploadComplete":function(data){dispatch({"type":ActionType.SEND_IMG_SUCC,"payload":{"pictureDom":null,"fileRefresh":!0}})}}),dispatch(sendMsg(imcore,msg,{},cb))}}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.sendMsg=sendMsg,exports.resendMsg=resendMsg,exports.cEntrustResume=cEntrustResume,exports.checkImageFile=checkImageFile,exports.sendImage=sendImage;var _send=(__webpack_require__("c3kU"),__webpack_require__("6svF")),_config=__webpack_require__("CJQX"),_checkFile=(_interopRequireDefault(_config),__webpack_require__("DT4M")),_ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType),_api=__webpack_require__("wVNl"),_constants=__webpack_require__("E9QE"),_Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog)},"UMX/":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_1.358a6eda.png"},"VDa7":function(module,exports,__webpack_require__){"use strict";(function(process){function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function impureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch){return function(state,ownProps){return mergeProps(mapStateToProps(state,ownProps),mapDispatchToProps(dispatch,ownProps),ownProps)}}function pureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,_ref){function handleFirstCall(firstState,firstOwnProps){return state=firstState,ownProps=firstOwnProps,stateProps=mapStateToProps(state,ownProps),dispatchProps=mapDispatchToProps(dispatch,ownProps),mergedProps=mergeProps(stateProps,dispatchProps,ownProps),hasRunAtLeastOnce=!0,mergedProps}function handleNewPropsAndNewState(){return stateProps=mapStateToProps(state,ownProps),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps)}function handleNewProps(){return mapStateToProps.dependsOnOwnProps&&(stateProps=mapStateToProps(state,ownProps)),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps)}function handleNewState(){var nextStateProps=mapStateToProps(state,ownProps),statePropsChanged=!areStatePropsEqual(nextStateProps,stateProps);return stateProps=nextStateProps,statePropsChanged&&(mergedProps=mergeProps(stateProps,dispatchProps,ownProps)),mergedProps}function handleSubsequentCalls(nextState,nextOwnProps){var propsChanged=!areOwnPropsEqual(nextOwnProps,ownProps),stateChanged=!areStatesEqual(nextState,state);return state=nextState,ownProps=nextOwnProps,propsChanged&&stateChanged?handleNewPropsAndNewState():propsChanged?handleNewProps():stateChanged?handleNewState():mergedProps}var areStatesEqual=_ref.areStatesEqual,areOwnPropsEqual=_ref.areOwnPropsEqual,areStatePropsEqual=_ref.areStatePropsEqual,hasRunAtLeastOnce=!1,state=void 0,ownProps=void 0,stateProps=void 0,dispatchProps=void 0,mergedProps=void 0;return function(nextState,nextOwnProps){return hasRunAtLeastOnce?handleSubsequentCalls(nextState,nextOwnProps):handleFirstCall(nextState,nextOwnProps)}}function finalPropsSelectorFactory(dispatch,_ref2){var initMapStateToProps=_ref2.initMapStateToProps,initMapDispatchToProps=_ref2.initMapDispatchToProps,initMergeProps=_ref2.initMergeProps,options=_objectWithoutProperties(_ref2,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),mapStateToProps=initMapStateToProps(dispatch,options),mapDispatchToProps=initMapDispatchToProps(dispatch,options),mergeProps=initMergeProps(dispatch,options);return"production"!==process.env.NODE_ENV&&(0,_verifySubselectors2["default"])(mapStateToProps,mapDispatchToProps,mergeProps,options.displayName),(options.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory)(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,options)}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.impureFinalPropsSelectorFactory=impureFinalPropsSelectorFactory,exports.pureFinalPropsSelectorFactory=pureFinalPropsSelectorFactory,exports["default"]=finalPropsSelectorFactory;var _verifySubselectors=__webpack_require__("mqO+"),_verifySubselectors2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_verifySubselectors)}).call(exports,__webpack_require__("W2nU"))},"VIcT":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.OPEN_PANEL="c:C000010709",exports.CLOSE_PANEL="c:C000010710",exports.OPEN_NOTICE="c:C000010711",exports.OPEN_CONTACTS="c:C000010729",exports.OPEN_HISTORYLIST="c:C000010712",exports.OLD_VERSION="c:C000010713",exports.OPEN_EMOJI="c:C000010714",exports.SEND_IMAGE="c:C000010715",exports.CLICK_HISTORY_ICON="c:C000010716",exports.CLICK_SEND_BTN="c:C000010717",exports.CLICK_HISTORY_LINK="c:C000010718",exports.PANEL_SETTING="c:C000010719",exports.SELECT_REMIND="c:C000010720",exports.SELECT_NOREMIND="c:C000010721",exports.SELECT_DIALOG_ENTER="c:C000010722",exports.SELECT_DIALOG_CTRLENTER="c:C000010723",exports.DEL_CURRENT_MESSAGE="c:C000010724",exports.OPEN_DIALOG_C="c:C000010725",exports.CLOSE_NOTICE_LAYER="c:C000010726",exports.OPEN_NOTICE_LAYER="c:C000010727",exports.CLICK_HISTORYCONTACTS="c:C000010728",exports.DELETE_NOTICE="c:C000010732",exports.EMPLOY_SUIT="c:C000010380",exports.RESUME_SUIT="c:C000010381",exports.RESUME_UNSUIT="c:C000010382",exports.ASK_RESUME="C000010798",exports.SHIELD_MSG="c:C000010544",exports.SHIELD_MSG_RELIVE="c:C000010547",exports.SHIELD_MSG_WINDOW="c:C000010545",exports.SHIELD_MSG_RELIVE_WINDOW="c:C000010548"},"VZsC":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_39.7f28aeab.png"},"VbJv":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_9.c801d984.png"},"Vgfc":function(module,exports,__webpack_require__){"use strict";function addToTop(list1,list2,item,condition){var index1=list1.findIndex(function(v,i,arr){return condition(v,i,arr)}),index2=list2.findIndex(function(v,i,arr){return condition(v,i,arr)});return index1>-1?{"curMonthContacts":[Object.assign({},list1[index1],item)].concat(list1.slice(0,index1)).concat(list1.slice(index1+1))}:index2>-1?{"curMonthContacts":[Object.assign({},list2[index2],item)].concat(list1),"earlierContacts":list2.slice(0,index2).concat(list2.slice(index2+1))}:(list1.unshift(item),{"curMonthContacts":list1})}function updateList(list,item,condition){if("[object Array]"===Object.prototype.toString.call(list)){var i=list.findIndex(function(v,i,arr){return condition(v,i,arr)});return-1===i?list:list.slice(0,i).concat([Object.assign({},list[i],item)]).concat(list.slice(i+1))}}function historyContactsReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],contact=void 0,indexCur=void 0,indexEarly=void 0;switch(action.type){case _actions.ActionType.GET_HISTORYCONTACTS_START:case _actions.ActionType.GET_HISTORYCONTACTS_FAIL:case _actions.ActionType.GET_HISTORYCONTACTS_SUCC:return Object.assign({},state,action.payload);case _actions.ActionType.DELETE_CONTACT:if(contact=action.payload,indexCur=state.curMonthContacts.findIndex(function(v){return v.oppositeImId===contact.oppositeImId}),indexEarly=state.earlierContacts.findIndex(function(v){return v.oppositeImId===contact.oppositeImId}),-1===indexCur&&-1===indexEarly)return state;if(indexCur>-1)return Object.assign({},state,{"curMonthContacts":state.curMonthContacts.slice(0,indexCur).concat(state.curMonthContacts.slice(indexCur+1))});if(indexEarly>-1)return Object.assign({},state,{"earlierContacts":state.earlierContacts.slice(0,indexEarly).concat(state.earlierContacts.slice(indexEarly+1))});case _actions.ActionType.SELECT_CONTACT:var newcontacts=updateList(state.curMonthContacts,{"unReadCnt":0},function(v){return action.payload.contact.oppositeImId===v.oppositeImId}),newEarlyContacts=updateList(state.earlierContacts,{"unReadCnt":0},function(v){return action.payload.contact.oppositeImId===v.oppositeImId});return Object.assign({},state,{"curMonthContacts":newcontacts,"earlierContacts":newEarlyContacts});case _actions.ActionType.UPDATE_HISTORYCONTACTS_BY_SEND_MSG:return Object.assign({},state,addToTop(state.curMonthContacts,state.earlierContacts,Object.assign({},action.payload.contact,action.payload.lastMsg),function(v){return v.oppositeImId===action.payload.contact.oppositeImId}));case _actions.ActionType.UPDATE_HISTORYCONTACTS_BY_RECEIVE_MSG:return Object.assign({},state,addToTop(state.curMonthContacts,state.earlierContacts,action.payload,function(v){return v.oppositeImId===action.payload.oppositeImId}));case _actions.ActionType.UPDATE_HISTORYCONTACT_READED_MSG:return imcore.handleLog("msgReaded--- UPDATE_HISTORYCONTACT_READED_MSG -----\x3e",action.payload),Object.assign({},state,action.payload);default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.initialState=void 0,exports.historyContactsReducer=historyContactsReducer;var _actions=__webpack_require__("IPoy"),initialState=exports.initialState={"firstLoaded":!1,"curMonthContacts":[],"earlierContacts":[],"loading":!1,"curPage":0,"nomore":!1}},"W7fc":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{"value":value,"enumerable":!0,"configurable":!0,"writable":!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function ChatDialog(props){var children=props.children,rest=_objectWithoutProperties(props,["children"]);return _react2["default"].createElement(Dialog,_extends({},rest,{"parent":"chat"}),children)}function PanelDialog(props){var children=props.children,rest=_objectWithoutProperties(props,["children"]);return _react2["default"].createElement(Dialog,_extends({},rest,{"parent":"panel"}),children)}function MainDialog(props){var children=props.children,rest=_objectWithoutProperties(props,["children"]);return _react2["default"].createElement(Dialog,_extends({},rest,{"parent":"main"}),children)}function confirm(props){var _props$parent=props.parent,parent=void 0===_props$parent?"panel":_props$parent,$confirm=$("#"+parent+"-dialog-container-confirm");0===$confirm.length&&($("#"+parent+"-dialog-container").after('<div id="'+parent+'-dialog-container-confirm"></div>'),$confirm=$("#"+parent+"-dialog-container-confirm"));var _props$outerClose=(props.onClose,props.outerClose),outerClose=void 0===_props$outerClose?emptyFn:_props$outerClose,text=props.text,time=props.time,rest=_objectWithoutProperties(props,["onClose","outerClose","text","time"]),onConfirmClose=function(){$confirm.length&&_reactDom2["default"].unmountComponentAtNode($confirm[0])};time&&setTimeout(function(){onConfirmClose()},time),outerClose(onConfirmClose),_reactDom2["default"].render(_react2["default"].createElement(DialogContent,_extends({"onClose":function(){return onConfirmClose()},"content":_react2["default"].createElement("p",{"className":"confirm-msg"},text)},rest)),$confirm[0])}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.PanelDialog=exports.MainDialog=exports.ChatDialog=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__("wLXD"),_reactDom2=_interopRequireDefault(_reactDom),_ActionType=(__webpack_require__("2KeS"),__webpack_require__("RH2O"),__webpack_require__("TV+w")),_classnames7=(function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj["default"]=obj}(_ActionType),__webpack_require__("HW6M")),_classnames8=_interopRequireDefault(_classnames7);__webpack_require__("ItXD");var emptyFn=function(){},DialogContent=function(_Component){function DialogContent(props){return _classCallCheck(this,DialogContent),_possibleConstructorReturn(this,(DialogContent.__proto__||Object.getPrototypeOf(DialogContent)).call(this,props))}return _inherits(DialogContent,_Component),_createClass(DialogContent,[{"key":"renderFooter","value":function(){var _props=this.props,footer=_props.footer,_props$onCancel=_props.onCancel,onCancel=void 0===_props$onCancel?emptyFn:_props$onCancel,_props$onOk=_props.onOk,onOk=void 0===_props$onOk?emptyFn:_props$onOk,_props$onClose=_props.onClose,onClose=void 0===_props$onClose?emptyFn:_props$onClose,footerCls=_props.cls.footerCls,_props$okVal=_props.okVal,okVal=void 0===_props$okVal?"确定":_props$okVal,_props$cancelVal=_props.cancelVal,cancelVal=void 0===_props$cancelVal?"取消":_props$cancelVal;return footer?"boolean"==typeof footer?_react2["default"].createElement("div",{"className":(0,_classnames8["default"])("im-dialog-footer",_defineProperty({},""+footerCls,!!footerCls))},_react2["default"].createElement("a",{"className":"btn-ok","href":"javascript:;","onClick":function(){onOk(),onClose()}},okVal),_react2["default"].createElement("a",{"className":"btn-cancel","href":"javascript:;","onClick":function(){onCancel(),onClose()}},cancelVal)):footer(this.props):null}},{"key":"render","value":function(){var _props2=this.props,_props2$cls=_props2.cls,_props2$cls$dialogCls=_props2$cls.dialogCls,dialogCls=void 0===_props2$cls$dialogCls?"":_props2$cls$dialogCls,_props2$cls$headerCls=_props2$cls.headerCls,headerCls=void 0===_props2$cls$headerCls?"":_props2$cls$headerCls,_props2$cls$maskCls=_props2$cls.maskCls,maskCls=void 0===_props2$cls$maskCls?"":_props2$cls$maskCls,_props2$cls$contentCl=(_props2$cls.mainCls,_props2$cls.contentCls),contentCls=void 0===_props2$cls$contentCl?"":_props2$cls$contentCl,_props2$width=(_props2$cls.footerCls,_props2.width),width=void 0===_props2$width?200:_props2$width,_props2$position=_props2.position,position=void 0===_props2$position?"center":_props2$position,title=_props2.title,_props2$closeBtn=_props2.closeBtn,closeBtn=void 0===_props2$closeBtn||_props2$closeBtn,backBtn=_props2.backBtn,children=(_props2.footer,_props2.children),visible=_props2.visible,_props2$onCancel=_props2.onCancel,onCancel=void 0===_props2$onCancel?emptyFn:_props2$onCancel,_props2$onClose=(_props2.onOk,_props2.onClose),onClose=void 0===_props2$onClose?emptyFn:_props2$onClose,_props2$onBack=_props2.onBack,onBack=void 0===_props2$onBack?emptyFn:_props2$onBack,content=_props2.content,style={};return"100%"===width?style={"width":width,"marginLeft":0,"left":0,"borderRadius":0}:(width-=0,style={"width":width,"marginLeft":-width/2}),_react2["default"].createElement("div",{"className":(0,_classnames8["default"])("im-dialog","im-dialog-"+position,_defineProperty({"hide":!visible},""+dialogCls,!!dialogCls))},_react2["default"].createElement("div",{"className":(0,_classnames8["default"])("im-dialog-mask",_defineProperty({},""+maskCls,!!maskCls))}),_react2["default"].createElement("div",{"className":(0,_classnames8["default"])("im-dialog-main",_defineProperty({},""+maskCls,!!maskCls)),"style":style},closeBtn&&_react2["default"].createElement("a",{"href":"javascript:;","className":"btn-close","onClick":function(){onCancel(),onClose()}},"×"),title&&_react2["default"].createElement("div",{"className":(0,_classnames8["default"])("im-dialog-header",_defineProperty({},""+headerCls,!!headerCls))},backBtn&&_react2["default"].createElement("a",{"href":"javascript:;","className":"btn-back","onClick":function(){onBack(),onClose()}},_react2["default"].createElement("em",{"className":"webim-icons24 icons24-back "})),_react2["default"].createElement("span",{"className":"title"},"string"==typeof title?title:"")),_react2["default"].createElement("div",{"className":(0,_classnames8["default"])("im-dialog-content",_defineProperty({},""+contentCls,!!contentCls))},children||content),this.renderFooter()))}}]),DialogContent}(_react.Component);DialogContent.defaultProps={"cls":{}};var Dialog=function(_Component2){function Dialog(props){return _classCallCheck(this,Dialog),_possibleConstructorReturn(this,(Dialog.__proto__||Object.getPrototypeOf(Dialog)).call(this,props))}return _inherits(Dialog,_Component2),_createClass(Dialog,[{"key":"componentDidMount","value":function(){this.appendDialog()}},{"key":"componentDidUpdate","value":function(){this.appendDialog()}},{"key":"appendDialog","value":function(){var _props3=this.props,id=_props3.id,_props3$parent=_props3.parent,parent=void 0===_props3$parent?"panel":_props3$parent,dialogOrigin=$("#"+parent+"-dialog-container"),dialog=dialogOrigin;id&&(dialog=$("#"+parent+"-dialog-container-"+id),dialog.length||(dialog=$(dialogOrigin).after('<div id="'+parent+"-dialog-container-"+id+'"></div>'))),dialog.length&&1==$("#"+parent+"-dialog-container-"+id).length&&_reactDom2["default"].unstable_renderSubtreeIntoContainer(this,_react2["default"].createElement(DialogContent,this.props),dialog[0])}},{"key":"render","value":function(){return null}}]),Dialog}(_react.Component);Dialog.propTypes={"parent":_react.PropTypes.string,"cls":_react.PropTypes.object,"title":_react.PropTypes.oneOfType([_react.PropTypes.bool,_react.PropTypes.string]),"footer":_react.PropTypes.oneOfType([_react.PropTypes.bool,_react.PropTypes.element]),"backBtn":_react.PropTypes.bool,"onCancel":_react.PropTypes.func,"onOk":_react.PropTypes.func,"onBack":_react.PropTypes.func,"okVal":_react.PropTypes.string,"cancelVal":_react.PropTypes.string,"width":_react.PropTypes.oneOfType([_react.PropTypes.number,_react.PropTypes.string]),"content":_react.PropTypes.oneOfType([_react.PropTypes.element,_react.PropTypes.string]),"closeBtn":_react.PropTypes.bool,"position":_react.PropTypes.oneOf(["bottom","center"])},Dialog.closeAllConfirm=function(props){var _props$parent2=props.parent,parent=void 0===_props$parent2?"panel":_props$parent2,$confirm=$("#"+parent+"-dialog-container-confirm");$confirm.length&&_reactDom2["default"].unmountComponentAtNode($confirm[0])},Dialog.confirm=function(props){return confirm(Object.assign({"footer":!0,"width":200,"position":"center","visible":!0},props))},Dialog.info=function(props){return confirm(Object.assign({"footer":!1,"width":200,"position":"center","visible":!0,"closeBtn":!1},props))};var alertFooter=function(props){var _props$onOk2=props.onOk,onOk=void 0===_props$onOk2?function(){}:_props$onOk2,_props$onClose2=props.onClose,onClose=void 0===_props$onClose2?function(){}:_props$onClose2;return _react2["default"].createElement("div",{"className":"im-dialog-footer im-dialog-alert-footer"},_react2["default"].createElement("a",{"className":"btn-ok","href":"javascript:;","onClick":function(){onOk(),onClose()}},"确 定"))};Dialog.alert=function(props){return confirm(Object.assign({"footer":alertFooter,"width":200,"position":"center","visible":!0},props))},exports["default"]=Dialog,exports.ChatDialog=ChatDialog,exports.MainDialog=MainDialog,exports.PanelDialog=PanelDialog},"W7pN":function(module,exports){},"WlpS":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_freeGlobal=__webpack_require__("nSxQ"),_freeGlobal2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_freeGlobal),freeSelf="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,root=_freeGlobal2["default"]||freeSelf||Function("return this")();exports["default"]=root},"WvpI":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_24.c6b25d2e.png"},"Wwp8":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_38.cc6ea804.png"},"X0mE":function(module,exports,__webpack_require__){"use strict";function objectToString(value){return nativeObjectToString.call(value)}Object.defineProperty(exports,"__esModule",{"value":!0});var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;exports["default"]=objectToString},"XQ9f":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_26.3e035886.png"},"YBA8":function(module,exports,__webpack_require__){"use strict";function settingReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:settingInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.OPEN_SETTING:return Object.assign({},state,{"show":action.payload});case _actions.ActionType.SELECT_SETTING:return Object.assign({},state,{"setting":action.payload});default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.settingInitialState=void 0,exports.settingReducer=settingReducer;var _actions=__webpack_require__("IPoy"),settingInitialState=exports.settingInitialState={"show":!1,"setting":{"message":!0,"dialog":!0,"greeting":!0}}},"YByk":function(module,exports,__webpack_require__){"use strict";function isObjectLike(value){return null!=value&&"object"==(void 0===value?"undefined":_typeof(value))}Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports["default"]=isObjectLike},"YSfR":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_21.d1855587.png"},"YhUb":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_2.0f152f49.png"},"YkUF":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_11.22f658b3.png"},"YyeZ":function(module,exports,__webpack_require__){"use strict";(function(process){var emptyFunction=__webpack_require__("e6+Q"),warning=emptyFunction;if("production"!==process.env.NODE_ENV){var printWarning=function(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var argIndex=0,message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});"undefined"!=typeof console&&console.error(message);try{throw new Error(message)}catch(x){}};warning=function(condition,format){if(void 0===format)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==format.indexOf("Failed Composite propType: ")&&!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)args[_key2-2]=arguments[_key2];printWarning.apply(void 0,[format].concat(args))}}}module.exports=warning}).call(exports,__webpack_require__("W2nU"))},"YzCZ":function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_regenerator),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Queue=function(){function Queue(){_classCallCheck(this,Queue),this.queue=[],this.started=!1}return _createClass(Queue,[{"key":"push","value":function(){for(var _this=this,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];args.forEach(function(func){"function"==typeof func&&_this.queue.push(func)}),this.started||this.start()}},{"key":"start","value":function(){function start(){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(){return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:this.started=!0;case 1:if(0===this.queue.length){_context.next=13;break}return _context.prev=2,_context.next=5,this.runFunc();case 5:this.queue.shift(),_context.next=11;break;case 8:_context.prev=8,_context.t0=_context["catch"](2),this.queue.shift();case 11:_context.next=1;break;case 13:this.started=!1;case 14:case"end":return _context.stop()}},_callee,this,[[2,8]])}));return start}()},{"key":"runFunc","value":function(){var pTimeout=new Promise(function(resolve,reject){setTimeout(function(){return resolve("queue timeout")},5e4)});return Promise.race([this.queue[0](),pTimeout])}}]),Queue}();exports["default"]=Queue},"ZBO9":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function createStore(reducer,preloadedState,enhancer){function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected listener to be a function.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1)}}}function dispatch(action){if(!(0,_isPlainObject2["default"])(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++){(0,listeners[i])()}return action}function replaceReducer(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({"type":ActionTypes.INIT})}function observable(){var _ref,outerSubscribe=subscribe;return _ref={"subscribe":function(observer){function observeState(){observer.next&&observer.next(getState())}if("object"!==(void 0===observer?"undefined":_typeof(observer)))throw new TypeError("Expected the observer to be an object.");return observeState(),{"unsubscribe":outerSubscribe(observeState)}}},_ref[_symbolObservable2["default"]]=function(){return this},_ref}var _ref2;if("function"==typeof preloadedState&&void 0===enhancer&&(enhancer=preloadedState,preloadedState=void 0),void 0!==enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,preloadedState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;return dispatch({"type":ActionTypes.INIT}),_ref2={"dispatch":dispatch,"subscribe":subscribe,"getState":getState,"replaceReducer":replaceReducer},_ref2[_symbolObservable2["default"]]=observable,_ref2}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.ActionTypes=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports["default"]=createStore;var _isPlainObject=__webpack_require__("sMP3"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_symbolObservable=__webpack_require__("3yIl"),_symbolObservable2=_interopRequireDefault(_symbolObservable),ActionTypes=exports.ActionTypes={"INIT":"@@redux/INIT"}},"Zg6z":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_8.f3d69a28.png"},"Zha5":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function serverSendErr(imcore,_ref,state){var code=_ref.code,msg=_ref.msg;state.panel.activeContact&&("300050011"===code?_Dialog2["default"].alert({"parent":"chat","width":300,"content":React.createElement("p",null,"您的简历尚未完善，为了保证双方沟通效率，请先",React.createElement("a",{"href":"https://c.liepin.com/resume/getdefaultresume/","target":"_blank"},"完善您的简历"))}):"300050015"===code?(window.tlog=window.tlog||[],window.tlog.push("s:S000011124"),_Dialog2["default"].confirm({"parent":"chat","width":300,"content":React.createElement("p",null,"请先提升职场信用分!"),"onOk":function(){window.tlog=window.tlog||[],window.tlog.push("c:C000011125"),window.location.href="https://c.liepin.com/resume/getdefaultresume/"}})):"300050017"===code?(window.tlog=window.tlog||[],window.tlog.push("s:S000011126"),_Dialog2["default"].confirm({"parent":"chat","width":300,"content":React.createElement("p",null,msg),"onOk":function(){window.location.href="https://c.liepin.com/profile/getsecret/"}})):"300330003"===code?_Dialog2["default"].confirm({"parent":"chat","width":300,"content":React.createElement("p",null,msg),"onOk":function(){location.reload()}}):_Dialog2["default"].alert({"parent":"chat","width":300,"text":msg}))}function checkIfCansend(imcore,contact,inBlack){if(inBlack&&contact.oppositeUserKind!=_constants.UserType.USER_TYPE_B){var dialogText=void 0;return"c"===imcore.env?contact.oppositeUserKind==_constants.UserType.USER_TYPE_C?dialogText="互为好友即可发送消息，请先添加好友！":contact.oppositeUserKind==_constants.UserType.USER_TYPE_H&&(dialogText="该猎头顾问已被屏蔽，操作已被限制！"):"b"===imcore.env&&(dialogText="您将该候选人屏蔽了，无法发送消息！"),_Dialog2["default"].alert({"parent":"chat","width":300,"text":dialogText}),!1}return!0}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.serverSendErr=serverSendErr,exports.checkIfCansend=checkIfCansend;var _config=(__webpack_require__("c3kU"),__webpack_require__("CJQX")),_constants=(_interopRequireDefault(_config),__webpack_require__("E9QE")),_Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog)},"a0Sg":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function Btitle(props){var imcore=props.imcore,activeContact=props.activeContact,titlePushStr=props.titlePushStr;switch(activeContact.oppositeImUserType){case"0":return _react2["default"].createElement("div",null,_react2["default"].createElement(_addTlog.Atlog,{"href":"https://lpt.liepin.com/resume/showresumecarte4im?usercId="+activeContact.oppositeUserId+"&oppositeImId="+activeContact.oppositeImId,"target":"_blank","className":"link-img","pushStr":titlePushStr},_react2["default"].createElement("img",{"src":"//image0.lietou-static.com/normal/"+activeContact.oppositeUserPhoto,"className":"tinyFace circle"})),_react2["default"].createElement("div",{"className":"target-info"},_react2["default"].createElement("h3",null,_react2["default"].createElement(_addTlog.Atlog,{"href":"https://lpt.liepin.com/resume/showresumecarte4im?usercId="+activeContact.oppositeUserId+"&oppositeImId="+activeContact.oppositeImId,"target":"_blank","pushStr":titlePushStr},activeContact.oppositeUserName),_react2["default"].createElement("span",{"className":"job-info"},activeContact.oppositeUserSexName?_react2["default"].createElement("em",null,activeContact.oppositeUserSexName):"",activeContact.oppositeUserEdulevelName?_react2["default"].createElement("em",null,activeContact.oppositeUserEdulevelName):"",_react2["default"].createElement("em",null,"工作",activeContact.oppositeWorkAge,"年"),_react2["default"].createElement("em",{"title":activeContact.oppositeUserDqName},(0,_utils.getBrief)(activeContact.oppositeUserDqName,4)))),_react2["default"].createElement("p",{"className":"title-company"},_react2["default"].createElement(_addTlog.Atlog,{"href":"https://lpt.liepin.com/resume/showresumecarte4im?usercId="+activeContact.oppositeUserId+"&oppositeImId="+activeContact.oppositeImId,"target":"_blank","pushStr":titlePushStr},_react2["default"].createElement("span",null,_react2["default"].createElement("i",null,(0,_utils.getBrief)(activeContact.oppositeUserTitle,10)),_react2["default"].createElement("i",null,"|"),_react2["default"].createElement("i",null,(0,_utils.getBrief)(activeContact.oppositeUserCompany,15))))),_react2["default"].createElement("p",{"className":"homepage"},_react2["default"].createElement(_addTlog.Atlog,{"href":"https://lpt.liepin.com/resume/showresumecarte4im?usercId="+activeContact.oppositeUserId+"&oppositeImId="+activeContact.oppositeImId,"target":"_blank","pushStr":titlePushStr},"查看简历")),_react2["default"].createElement(_Shield2["default"],{"imcore":imcore})));case"3":return _react2["default"].createElement("div",{"style":{"minHeight":50}},_react2["default"].createElement(_addTlog.Atlog,{"className":"link-img","pushStr":titlePushStr},_react2["default"].createElement("img",{"src":"//image0.lietou-static.com/normal/"+activeContact.oppositeUserPhoto,"className":"tinyFace circle"})),_react2["default"].createElement("div",{"className":"target-info"},_react2["default"].createElement("h3",null,_react2["default"].createElement(_addTlog.Atlog,{"pushStr":titlePushStr},activeContact.oppositeUserName))))}}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.Btitle=Btitle;var _react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_utils=__webpack_require__("PQSX"),_addTlog=__webpack_require__("rF9R"),_constants=__webpack_require__("E9QE"),_dragResize=__webpack_require__("N46j"),_actions=__webpack_require__("IPoy"),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O");__webpack_require__("Tpys");var _ChatTitleHattention=__webpack_require__("3Xkc"),_ChatTitleHattention2=_interopRequireDefault(_ChatTitleHattention),_ChatTitleCattention=__webpack_require__("zyFQ"),_ChatTitleCattention2=_interopRequireDefault(_ChatTitleCattention),_UserSetting=__webpack_require__("PmDn"),_UserSetting2=_interopRequireDefault(_UserSetting),_Shield=__webpack_require__("P20F"),_Shield2=_interopRequireDefault(_Shield),ChatTitle=function(_Component){function ChatTitle(props){_classCallCheck(this,ChatTitle);var _this=_possibleConstructorReturn(this,(ChatTitle.__proto__||Object.getPrototypeOf(ChatTitle)).call(this,props));return _this.config=(0,_config2["default"])(props.imcore.env),_this}return _inherits(ChatTitle,_Component),_createClass(ChatTitle,[{"key":"componentDidMount","value":function(){var actions=this.props.actions,_refs=this.refs,usersettingBtn=_refs.usersettingBtn,usersettingBOX=_refs.usersettingBOX;$(document).on("click.usersetting",function(e){e.target!==usersettingBtn&&0===$(usersettingBtn).has(e.target).length&&0===$(usersettingBOX).has(e.target).length&&actions.hideUserSetting()})}},{"key":"componentWillUnmount","value":function(){$(document).off("click.usersetting")}},{"key":"userSettingVisible","value":function(status){var _props=this.props,actions=(_props.imcore,_props.actions);status?actions.hideUserSetting():actions.showUserSetting()}},{"key":"closeDialog","value":function(){var _props2=this.props;_props2.imcore;_props2.actions.hideUserSetting()}},{"key":"render","value":function(){var _this2=this,env=this.props.imcore.env.toLowerCase(),config=(0,_config2["default"])(env),_props3=this.props,activeContact=_props3.activeContact,style=_props3.style,_onMouseDown=_props3.onMouseDown,historyVisible=_props3.historyVisible,dialogVisible=_props3.dialogVisible,rootClassName=(_props3.inBlack,(0,_classnames2["default"])({"chat-title":!0,"blur":historyVisible})),titlePushStr=void 0;if(!activeContact)return _react2["default"].createElement("div",{"className":rootClassName},"没有聊天信息");switch(env){case"c":return titlePushStr=config.tlogs.OPEN_CPAGE,activeContact.oppositeUserKind==_constants.UserType.USER_TYPE_B?titlePushStr=config.tlogs.OPEN_BPAGE:activeContact.oppositeUserKind==_constants.UserType.USER_TYPE_H&&(titlePushStr=config.tlogs.OPEN_HPAGE),_react2["default"].createElement("div",{"className":rootClassName,"style":style,"onMouseDown":function(e){return _onMouseDown(e)}},_react2["default"].createElement(_addTlog.Atlog,{"href":activeContact.oppositeMainUrl,"target":"_blank","className":"link-img","pushStr":titlePushStr},_react2["default"].createElement("img",{"src":"//image0.lietou-static.com/normal/"+activeContact.oppositeUserPhoto,"className":"tinyFace circle"})),_react2["default"].createElement("div",{"className":"target-info"},_react2["default"].createElement("h3",null,_react2["default"].createElement(_addTlog.Atlog,{"href":activeContact.oppositeMainUrl,"target":"_blank","pushStr":titlePushStr},activeContact.oppositeUserName),activeContact.oppositeUserKind==_constants.UserType.USER_TYPE_B&&_react2["default"].createElement("em",{"className":"webim-icons24 icons24-hr"}),activeContact.oppositeUserKind==_constants.UserType.USER_TYPE_H&&_react2["default"].createElement("em",{"className":"webim-icons24 icons24-lietou"}),_react2["default"].createElement("a",{"ref":"usersettingBtn","onClick":function(){return _this2.userSettingVisible(dialogVisible)},"href":"javascript:;","className":"usersetting-btn"},_react2["default"].createElement("em",null)),_react2["default"].createElement("div",{"ref":"usersettingBOX"},_react2["default"].createElement(_UserSetting2["default"],{"imcore":imcore}))),_react2["default"].createElement("p",{"className":"title-company"},_react2["default"].createElement(_addTlog.Atlog,{"href":activeContact.oppositeMainUrl,"target":"_blank","pushStr":titlePushStr},(0,_utils.getBrief)(activeContact.oppositeUserCompany,15))),_react2["default"].createElement("p",{"className":"homepage"},_react2["default"].createElement(_addTlog.Atlog,{"href":activeContact.oppositeMainUrl,"target":"_blank","pushStr":titlePushStr},"查看主页")),activeContact.oppositeUserKind==_constants.UserType.USER_TYPE_H&&_react2["default"].createElement(_ChatTitleCattention2["default"],{"imcore":imcore,"oppositeImId":activeContact.oppositeImId,"uid":activeContact.oppositeUserId})));case"b":return _react2["default"].createElement("div",{"className":rootClassName,"style":style,"onMouseDown":function(e){return _onMouseDown(e)}},_react2["default"].createElement(Btitle,{"activeContact":activeContact,"titlePushStr":titlePushStr,"imcore":imcore}));case"h":return titlePushStr=config.tlogs.CLICK_DIALOG_RESUMEBTN,_react2["default"].createElement("div",{"className":rootClassName,"style":style,"onMouseDown":function(e){return _onMouseDown(e)}},_react2["default"].createElement(_addTlog.Atlog,{"href":"https://h.liepin.com/im/showresumedetail4im/?oppositeImId="+activeContact.oppositeImId,"target":"_blank","className":"link-img","pushStr":titlePushStr},_react2["default"].createElement("img",{"src":"//image0.lietou-static.com/normal/"+activeContact.oppositeUserPhoto,"className":"tinyFace circle"})),_react2["default"].createElement("div",{"className":"target-info"},_react2["default"].createElement("h3",null,_react2["default"].createElement(_addTlog.Atlog,{"href":"https://h.liepin.com/im/showresumedetail4im/?oppositeImId="+activeContact.oppositeImId,"target":"_blank","pushStr":config.tlogs.CLICK_DIALOG_CONTACTSINFO},activeContact.oppositeUserName),_react2["default"].createElement("span",{"className":"job-info"},activeContact.oppositeUserSexName?_react2["default"].createElement("em",null,activeContact.oppositeUserSexName):"",activeContact.oppositeUserEdulevelName?_react2["default"].createElement("em",null,activeContact.oppositeUserEdulevelName):"",_react2["default"].createElement("em",null,"工作",activeContact.oppositeWorkAge,"年"),_react2["default"].createElement("em",{"title":activeContact.oppositeUserDqName},(0,_utils.getBrief)(activeContact.oppositeUserDqName,4)))),_react2["default"].createElement("p",{"className":"title-company"},_react2["default"].createElement(_addTlog.Atlog,{"href":"https://h.liepin.com/im/showresumedetail4im/?oppositeImId="+activeContact.oppositeImId,"target":"_blank","pushStr":config.tlogs.CLICK_DIALOG_CONTACTSINFO},_react2["default"].createElement("span",null,_react2["default"].createElement("i",null,(0,_utils.getBrief)(activeContact.oppositeUserTitle,10)),_react2["default"].createElement("i",null,"|"),_react2["default"].createElement("i",null,(0,_utils.getBrief)(activeContact.oppositeUserCompany,15))))),_react2["default"].createElement("p",{"className":"homepage"},_react2["default"].createElement(_addTlog.Atlog,{"href":"https://h.liepin.com/im/showresumedetail4im/?oppositeImId="+activeContact.oppositeImId,"target":"_blank","pushStr":titlePushStr},"查看简历")),_react2["default"].createElement("div",{"className":"attention-wrap"},_react2["default"].createElement(_ChatTitleHattention2["default"],{"imcore":imcore}))))}}}]),ChatTitle}(_react.Component),mapStateToProps=function(state){return{"historyVisible":state.history.visible,"dialogVisible":state.userSetting.dialogVisible,"inBlack":state.shield.inBlack}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.dragActions,_actions.userSettingActions),dispatch)}},ChatTitle1=(0,_dragResize.drag)()(ChatTitle);exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(ChatTitle1)},"aCyU":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function showHistory(imcore){return{"type":ActionType.SHOW_HISTORY,"payload":{"visible":!0,"serverHistory":[],"lastmsgid":-1,"nomore":!1}}}function hideHistory(imcore){return{"type":ActionType.SHOW_HISTORY,"payload":{"visible":!1}}}function getServerHistory(imcore,targetDetail){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var list,nomore,newLastmsgid,formattedServerHistory,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,history,newMsg,formatted;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,dispatch({"type":ActionType.GET_SERVER_HISTORY_STARTED,"payload":{"loading":!0}}),_context.next=4,_api.historyApi.getHistoryFromServer(imcore,getState().panel.activeContact.oppositeImId,getState().history.lastmsgid,_constants2.enums.HISTORY_PAGESIZE);case 4:list=_context.sent,nomore=getState().history.nomore,newLastmsgid=-1,list.length>0?(newLastmsgid=list[list.length-1].msgId-1,nomore=list.length!==_constants2.enums.HISTORY_PAGESIZE):nomore=!0,list=list.reverse(),formattedServerHistory=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context.prev=13,_iterator=list[Symbol.iterator]();case 15:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=25;break}return history=_step.value,newMsg=(new _history.HistoryMsg).set({"msg":history,"targetDetail":targetDetail,"userDetail":imcore.userInfo}),_context.next=20,newMsg.fillInfo(imcore);case 20:formatted=_context.sent.getDetailFormat(),formatted.visible&&formattedServerHistory.push(formatted);case 22:_iteratorNormalCompletion=!0,_context.next=15;break;case 25:_context.next=31;break;case 27:_context.prev=27,_context.t0=_context["catch"](13),_didIteratorError=!0,_iteratorError=_context.t0;case 31:_context.prev=31,_context.prev=32,!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]();case 34:if(_context.prev=34,!_didIteratorError){_context.next=37;break}throw _iteratorError;case 37:return _context.finish(34);case 38:return _context.finish(31);case 39:(0,_utils.publish)(imcore,dispatch,{"type":ActionType.GET_SERVER_HISTORY_SUCCESS,"payload":{"newpage":formattedServerHistory,"lastmsgid":newLastmsgid,"loading":!1,"nomore":nomore}}),_context.next=46;break;case 42:_context.prev=42,_context.t1=_context["catch"](0),imcore.handleErr(_context.t1),dispatch({"type":ActionType.GET_SERVER_HISTORY_FAILED,"payload":{"loading":!1}});case 46:case"end":return _context.stop()}},_callee,_this,[[0,42],[13,27,31,39],[32,,34,38]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}function getInitialServerHistory(imcore,targetDetail){var _this2=this;return function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var list,formattedServerHistory,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,history,newMsg,formatted;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,dispatch({"type":ActionType.GET_INITIAL_SERVER_HISTORY_START,"payload":null}),_context2.next=4,_api.historyApi.getHistoryFromServer(imcore,targetDetail.oppositeImId,-1,30);case 4:list=_context2.sent,formattedServerHistory=[],_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0,_context2.prev=9,_iterator2=list[Symbol.iterator]();case 11:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context2.next=21;break}return history=_step2.value,newMsg=(new _history.HistoryMsg).set({"msg":history,"targetDetail":targetDetail,"userDetail":imcore.userInfo}),_context2.next=16,newMsg.fillInfo(imcore);case 16:formatted=_context2.sent.getDetailFormat(),formatted.visible&&formattedServerHistory.push(formatted);case 18:_iteratorNormalCompletion2=!0,_context2.next=11;break;case 21:_context2.next=27;break;case 23:_context2.prev=23,_context2.t0=_context2["catch"](9),_didIteratorError2=!0,_iteratorError2=_context2.t0;case 27:_context2.prev=27,_context2.prev=28,!_iteratorNormalCompletion2&&_iterator2["return"]&&_iterator2["return"]();case 30:if(_context2.prev=30,!_didIteratorError2){_context2.next=33;break}throw _iteratorError2;case 33:return _context2.finish(30);case 34:return _context2.finish(27);case 35:formattedServerHistory.sort(function(a,b){return a.timestamp>b.timestamp?1:-1}),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.GET_INITIAL_SERVER_HISTORY,"payload":formattedServerHistory}),_context2.next=43;break;case 39:_context2.prev=39,_context2.t1=_context2["catch"](0),dispatch({"type":ActionType.GET_INITIAL_SERVER_HISTORY_FAIL,"payload":null}),imcore.handleErr(_context2.t1);case 43:case"end":return _context2.stop()}},_callee2,_this2,[[0,39],[9,23,27,35],[28,,30,34]])}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}()}function clearInitialServerHistory(imcore){return{"type":ActionType.CLEAR_INITIAL_SERVER_HISTORY,"payload":null}}function updateInitialServerHistory(imcore,updateFunc){return function(dispatch,getState){(0,_utils.publish)(imcore,dispatch,{"type":ActionType.UPDATE_INITIAL_SERVER_HISTORY,"payload":updateFunc(getState().history.initialServerHistory)})}}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.showHistory=showHistory,exports.hideHistory=hideHistory,exports.getServerHistory=getServerHistory,exports.getInitialServerHistory=getInitialServerHistory,exports.clearInitialServerHistory=clearInitialServerHistory,exports.updateInitialServerHistory=updateInitialServerHistory;var _history=__webpack_require__("zG6l"),_constants2=(__webpack_require__("E9QE"),__webpack_require__("acFS")),_ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType),_config=__webpack_require__("CJQX"),_api=(_interopRequireDefault(_config),__webpack_require__("wVNl")),_utils=__webpack_require__("PQSX")},"aQGf":function(module,exports,__webpack_require__){"use strict";function is(x,y){return x===y?0!==x||0!==y||1/x==1/y:x!==x&&y!==y}function shallowEqual(objA,objB){if(is(objA,objB))return!0;if("object"!==(void 0===objA?"undefined":_typeof(objA))||null===objA||"object"!==(void 0===objB?"undefined":_typeof(objB))||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var i=0;i<keysA.length;i++)if(!hasOwn.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports["default"]=shallowEqual;var hasOwn=Object.prototype.hasOwnProperty},"acFS":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0}),exports.enums=exports.Emotions=void 0;var _Emotions=__webpack_require__("lYka");Object.defineProperty(exports,"Emotions",{"enumerable":!0,"get":function(){return _Emotions.Emotions}});var _enums2=__webpack_require__("Q9QW"),_enums=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_enums2);exports.enums=_enums},"b72d":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/404.19860ca7.png"},"brzr":function(module,exports,__webpack_require__){"use strict";__webpack_require__("tDKR")},"byaS":function(module,exports,__webpack_require__){"use strict";function warning(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=warning},"c3kU":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.EventEmitter=exports.Queue=exports.ImError=exports.emptyFn=exports.pajax=void 0;var _ImError=__webpack_require__("OG2G"),_ImError2=_interopRequireDefault(_ImError),_Queue=__webpack_require__("YzCZ"),_Queue2=_interopRequireDefault(_Queue),_EventEmitter=__webpack_require__("TRlD"),_EventEmitter2=_interopRequireDefault(_EventEmitter);exports.pajax=function(options){return new Promise(function(resolve,reject){options.url||reject(new Error("url is necessary!")),LT.ajax(Object.assign(options,{"success":function(data){resolve(data)},"error":function(err){reject(err)},"timeout":15e3}))})},exports.emptyFn=function(){};exports.ImError=_ImError2["default"],exports.Queue=_Queue2["default"],exports.EventEmitter=_EventEmitter2["default"]},"cGfb":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function settingShow(show){return function(dispatch,getState){dispatch({"type":ActionType.OPEN_SETTING,"payload":!show})}}function settingList(imcore){return function(dispatch,getState){var messageStatus=!LT.Cookie.get(_constants.enums.COOKIE_KEY_SETTING_MESSAGE)||eval(LT.Cookie.get(_constants.enums.COOKIE_KEY_SETTING_MESSAGE)),dialogStatus=!LT.Cookie.get(_constants.enums.COOKIE_KEY_SETTING_DIALOG)||eval(LT.Cookie.get(_constants.enums.COOKIE_KEY_SETTING_DIALOG)),list={"message":messageStatus,"dialog":dialogStatus,"greeting":imcore.userInfo.chatSetting&&imcore.userInfo.chatSetting.sayHi};dispatch({"type":ActionType.SELECT_SETTING,"payload":list})}}function settingSelect(event,icon,setting,imcore,greetingType,tlogs){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var list,settingData,data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:_context.prev=0,list={},list[event]=icon,settingData=$.extend(!0,{},setting,list),window.tlog=window.tlog||[],_context.t0=event,_context.next="message"===_context.t0?8:"dialog"===_context.t0?11:"greeting"===_context.t0?14:18;break;case 8:return icon?tlog.push(tlogs.SELECT_REMIND):tlog.push(tlogs.SELECT_NOREMIND),LT.Cookie.set(_constants.enums.COOKIE_KEY_SETTING_MESSAGE,icon,360,"/"),_context.abrupt("break",18);case 11:return"h"!==imcore.env&&(icon?tlog.push(tlogs.SELECT_DIALOG_ENTER):tlog.push(tlogs.SELECT_DIALOG_CTRLENTER)),LT.Cookie.set(_constants.enums.COOKIE_KEY_SETTING_DIALOG,icon,360,"/"),_context.abrupt("break",18);case 14:return _context.next=16,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.saveChatSetting,"type":"post","data":{"sayHi":settingData.greeting,"sayHiType":greetingType}});case 16:return data=_context.sent,_context.abrupt("break",18);case 18:(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.SELECT_SETTING,"payload":settingData}),_context.next=24;break;case 21:_context.prev=21,_context.t1=_context["catch"](0),imcore.handleErr(_context.t1);case 24:case"end":return _context.stop()}},_callee,_this,[[0,21]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.settingShow=settingShow,exports.settingList=settingList,exports.settingSelect=settingSelect;var _utils=__webpack_require__("c3kU"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_ActionType=__webpack_require__("TV+w"),ActionType=_interopRequireWildcard(_ActionType),_constants=__webpack_require__("acFS"),_utils2=__webpack_require__("PQSX")},"cOiO":function(module,exports){},"ccQO":function(module,exports){},"cfHB":function(module,exports){},"crWv":function(module,exports,__webpack_require__){"use strict";(function(process){var invariant=function(condition,format,a,b,c,d,e,f){if("production"!==process.env.NODE_ENV&&void 0===format)throw new Error("invariant requires an error message argument");if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}};module.exports=invariant}).call(exports,__webpack_require__("W2nU"))},"cxPT":function(module,exports,__webpack_require__){"use strict";(function(process){function invariant(condition,format,a,b,c,d,e,f){if(validateFormat(format),!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}var validateFormat=function(format){};"production"!==process.env.NODE_ENV&&(validateFormat=function(format){if(void 0===format)throw new Error("invariant requires an error message argument")}),module.exports=invariant}).call(exports,__webpack_require__("W2nU"))},"dLnD":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function panelReceiveMsg(imcore,msg){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var formattedMsg;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:formattedMsg=(0,_receive.createReceiveMsgByPlainMsg)(msg),dispatch({"type":ActionType.PANEL_RECEIVE_MSG,"payload":formattedMsg.getBody()}),dispatch(contactsActions.changeContactsByReceiveMsg(imcore,msg)),dispatch(historyContactsActions.changeContactsByReceiveMsg(imcore,msg));case 4:case"end":return _context.stop()}},_callee,_this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}function panelSendMsg(imcore,msg){return function(dispatch,getState){(0,_utils.publish)(imcore,dispatch,{"type":ActionType.PANEL_SEND_MSG,"payload":msg.getPublish()})}}function panelUpdateMsg(imcore,msg){return function(dispatch,getState){getState().panel.activeContact&&(0,_utils.publish)(imcore,dispatch,{"type":ActionType.PANEL_UPDATE_MSG,"payload":msg})}}function panelUpdateListMsg(imcore,msg){return function(dispatch,getState){dispatch(contactsActions.changeContactsBySendMsg(imcore,msg)),dispatch(historyContactsActions.changeContactsBySendMsg(imcore,msg))}}function panelUpdateReadedMsg(imcore,toImId){var _this2=this;return function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var newList,newCurList,newEarlyList,LSKey,tabsUnReadJson,state,unreadCount;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,newList=[],newCurList=[],newEarlyList=[],LSKey=(0,_constants.getLocalStorageKey)(imcore.userInfo.oppositeImId),_context2.next=5,imcore.getLocalDataPromise(LSKey.TABS_UNREAD);case 5:return tabsUnReadJson=_context2.sent,state=getState(),imcore.handleLog("msgReaded--- panelUpdateReadedMsg -----\x3e",toImId),state.contacts.contacts.length>0&&(newList=state.contacts.contacts.map(function(v){return v.oppositeImId===toImId&&(v.unReadCnt=0),v})),state.historyContacts.curMonthContacts.length>0&&(newCurList=state.historyContacts.curMonthContacts.map(function(v){return v.oppositeImId===toImId&&(v.unReadCnt=0),v})),state.historyContacts.earlierContacts.length>0&&(newEarlyList=state.historyContacts.earlierContacts.map(function(v){return v.oppositeImId===toImId&&(v.unReadCnt=0),v})),imcore.handleLog("msgReaded--- get newList -----\x3e",newList),_context2.next=14,_api.contactsApi.getTotalUnread(imcore);case 14:unreadCount=_context2.sent,1===unreadCount.flag&&dispatch(setUnReadTabsToLocal(imcore,"contacts",unreadCount.data.count)),!state.panel.opened&&state.setting.setting.message&&dispatch(setPanelUnReadToLocal(imcore,unreadCount>0)),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.UPDATE_CONTACT_READED_MSG,"payload":newList}),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.UPDATE_HISTORYCONTACT_READED_MSG,"payload":{"curMonthContacts":newCurList,"earlierContacts":newEarlyList}}),_context2.next=24;break;case 21:_context2.prev=21,_context2.t0=_context2["catch"](0),imcore.handleErr(_context2.t0);case 24:case"end":return _context2.stop()}},_callee2,_this2,[[0,21]])}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}()}function panelConnMsg(imcore,msg){return function(dispatch,getState){(0,_utils.publish)(imcore,dispatch,{"type":ActionType.PANEL_CONN_MSG,"payload":msg})}}function initPanel(imcore,hasConnect){var _this3=this;return function(){var _ref3=_asyncToGenerator(_regenerator2["default"].mark(function _callee3(dispatch,getState){var config,selectedTabKey,index;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:try{config=(0,_config2["default"])(imcore.env),selectedTabKey=LT.Cookie.get(_constants2.enums.COOKIE_KEY_CUR_TAB)||"contacts",index=config.tabs.findIndex(function(v){return v.key===selectedTabKey}),-1===index&&(index=0),dispatch(initTab(imcore,config.tabs[index])),imcore.unReadMsg(function(data){data.readFlag||data.unReadCounts>0&&!getState().panel.opened&&dispatch(setPanelUnReadToLocal(imcore,!0)),hasConnect&&(dispatch(contactsActions.getContacts(imcore,hasConnect)),dispatch(historyContactsActions.getHistoryContactsList(imcore,hasConnect))),getState().contacts.firstLoaded||(dispatch(contactsActions.getContacts(imcore)),dispatch(getUnReadFromLocal(imcore))),getState().historyContacts.firstLoaded||dispatch(historyContactsActions.getHistoryContactsList(imcore))}),dispatch(setGreetingActions.greetingStatus(imcore)),dispatch(setGreetingActions.greetingList(imcore))}catch(e){imcore.handleErr(e)}case 1:case"end":return _context3.stop()}},_callee3,_this3)}));return function(_x5,_x6){return _ref3.apply(this,arguments)}}()}function reConnect(imcore,tab){}function initTab(imcore,tab){return{"type":ActionType.INIT_TAB,"payload":tab}}function selectTab(imcore,tab){var _this4=this;return function(){var _ref4=_asyncToGenerator(_regenerator2["default"].mark(function _callee4(dispatch,getState){return _regenerator2["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:"contacts"===tab.key?(getState().contacts.firstLoaded||dispatch(contactsActions.getContacts(imcore)),window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.OPEN_CONTACTS)):(dispatch(setUnReadTabsToLocal(imcore,tab.key,!1)),"historycontacts"===tab.key?(!getState().historyContacts.firstLoaded&&dispatch(historyContactsActions.getHistoryContactsList(imcore)),window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.OPEN_HISTORYLIST)):"notice"===tab.key?(!getState().notice.firstLoaded&&dispatch(noticeActions.getNoticeList(imcore)),window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.OPEN_NOTICE)):"sns"===tab.key&&(dispatch(snsActions.getSnsList(imcore)),window.tlog=window.tlog||[],tlog.push((0,_config2["default"])(imcore.env).tlogs.OPEN_SNS))),LT.Cookie.set(_constants2.enums.COOKIE_KEY_CUR_TAB,tab.key,360,"/"),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.SELECT_TAB,"payload":tab});case 3:case"end":return _context4.stop()}},_callee4,_this4)}));return function(_x7,_x8){return _ref4.apply(this,arguments)}}()}function selectTabByKey(imcore,tabkey){var _this5=this;return function(){var _ref5=_asyncToGenerator(_regenerator2["default"].mark(function _callee5(dispatch,getState){var tabs,index;return _regenerator2["default"].wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:tabs=(0,_config2["default"])(imcore.env).tabs,index=tabs.findIndex(function(v){return v.key===tabkey}),index>-1&&dispatch(selectTab(imcore,tabs[index]));case 3:case"end":return _context5.stop()}},_callee5,_this5)}));return function(_x9,_x10){return _ref5.apply(this,arguments)}}()}function getUnReadFromLocal(imcore){var _this6=this;return function(){var _ref6=_asyncToGenerator(_regenerator2["default"].mark(function _callee6(dispatch,getState){var config,LSKey,unRead,tabsUnReadJson,unreadCount;return _regenerator2["default"].wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return config=(0,_config2["default"])(imcore.env),LSKey=(0,_constants.getLocalStorageKey)(imcore.userInfo.oppositeImId),_context6.next=4,imcore.getLocalDataPromise(LSKey.PANEL_IS_READ_KEY);case 4:return unRead=_context6.sent,(0,_utils.publish)(imcore,dispatch,{"type":ActionType.SET_PANEL_UNREAD,"payload":unRead}),_context6.next=8,imcore.getLocalDataPromise(LSKey.TABS_UNREAD);case 8:return tabsUnReadJson=_context6.sent,Array.isArray(tabsUnReadJson)&&tabsUnReadJson.length===config.tabs.length||(tabsUnReadJson=[0,!1,!1]),_context6.next=12,_api.contactsApi.getTotalUnread(imcore);case 12:unreadCount=_context6.sent,1===unreadCount.flag&&dispatch(setUnReadTabsToLocal(imcore,"contacts",unreadCount.data.count)),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.SET_TABS_UNREAD,"payload":tabsUnReadJson});case 15:case"end":return _context6.stop()}},_callee6,_this6)}));return function(_x11,_x12){return _ref6.apply(this,arguments)}}()}function openPanel(imcore){var _this7=this;return function(){var _ref7=_asyncToGenerator(_regenerator2["default"].mark(function _callee7(dispatch,getState){var config;return _regenerator2["default"].wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:try{config=(0,_config2["default"])(imcore.env),dispatch(setPanelUnReadToLocal(imcore,!1)),setTimeout(function(){return dispatch(selectTab(imcore,getState().panel.activeTab))},500),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.OPEN_PANEL,"payload":!0})}catch(e){imcore.handleErr(e)}case 1:case"end":return _context7.stop()}},_callee7,_this7)}));return function(_x13,_x14){return _ref7.apply(this,arguments)}}()}function closePanel(imcore){return function(dispatch,getState){(0,_utils.publish)(imcore,dispatch,{"type":ActionType.CLOSE_PANEL,"payload":{"opened":!1}})}}function setUnReadTabsToLocal(imcore,tabkey,unRead){var _this8=this;return function(){var _ref8=_asyncToGenerator(_regenerator2["default"].mark(function _callee8(dispatch,getState){var config,LSKey,tabsUnReadArr,newTabsUnRead;return _regenerator2["default"].wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return config=(0,_config2["default"])(imcore.env),LSKey=(0,_constants.getLocalStorageKey)(imcore.userInfo.oppositeImId),_context8.next=4,imcore.getLocalDataPromise(LSKey.TABS_UNREAD);case 4:tabsUnReadArr=_context8.sent,Array.isArray(tabsUnReadArr)&&tabsUnReadArr.length===config.tabs.length||(tabsUnReadArr=[0,!1,!1]),newTabsUnRead=config.tabs.map(function(v,i){return config.tabs[i].key===tabkey?unRead:tabsUnReadArr[i]}),imcore.setLocalData(LSKey.TABS_UNREAD,newTabsUnRead),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.SET_TABS_UNREAD,"payload":newTabsUnRead});case 9:case"end":return _context8.stop()}},_callee8,_this8)}));return function(_x15,_x16){return _ref8.apply(this,arguments)}}()}function setPanelUnReadToLocal(imcore,unRead){return function(dispatch,getState){if(getState().setting.setting.message){var LSKey=(0,_constants.getLocalStorageKey)(imcore.userInfo.oppositeImId);imcore.setLocalData(LSKey.PANEL_IS_READ_KEY,unRead),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.SET_PANEL_UNREAD,"payload":unRead})}}}function selectContact(imcore,contactList,callback){var _this9=this;return function(){var _ref9=_asyncToGenerator(_regenerator2["default"].mark(function _callee9(dispatch,getState){var contact,readed,setTlog,contactTlog,inBlackData,attentionData,inBlack,activeContact,unreadCount;return _regenerator2["default"].wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(_context9.prev=0,contact=void 0,!contactList.isNotPanel){_context9.next=8;break}return _context9.next=5,_api.contactsApi.getOneContact(imcore,contactList);case 5:contact=_context9.sent,_context9.next=9;break;case 8:contact=contactList;case 9:if(!(void 0==contact.unReadCnt||contact.unReadCnt>0)){_context9.next=15;break}return _context9.next=12,_api.contactsApi.readed(imcore,contact.oppositeImId);case 12:if(readed=_context9.sent){_context9.next=15;break}return _context9.abrupt("return");case 15:if(setTlog=(0,_config2["default"])(imcore.env).tlogs,contactTlog=void 0,"c"===imcore.env&&(contact.oppositeUserKind==_constants.UserType.USER_TYPE_C?contactTlog=setTlog.OPEN_DIALOG_C:contact.oppositeUserKind==_constants.UserType.USER_TYPE_B?contactTlog=setTlog.OPEN_DIALOG_B:contact.oppositeUserKind==_constants.UserType.USER_TYPE_H&&(contactTlog=setTlog.OPEN_DIALOG_H),window.tlog=window.tlog||[],tlog.push(contactTlog)),inBlackData=void 0,attentionData=void 0,inBlack=getState().shield.inBlack,(activeContact=getState().panel.activeContact)&&activeContact.oppositeImId===contact.oppositeImId){_context9.next=46;break}if((0,_utils.publish)(imcore,dispatch,{"type":ActionType.SELECT_CONTACT_START,"payload":{"loadingActiveContact":!0}}),_Dialog2["default"].closeAllConfirm({"parent":"chat"}),"b"!==imcore.env&&"c"!==imcore.env){_context9.next=29;break}return _context9.next=27,shieldActions.inBlackStatusAjax(imcore,contact);case 27:inBlackData=_context9.sent,inBlackData.flag&&("b"===imcore.env?inBlack=0!==inBlackData.data.rejectStatus&&2!==inBlackData.data.rejectStatus:"c"===imcore.env&&(inBlack=inBlackData.data.inBlack),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.INBLACK_STATUS,"payload":inBlack}));case 29:if("h"!==imcore.env.toLowerCase()){_context9.next=35;break}return _context9.next=32,_api.hcoreApi.isAttention(imcore,contact.oppositeImId);case 32:attentionData=_context9.sent,contact.isAttention=attentionData.isAttention,contact.usercEncodeId=attentionData.usercEncodeId;case 35:return imcore.event.trigger("selectContact",[contact]),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.SELECT_CONTACT,"payload":{"contact":contact,"loadingActiveContact":!1}}),_context9.next=39,_api.contactsApi.getTotalUnread(imcore);case 39:unreadCount=_context9.sent,1===unreadCount.flag&&dispatch(setUnReadTabsToLocal(imcore,"contacts",unreadCount.data.count)),dispatch(historyActions.getInitialServerHistory(imcore,contact)),dispatch(historyActions.hideHistory(imcore)),callback&&callback(contact,inBlack),_context9.next=47;break;case 46:callback&&callback(contact,inBlack);case 47:_context9.next=52;break;case 49:_context9.prev=49,_context9.t0=_context9["catch"](0),imcore.handleErr(_context9.t0);case 52:case"end":return _context9.stop()}},_callee9,_this9,[[0,49]])}));return function(_x17,_x18){return _ref9.apply(this,arguments)}}()}function unselectActiveContact(imcore){return function(dispatch,getState){dispatch(historyActions.clearInitialServerHistory(imcore)),(0,_utils.publish)(imcore,dispatch,{"type":ActionType.UNSELECT_ACTIVE_CONTACT,"payload":null})}}function updateMsgList(imcore,updateFunc){return function(dispatch,getState){(0,_utils.publish)(imcore,dispatch,{"type":ActionType.UPDATE_MSGLIST,"payload":updateFunc(getState().panel.msgList)})}}function updateHattention(imcore,isAttention){return function(dispatch,getState){var contact=Object.assign({},getState().panel.activeContact);contact.isAttention=isAttention,(0,_utils.publish)(imcore,dispatch,{"type":ActionType.UPDATE_ATTENTION,"payload":{"contact":contact}})}}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.panelReceiveMsg=panelReceiveMsg,exports.panelSendMsg=panelSendMsg,exports.panelUpdateMsg=panelUpdateMsg,exports.panelUpdateListMsg=panelUpdateListMsg,exports.panelUpdateReadedMsg=panelUpdateReadedMsg,exports.panelConnMsg=panelConnMsg,exports.initPanel=initPanel,exports.reConnect=reConnect,exports.initTab=initTab,exports.selectTab=selectTab,exports.selectTabByKey=selectTabByKey,exports.getUnReadFromLocal=getUnReadFromLocal,exports.openPanel=openPanel,exports.closePanel=closePanel,exports.setUnReadTabsToLocal=setUnReadTabsToLocal,exports.setPanelUnReadToLocal=setPanelUnReadToLocal,exports.selectContact=selectContact,exports.unselectActiveContact=unselectActiveContact,exports.updateMsgList=updateMsgList,exports.updateHattention=updateHattention;var _constants=__webpack_require__("E9QE"),_receive=__webpack_require__("1Rhn"),_ActionType=__webpack_require__("TV+w"),ActionType=_interopRequireWildcard(_ActionType),_contacts=(__webpack_require__("O4JY"),__webpack_require__("FUHg")),contactsActions=_interopRequireWildcard(_contacts),_history=__webpack_require__("aCyU"),historyActions=_interopRequireWildcard(_history),_historyContacts=__webpack_require__("OsLH"),historyContactsActions=_interopRequireWildcard(_historyContacts),_notice=__webpack_require__("EiUU"),noticeActions=_interopRequireWildcard(_notice),_sns=__webpack_require__("ngh6"),snsActions=_interopRequireWildcard(_sns),_shield=__webpack_require__("tp+D"),shieldActions=_interopRequireWildcard(_shield),_report=__webpack_require__("snAd"),_setGreeting=(_interopRequireWildcard(_report),__webpack_require__("tIMm")),setGreetingActions=_interopRequireWildcard(_setGreeting),_api=(__webpack_require__("6svF"),__webpack_require__("wVNl")),_constants2=__webpack_require__("acFS"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_utils=__webpack_require__("PQSX"),_Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog)},"dXXP":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_addTlog=(__webpack_require__("PQSX"),__webpack_require__("rF9R")),_ContactInfo=__webpack_require__("TJbS"),_ContactInfo2=_interopRequireDefault(_ContactInfo),_ContactCard=__webpack_require__("6iSI"),_ContactCard2=_interopRequireDefault(_ContactCard),_actions=__webpack_require__("IPoy"),_Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog);__webpack_require__("p8K0");var Contacts=function(_Component){function Contacts(props){_classCallCheck(this,Contacts);var _this=_possibleConstructorReturn(this,(Contacts.__proto__||Object.getPrototypeOf(Contacts)).call(this,props));return _this.config=(0,_config2["default"])(props.imcore.env),_this.containerDom=null,_this}return _inherits(Contacts,_Component),_createClass(Contacts,[{"key":"componentDidMount","value":function(){var _props=this.props,that=(_props.imcore,_props.actions,_props.contacts,_props.loading,_props.nomore,_props.firstLoaded,this),$container=$(this.containerDom),containerHeight=$container.height();$container.on("scroll",function(){var scrollTop=this.scrollTop,listHeight=$container.find("ul").height();scrollTop+containerHeight+20>listHeight&&that.props.firstLoaded&&setTimeout(function(){return that.getContacts()},100)}),$container.hover(function(){$(this).addClass("lihover")},function(){$(this).removeClass("lihover")})}},{"key":"componentWillReceiveProps","value":function(nextProps){var _props2=this.props,actions=_props2.actions,activeTab=_props2.activeTab;nextProps.activeTab.key!==activeTab.key&&!1===nextProps.firstLoaded&&"contacts"===nextProps.activeTab.key&&actions.selectTab(imcore,nextProps.activeTab),nextProps.activeTab.key!==activeTab.key&&"contacts"===activeTab.key&&_Dialog2["default"].closeAllConfirm({"parent":"main"})}},{"key":"getContacts","value":function(){var _props3=this.props,imcore=_props3.imcore,actions=_props3.actions,loading=_props3.loading;_props3.nomore||loading||actions.getContacts(imcore)}},{"key":"delContact","value":function(v,e){var _props4=this.props,actions=_props4.actions,imcore=_props4.imcore;window.tlog=window.tlog||[],tlog.push(this.config.tlogs.DEL_CURRENT_MESSAGE),_Dialog2["default"].confirm({"parent":"main","onOk":function(){actions.deleteContact(imcore,v)},"text":"确定删除该聊天？"}),e.stopPropagation()}},{"key":"openHistoryContacts","value":function(){this.props.actions.selectTabByKey(this.props.imcore,"historycontacts")}},{"key":"renderList","value":function(){var _this2=this,_props5=this.props,contacts=(_props5.activeTab,_props5.contacts),imcore=_props5.imcore,actions=_props5.actions,firstLoaded=_props5.firstLoaded;_props5.loading,_props5.setting;return firstLoaded?_react2["default"].createElement("div",{"ref":function(dom){return _this2.containerDom=dom},"className":(0,_classnames2["default"])({"contact-list":!0,"contactlist-with-recent-contacts":"c"!==imcore.env})},"c"!==imcore.env.toLowerCase()?_react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","pushStr":this.config.tlogs.CLICK_HISTORYCONTACTS,"className":"btn-recent-contacts","onClick":function(){return _this2.openHistoryContacts()}},_react2["default"].createElement("i",{"className":"recent-contacts"}),"最近联系人"):null,_react2["default"].createElement("ul",null,contacts.map(function(v,i){return _react2["default"].createElement("li",{"key":i,"className":"clearfix"},_react2["default"].createElement("a",{"className":"close","href":"javascript:;","onClick":function(e){return _this2.delContact(v,e)}},"×"),_react2["default"].createElement(_ContactInfo2["default"],{"imcore":imcore,"contacts":v,"actions":actions,"isHistory":!0}),_react2["default"].createElement(_ContactCard2["default"],{"imcore":imcore,"contacts":v}))})),0===contacts.length?_react2["default"].createElement("div",{"className":"no-contacts","style":{"height":"calc(100% - "+imcore.env!="c"?"122":"60px)"}},_react2["default"].createElement("span",null,"没有新的消息")):null):_react2["default"].createElement("div",{"className":"contact-list","ref":function(dom){return _this2.containerDom=dom}},_react2["default"].createElement("div",{"className":"list-loading"},_react2["default"].createElement("em",null)))}},{"key":"render","value":function(){var _props6=this.props,activeTab=_props6.activeTab;_props6.contacts,_props6.imcore,_props6.actions;return _react2["default"].createElement("div",{"className":(0,_classnames2["default"])("contacts",{"hide":"contacts"!==activeTab.key})},this.renderList())}}]),Contacts}(_react.Component),mapStateToProps=function(state){return{"activeTab":state.panel.activeTab,"contacts":state.contacts.contacts,"firstLoaded":state.contacts.firstLoaded,"nomore":state.contacts.nomore,"loading":state.contacts.loading,"opened":state.panel.opened,"setting":state.setting}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.contactsActions,_actions.panelActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(Contacts)},"dYCy":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function Err(props){var message=props.message;return _react2["default"].createElement("div",{"className":"err-msg","dangerouslySetInnerHTML":{"__html":message.data}})}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_enums=__webpack_require__("O4JY"),_history=__webpack_require__("zG6l"),_actions=__webpack_require__("IPoy"),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_imgPreview=__webpack_require__("et+h");_interopRequireDefault(_imgPreview);__webpack_require__("tQKs");var _MsgCards=__webpack_require__("UGzB"),Message=function(_Component){function Message(props){return _classCallCheck(this,Message),_possibleConstructorReturn(this,(Message.__proto__||Object.getPrototypeOf(Message)).call(this,props))}return _inherits(Message,_Component),_createClass(Message,[{"key":"componentWillReceiveProps","value":function(nextProps){nextProps.message.state!==this.props.message.state&&this.props.scrollToBottom()}},{"key":"resendMsg","value":function(imcore,message){this.props.allstate.sendMsg;this.props.actions.resendMsg(imcore,message)}},{"key":"rendermessage","value":function(ifISend){var _props=this.props,message=_props.message,msgcard=_props.msgcard,type=(message.extType,message.type),MsgCard=msgcard;return"img"===type?_react2["default"].createElement(_MsgCards.Image,this.props):"err"===type?_react2["default"].createElement(Err,this.props):(0,_history.messageHistoryFilter)(message)?MsgCard?_react2["default"].createElement(MsgCard,_extends({},this.props,{"ifISend":ifISend})):_react2["default"].createElement(_MsgCards.Txt,this.props):"c"==imcore.env?_react2["default"].createElement("div",{"className":"content"},_enums.CompatibleExtType.CANNOT_SHOW_CIMG):"b"==imcore.env?_react2["default"].createElement("div",{"className":"content"},_enums.CompatibleExtType.CANNOT_SHOW_BIMG):_react2["default"].createElement("div",{"className":"content"},_enums.CompatibleExtType.CANNOT_SHOW_HIMG)}},{"key":"render","value":function(){var _this2=this,_props2=this.props,message=_props2.message,imcore=(_props2.actions,_props2.imcore),ifISend=(_props2.activeContact,message.from===imcore.userInfo.oppositeImId);return _react2["default"].createElement("div",{"className":(0,_classnames2["default"])({"message":!0,"send":ifISend,"receive":!ifISend})},_react2["default"].createElement("div",{"className":"header"}),_react2["default"].createElement("div",{"className":"body clearfix"},this.rendermessage(ifISend),_react2["default"].createElement("i",{"className":(0,_classnames2["default"])({"loadingicon":!0,"sendloading":ifISend,"receiveloading":!ifISend,"hide":!message.status})})),_react2["default"].createElement("div",{"className":"footer"},message.state==_enums.MsgState.PREPROCESS_FAILED&&_react2["default"].createElement("p",{"className":"resend"},_react2["default"].createElement("em",{"className":"webim-icons16 icons16-error-red"}),"发送失败，点击 ",message.isClick?_react2["default"].createElement("span",{"className":"disabled"},"重新发送"):_react2["default"].createElement("a",{"href":"javascript:;","onClick":function(){_this2.resendMsg(imcore,message)}},"重新发送")),message.state===_enums.MsgState.SEND_FAILED&&_react2["default"].createElement("p",{"className":"resend"},_react2["default"].createElement("em",{"className":"webim-icons16 icons16-error-red"}),"发送失败")))}}]),Message}(_react.Component),mapStateToProps=function(state){return{"allstate":state}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.messageActions,_actions.panelActions,_actions.historyActions),dispatch),"dispatch":dispatch}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(Message)},"e6+Q":function(module,exports,__webpack_require__){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},"et+h":function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function imgPreview(props){var $dialog=(props.parent,$("#im-image-preview-dialog"));$dialog.length||($dialog=$('<div id="im-image-preview-dialog"></div>'),$dialog.appendTo("body"));var _onClose=function(){$dialog.length&&ReactDOM.unmountComponentAtNode($dialog[0])};ReactDOM.render(_react2["default"].createElement(ImgContent,_extends({"onClose":function(){return _onClose()}},props)),$dialog[0])}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=imgPreview;var _react=__webpack_require__("Jmof"),_react2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_react);__webpack_require__("Rakl");var ImgContent=function(_Component){function ImgContent(props){return _classCallCheck(this,ImgContent),_possibleConstructorReturn(this,(ImgContent.__proto__||Object.getPrototypeOf(ImgContent)).call(this,props))}return _inherits(ImgContent,_Component),_createClass(ImgContent,[{"key":"componentDidMount","value":function(){}},{"key":"componentWillUnMount","value":function(){}},{"key":"render","value":function(){var _props=this.props,src=_props.src,onClose=_props.onClose;return _react2["default"].createElement("div",{"className":"im-image-preview-container"},_react2["default"].createElement("a",{"className":"close-preview","href":"javascript:;","onClick":function(){onClose()}},"×"),_react2["default"].createElement("div",{"className":"im-image-preview-wrap"},_react2["default"].createElement("img",{"src":src})))}}]),ImgContent}(_react.Component)},"fPvA":function(module,exports){},"fY3o":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_34.f3b857dc.png"},"faAt":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0}),exports.storeShape=exports.subscriptionShape=void 0;var _propTypes=__webpack_require__("KSGD"),_propTypes2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_propTypes);exports.subscriptionShape=_propTypes2["default"].shape({"trySubscribe":_propTypes2["default"].func.isRequired,"tryUnsubscribe":_propTypes2["default"].func.isRequired,"notifyNestedSubs":_propTypes2["default"].func.isRequired,"isSubscribed":_propTypes2["default"].func.isRequired}),exports.storeShape=_propTypes2["default"].shape({"subscribe":_propTypes2["default"].func.isRequired,"dispatch":_propTypes2["default"].func.isRequired,"getState":_propTypes2["default"].func.isRequired})},"fy8N":function(module,exports){},"g8Ab":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_28.3acf50ca.png"},"gt/O":function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"guPL":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_16.bbbe27ad.png"},"hDK5":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_30.24f7278c.png"},"hYij":function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(global,factory){"object"===_typeof(exports)&&void 0!==module?module.exports=factory():(__WEBPACK_AMD_DEFINE_FACTORY__=factory,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,function(){var REACT_STATICS={"childContextTypes":!0,"contextTypes":!0,"defaultProps":!0,"displayName":!0,"getDefaultProps":!0,"getDerivedStateFromProps":!0,"mixins":!0,"propTypes":!0,"type":!0},KNOWN_STATICS={"name":!0,"length":!0,"prototype":!0,"caller":!0,"callee":!0,"arguments":!0,"arity":!0},defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=getPrototypeOf&&getPrototypeOf(Object);return function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if("string"!=typeof sourceComponent){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);inheritedComponent&&inheritedComponent!==objectPrototype&&hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}var keys=getOwnPropertyNames(sourceComponent);getOwnPropertySymbols&&(keys=keys.concat(getOwnPropertySymbols(sourceComponent)));for(var i=0;i<keys.length;++i){var key=keys[i];if(!(REACT_STATICS[key]||KNOWN_STATICS[key]||blacklist&&blacklist[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}return targetComponent}return targetComponent}})},"hk1R":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.urls=exports.tlogs=exports.tabs=void 0;var _tabs=__webpack_require__("U7Nd");Object.defineProperty(exports,"tabs",{"enumerable":!0,"get":function(){return _tabs.tabs}});var _tlogs2=__webpack_require__("Rsul"),_tlogs=_interopRequireWildcard(_tlogs2),_urls2=__webpack_require__("Svzl"),_urls=_interopRequireWildcard(_urls2);exports.tlogs=_tlogs,exports.urls=_urls},"i6eo":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_22.9334129c.png"},"iMV8":function(module,exports){},"jQQJ":function(module,exports,__webpack_require__){"use strict";function shieldReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:shieldInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.INBLACK_STATUS:return Object.assign({},state,{"inBlack":action.payload});case _actions.ActionType.INBLACK_DIALOG:return Object.assign({},state,{"dialogVisible":action.payload});default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.shieldInitialState=void 0,exports.shieldReducer=shieldReducer;var _actions=__webpack_require__("IPoy"),shieldInitialState=exports.shieldInitialState={"inBlack":!1,"dialogVisible":!1}},"jrvr":function(module,exports){},"jtzr":function(module,exports,__webpack_require__){"use strict";function LastMsg(props){var env=props.env,message=props.message,len=props.len,name=props.name,msg=new _lastmsg.LastMessage;if(msg.set(message),!(0,_lastmsg.messageLastMsgFilter)(msg))return"c"==env?_react2["default"].createElement("span",null,(0,_utils.getBrief)(_enums.CompatibleExtType.CANNOT_SHOW_CIMG,20)):"b"==env?_react2["default"].createElement("span",null,(0,_utils.getBrief)(_enums.CompatibleExtType.CANNOT_SHOW_BIMG,20)):_react2["default"].createElement("span",null,(0,_utils.getBrief)(_enums.CompatibleExtType.CANNOT_SHOW_HIMG,20));var getMsg="";return getMsg="c"==env?getLastMsgC(msg,len,name):"b"==env?getLastMsgB(msg,len,name):getLastMsgH(msg,len,name),_react2["default"].createElement("span",null,getMsg)}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=LastMsg;var _react=__webpack_require__("Jmof"),_react2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_react),_enums=__webpack_require__("O4JY"),_utils=__webpack_require__("PQSX"),_constants=__webpack_require__("E9QE"),_lastmsg=__webpack_require__("93X0"),getLastMsgC=function(msg){var len=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,name=arguments[2],lastMsg="",msgType=msg.type,msgText=msg.msg,extType=msg.extType,senderKind=msg.senderKind;msg.receiverKind;switch(extType-0){case _enums.ExtType.MESSAGE_TEXT:lastMsg="img"===msgType?"[图片]":(0,_utils.getBrief)(msgText,len);break;case _enums.ExtType.MESSAGE_RESUME:lastMsg="[委托的简历] "+name+"的简历";break;case _enums.ExtType.MESSAGE_SEND_JOB:lastMsg=senderKind==_constants.UserType.USER_TYPE_C?"[我感兴趣的职位]":senderKind==_constants.UserType.USER_TYPE_B?"[邀您应聘的职位]":senderKind==_constants.UserType.USER_TYPE_H?"[为你推荐的职位]":"[职位]";break;case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:senderKind==_constants.UserType.USER_TYPE_C?lastMsg="[应聘简历]":senderKind==_constants.UserType.USER_TYPE_H&&(lastMsg="[应聘的简历] "+name+"的简历");break;case _enums.ExtType.MESSAGE_SEND_NAMECARD:lastMsg="[发送名片]";break;case _enums.ExtType.MESSAGE_ASK_RESUME:lastMsg="[索要简历]我想要一份你的简历，你是否同意？";break;case _enums.ExtType.MESSAGE_SEND_RATINGBAR:lastMsg="[请为猎头服务做出评价]";break;case _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK:lastMsg="[已拒绝推荐职位]";break;case _enums.ExtType.MESSAGE_SEND_APPLYSUCFEEDBACK:lastMsg="[已接受推荐职位]";break;default:lastMsg=(0,_utils.getBrief)(msgText,len)}return lastMsg},getLastMsgB=function(msg){var len=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,lastMsg=(arguments[2],""),msgType=msg.type,msgText=msg.msg,extType=msg.extType;msg.senderKind,msg.receiverKind;switch(extType-0){case _enums.ExtType.MESSAGE_TEXT:lastMsg="img"===msgType?"[图片]":(0,_utils.getBrief)(msgText,len);break;case _enums.ExtType.MESSAGE_SEND_JOB:lastMsg="[职位]";break;case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:lastMsg="[应聘简历]";break;case _enums.ExtType.MESSAGE_SEND_NAMECARD:lastMsg="[应聘者的名片]";break;case _enums.ExtType.MESSAGE_ASK_RESUME:lastMsg="索要简历的请求已发送";break;default:lastMsg=(0,_utils.getBrief)(msgText,len)}return lastMsg},getLastMsgH=function(msg){var len=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,name=arguments[2],lastMsg="",msgType=msg.type,msgText=msg.msg,extType=msg.extType,senderKind=msg.senderKind;msg.receiverKind;switch(extType-0){case _enums.ExtType.MESSAGE_TEXT:lastMsg="img"===msgType?"[图片]":(0,_utils.getBrief)(msgText,len);break;case _enums.ExtType.MESSAGE_RESUME:lastMsg="[委托的简历] "+name+"的简历";break;case _enums.ExtType.MESSAGE_SEND_JOB:lastMsg=senderKind==_constants.UserType.USER_TYPE_C?"[我感兴趣的职位]":senderKind==_constants.UserType.USER_TYPE_H?"[我推荐的职位]":"[职位]";break;case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:lastMsg="[应聘的简历] "+name+"的简历";break;case _enums.ExtType.MESSAGE_SEND_NAMECARD:lastMsg="[应聘者的名片] "+name+"的名片";break;case _enums.ExtType.MESSAGE_ASK_RESUME:lastMsg="索要简历的请求已发送";break;case _enums.ExtType.MESSAGE_SEND_RATINGBAR:lastMsg="[请为猎头服务做出评价]";break;case _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK:lastMsg="[已拒绝推荐职位]";break;case _enums.ExtType.MESSAGE_SEND_APPLYSUCFEEDBACK:lastMsg="[已接受推荐职位]";break;default:lastMsg=(0,_utils.getBrief)(msgText,len)}return lastMsg}},"k4UX":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_7.86717526.png"},"kWFh":function(module,exports,__webpack_require__){"use strict";function addToTop(list,item,condition){if("[object Array]"===Object.prototype.toString.call(list)){var i=list.findIndex(function(v,i,arr){return condition(v,i,arr)});return-1===i?[item].concat(list):[Object.assign({},list[i],item)].concat(list.slice(0,i)).concat(list.slice(i+1))}}function updateList(list,item,condition){if("[object Array]"===Object.prototype.toString.call(list)){var i=list.findIndex(function(v,i,arr){return condition(v,i,arr)});return-1===i?list:list.slice(0,i).concat([Object.assign({},list[i],item)]).concat(list.slice(i+1))}}function contactsReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:contactsInitialState,action=arguments[1],i=void 0,contact=void 0,newcontacts=void 0;switch(action.type){case _actions.ActionType.GET_CONTACTS_START:case _actions.ActionType.GET_CONTACTS_FAIL:case _actions.ActionType.GET_CONTACTS_SUCC:return Object.assign({},state,action.payload);case _actions.ActionType.DELETE_CONTACT:return contact=action.payload,i=state.contacts.findIndex(function(v){return v.oppositeImId===contact.oppositeImId}),Object.assign({},state,{"contacts":state.contacts.slice(0,i).concat(state.contacts.slice(i+1))});case _actions.ActionType.SELECT_CONTACT:return newcontacts=updateList(state.contacts,{"unReadCnt":0},function(v){return action.payload.contact.oppositeImId===v.oppositeImId}),Object.assign({},state,{"contacts":newcontacts});case _actions.ActionType.UPDATE_CONTACTS_BY_RECEIVE_MSG:return newcontacts=addToTop(state.contacts,action.payload,function(v){return v.oppositeImId===action.payload.oppositeImId}),Object.assign({},state,{"contacts":newcontacts});case _actions.ActionType.UPDATE_CONTACTS_BY_SEND_MSG:return Object.assign({},state,{"contacts":addToTop(state.contacts,Object.assign({},action.payload.contact,action.payload.lastMsg),function(v){return v.oppositeImId===action.payload.contact.oppositeImId})});case _actions.ActionType.UPDATE_CONTACT_READED_MSG:return imcore.handleLog("msgReaded--- UPDATE_CONTACT_READED_MSG -----\x3e",action.payload),Object.assign({},state,{"contacts":action.payload});default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.contactsInitialState=void 0,exports.contactsReducer=contactsReducer;var _actions=__webpack_require__("IPoy"),contactsInitialState=exports.contactsInitialState={"firstLoaded":!1,"contacts":[],"loading":!1,"curPage":0,"nomore":!1}},"l5Tb":function(module,exports,__webpack_require__){"use strict";function whenMapDispatchToPropsIsFunction(mapDispatchToProps){return"function"==typeof mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapDispatchToProps,"mapDispatchToProps"):void 0}function whenMapDispatchToPropsIsMissing(mapDispatchToProps){return mapDispatchToProps?void 0:(0,_wrapMapToProps.wrapMapToPropsConstant)(function(dispatch){return{"dispatch":dispatch}})}function whenMapDispatchToPropsIsObject(mapDispatchToProps){return mapDispatchToProps&&"object"===(void 0===mapDispatchToProps?"undefined":_typeof(mapDispatchToProps))?(0,_wrapMapToProps.wrapMapToPropsConstant)(function(dispatch){return(0,_redux.bindActionCreators)(mapDispatchToProps,dispatch)}):void 0}Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.whenMapDispatchToPropsIsFunction=whenMapDispatchToPropsIsFunction,exports.whenMapDispatchToPropsIsMissing=whenMapDispatchToPropsIsMissing,exports.whenMapDispatchToPropsIsObject=whenMapDispatchToPropsIsObject;var _redux=__webpack_require__("2KeS"),_wrapMapToProps=__webpack_require__("U33l");exports["default"]=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject]},"l8HY":function(module,exports){},"lCUn":function(module,exports,__webpack_require__){"use strict";function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(void 0,arguments))}}function bindActionCreators(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!==(void 0===actionCreators?"undefined":_typeof(actionCreators))||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":void 0===actionCreators?"undefined":_typeof(actionCreators))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var keys=Object.keys(actionCreators),boundActionCreators={},i=0;i<keys.length;i++){var key=keys[i],actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators}Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports["default"]=bindActionCreators},"lMc7":function(module,exports,__webpack_require__){"use strict";function compose(){for(var _len=arguments.length,funcs=Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];return 0===funcs.length?function(arg){return arg}:1===funcs.length?funcs[0]:funcs.reduce(function(a,b){return function(){return a(b.apply(void 0,arguments))}})}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=compose},"lQH1":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_18.343ae4d3.png"},"lYka":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var emotion1=__webpack_require__("UMX/"),emotion2=__webpack_require__("YhUb"),emotion3=__webpack_require__("GPuH"),emotion4=__webpack_require__("uCl5"),emotion5=__webpack_require__("+gDl"),emotion6=__webpack_require__("5QOt"),emotion7=__webpack_require__("k4UX"),emotion8=__webpack_require__("Zg6z"),emotion9=__webpack_require__("VbJv"),emotion10=__webpack_require__("KXXa"),emotion11=__webpack_require__("YkUF"),emotion12=__webpack_require__("BFS2"),emotion13=__webpack_require__("4Ahq"),emotion14=__webpack_require__("JSwt"),emotion15=__webpack_require__("x1Cn"),emotion16=__webpack_require__("guPL"),emotion17=__webpack_require__("BoXN"),emotion18=__webpack_require__("lQH1"),emotion19=__webpack_require__("m5fb"),emotion20=__webpack_require__("6qce"),emotion21=__webpack_require__("YSfR"),emotion22=__webpack_require__("i6eo"),emotion23=__webpack_require__("Q8Uo"),emotion24=__webpack_require__("WvpI"),emotion25=__webpack_require__("7y5x"),emotion26=__webpack_require__("XQ9f"),emotion27=__webpack_require__("xdnl"),emotion28=__webpack_require__("g8Ab"),emotion29=__webpack_require__("9OSA"),emotion30=__webpack_require__("hDK5"),emotion31=__webpack_require__("FmuY"),emotion32=__webpack_require__("MILx"),emotion33=__webpack_require__("BIPp"),emotion34=__webpack_require__("fY3o"),emotion35=__webpack_require__("Q1LG"),emotion36=__webpack_require__("wR3R"),emotion37=__webpack_require__("S2kR"),emotion38=__webpack_require__("Wwp8"),emotion39=__webpack_require__("VZsC"),emotion40=__webpack_require__("s8wk");exports.Emotions={"[忧伤]":""+emotion1,"[凝视]":""+emotion2,"[崩溃]":""+emotion3,"[晕菜]":""+emotion4,"[色]":""+emotion5,"[可爱]":""+emotion6,"[口水]":""+emotion7,"[财迷]":""+emotion8,"[愤怒]":""+emotion9,"[雷锋]":""+emotion10,"[睡觉]":""+emotion11,"[瞪眼]":""+emotion12,"[如花]":""+emotion13,"[得意]":""+emotion14,"[疑问]":""+emotion15,"[大哭]":""+emotion16,"[太阳]":""+emotion17,"[赞]":""+emotion18,"[ok]":""+emotion19,"[握手]":""+emotion20,"[闭嘴]":""+emotion21,"[呲牙]":""+emotion22,"[干杯]":""+emotion23,"[糕点]":""+emotion24,"[鬼脸]":""+emotion25,"[可怜]":""+emotion26,"[恐惧]":""+emotion27,"[冷汗]":""+emotion28,"[礼物]":""+emotion29,"[流泪]":""+emotion30,"[卖萌]":""+emotion31,"[佩服]":""+emotion32,"[钱袋]":""+emotion33,"[傻笑]":""+emotion34,"[叹气]":""+emotion35,"[微笑]":""+emotion36,"[委屈]":""+emotion37,"[耶]":""+emotion38,"[月亮]":""+emotion39,"[诅咒]":""+emotion40}},"m5fb":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_19.68e2153d.png"},"mqO+":function(module,exports,__webpack_require__){"use strict";function verify(selector,methodName,displayName){if(!selector)throw new Error("Unexpected value for "+methodName+" in "+displayName+".");"mapStateToProps"!==methodName&&"mapDispatchToProps"!==methodName||selector.hasOwnProperty("dependsOnOwnProps")||(0,_warning2["default"])("The selector for "+methodName+" of "+displayName+" did not specify a value for dependsOnOwnProps.")}function verifySubselectors(mapStateToProps,mapDispatchToProps,mergeProps,displayName){verify(mapStateToProps,"mapStateToProps",displayName),verify(mapDispatchToProps,"mapDispatchToProps",displayName),verify(mergeProps,"mergeProps",displayName)}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=verifySubselectors;var _warning=__webpack_require__("byaS"),_warning2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_warning)},"nSxQ":function(module,exports,__webpack_require__){"use strict";(function(global){Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},freeGlobal="object"==(void 0===global?"undefined":_typeof(global))&&global&&global.Object===Object&&global;exports["default"]=freeGlobal}).call(exports,__webpack_require__("DuR2"))},"ngh6":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function getSnsList(imcore){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var data,snsData;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.snsList});case 3:data=_context.sent,data.flag&&(snsData=[[{"txt":"我的好友","url":"https://c.liepin.com/connection/connectionlistforc/","count":data.data.friendCnt,"icon":"person"},{"txt":"我的粉丝","url":"https://c.liepin.com/connection/fans/","count":data.data.myFansCnt,"icon":"person"},{"txt":"我的关注","url":"https://c.liepin.com/connection/follows/","count":data.data.myFollowCnt,"icon":"concern"}],[{"txt":"我关注的猎头","url":"https://c.liepin.com/connection/connectionlistforh/?direction=out","count":data.data.followingHCnt,"icon":"person-arr"},{"txt":"关注我的猎头","url":"https://c.liepin.com/connection/connectionlistforh/?direction=in","count":data.data.followHCnt,"icon":"person-arrow"}],[{"txt":"我关注的公司","url":"https://c.liepin.com/connection/connectionlistfore/?direction=out","count":data.data.followBCnt,"icon":"building"}]],dispatch({"type":ActionType.SELECT_SNS,"payload":snsData})),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context["catch"](0),imcore.handleErr(_context.t0);case 10:case"end":return _context.stop()}},_callee,_this,[[0,7]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.getSnsList=getSnsList;var _utils=__webpack_require__("c3kU"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType)},"o46P":function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.fillInfo=exports.initJobMessage=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_regenerator),initJobMessage=exports.initJobMessage=function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(jobId,jobKind,senderKind,bsData){var data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_utils.pajax)({"url":LT.Env.wwwRoot+"job/loadjobinfo.json","data":{"jobId":jobId,"jobKind":jobKind,"fromUK":senderKind}});case 2:if(data=_context.sent,!data.flag){_context.next=7;break}return _context.abrupt("return",Object.assign(data.data,{"bsData":bsData}));case 7:return _context.abrupt("return",{"exist":!1});case 8:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}(),_enums=(exports.fillInfo=function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(imcore,message,extBody){var info,_ImcacheInfo,jobs,resumes,userId,jobId,jobKind,senderKind,bsData;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:info={},_ImcacheInfo=ImcacheInfo,jobs=_ImcacheInfo.jobs,resumes=_ImcacheInfo.resumes,userId=void 0,jobId=void 0,jobKind=void 0,senderKind=void 0,bsData=void 0,jobId=message.jobId,jobKind=message.jobKind,senderKind=message.senderKind,bsData=message.bsData||null,_context2.t0=message.extType,_context2.next=_context2.t0===_enums.ExtType.MESSAGE_RESUME?10:_context2.t0===_enums.ExtType.MESSAGE_SEND_APPLYRESUME?13:_context2.t0===_enums.ExtType.MESSAGE_SEND_NAMECARD?14:_context2.t0===_enums.ExtType.MESSAGE_SEND_APPLYSUCFEEDBACK?16:_context2.t0===_enums.ExtType.MESSAGE_SEND_JOB?16:_context2.t0===_enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK?16:26;break;case 10:return userId=extBody.userInfo?extBody.userInfo.userId:message.from,userId===imcore.userInfo.oppositeImId&&(info={"name":imcore.userInfo.oppositeUserName,"title":imcore.userInfo.oppositeUserTitle,"company":imcore.userInfo.oppositeUserCompany}),_context2.abrupt("break",26);case 13:return _context2.abrupt("break",26);case 14:return info={"name":imcore.userInfo.oppositeUserName,"sex":imcore.userInfo.oppositeUserGender,"workyear":imcore.userInfo.oppositeUserWorkYears,"dq":imcore.userInfo.oppositeUserDqName,"title":imcore.userInfo.oppositeUserTitle,"company":imcore.userInfo.oppositeUserCompany},_context2.abrupt("break",26);case 16:if(!jobs[jobId]){_context2.next=20;break}info=jobs[jobId],_context2.next=24;break;case 20:return _context2.next=22,initJobMessage(jobId,jobKind,senderKind,bsData);case 22:info=_context2.sent,jobs[jobId]=info;case 24:return info.messageSource=extBody.messageSource,_context2.abrupt("break",26);case 26:return _context2.abrupt("return",info);case 27:case"end":return _context2.stop()}},_callee2,this)}));return function(_x5,_x6,_x7){return _ref2.apply(this,arguments)}}(),__webpack_require__("O4JY")),_utils=__webpack_require__("c3kU")},"oiGr":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.WEBIM_WEBIMPOLLING="WebIMPolling",exports.WEBIM_CONF="WebIMConf",exports.WEBIM_TOKEN="WebIMToken",exports.WEBIM_PAGEID="WebImPageId",exports.WEBIM_CONNECT="WebImConnect"},"onow":function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function uuid(){var cdate=new Date,offdate=new Date(2010,1,1),offset=cdate.getTime()-offdate.getTime();return"ERROR_"+parseInt(offset).toString(16)+"_"+(""+Math.random()).replace(/\./,"_")}Object.defineProperty(exports,"__esModule",{"value":!0});exports.ErrorMsg=function ErrorMsg(_ref){var type=_ref.type,desc=_ref.desc;_classCallCheck(this,ErrorMsg),this.type="err",this.id=uuid(),this.errorType=type,this.timestamp=Date.now(),this.data=desc}},"p/9b":function(module,exports,__webpack_require__){"use strict";function ShowDialogFriends(subscribe,publish){var $friendsBtn=$("#header-c-beta2").find('[data-selector="drop-menu-friends"]'),$dot=$friendsBtn.find(".red-dot"),$friendsWrap=$('<div class="friends-wrap"><a href="javascript:;" class="chat-close">×</a><div class="friends-box"></div></div>');$friendsWrap.appendTo($("body"));var $friendsBox=$friendsWrap.find(".friends-box");subscribe("READ_NEW_FRIENDS",function(){$dot.addClass("hide")}),subscribe("UNREAD_NEW_FRIENDS",function(){$dot.removeClass("hide")});var socket=window.SocketMultTab||new _socket2["default"]({"imUserType":"0"});$friendsBtn.on("click",function(event){LT.ajax({"url":LT.Env.cRoot+"connection/new-friend.json","data":{"currentPage":0},"dataType":"jsonp","success":function(_ref){var flag=_ref.flag,data=_ref.data;if(1===flag){var newFriends=__webpack_require__("Kd7u").render({"list":data.datas,"hasNextPage":data.hasNextPage,"publish":publish,"subscribe":subscribe});$friendsBox.html(newFriends),$friendsWrap.find(".chat-close").click(function(event){$friendsBox.html("")})}}}),publish("READ_NEW_FRIENDS")}),socket.on("event_msg_newfrient_notice",function(_ref2){var flag=_ref2.flag;_ref2.data;1===flag&&publish("UNREAD_NEW_FRIENDS")}),LT.User.isLogin&&LT.ajax({"type":"POST","url":LT.Env.cRoot+"message/unread/newfriendcnt.json","dataType":"json","cache":!1,"success":function(data){1===data.flag&&data.data>0&&publish("UNREAD_NEW_FRIENDS")}})}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=ShowDialogFriends;var _socket=__webpack_require__("Tdzb"),_socket2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_socket)},"p7HJ":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.USER_TYPE_C=0,exports.USER_TYPE_B=1,exports.USER_TYPE_H=2},"p7Nc":function(module,exports,__webpack_require__){"use strict";function dragReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dragInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.DRAG_DISTANCE:case _actions.ActionType.DRAG_DONE:return Object.assign({},state,action.payload);default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.dragInitialState=void 0,exports.dragReducer=dragReducer;var _actions=__webpack_require__("IPoy"),dragInitialState=exports.dragInitialState={"top":0,"right":300}},"p8K0":function(module,exports){},"p9vN":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.getTotalUnread=exports.readed=exports.simpleInfos=exports.getOneContact=exports.getContactList=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator),simpleInfos=(exports.getContactList=function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(imcore,curPage){var imUserType,data,userIdArr,userData,userArr;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:imUserType=void 0,_context.t0=imcore.env,_context.next="c"===_context.t0?4:"h"===_context.t0?6:"b"===_context.t0?8:10;break;case 4:return imUserType="0",_context.abrupt("break",10);case 6:return imUserType="2",_context.abrupt("break",10);case 8:return imUserType="3",_context.abrupt("break",10);case 10:return _context.next=12,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.mycontacts,"type":"POST","data":{"imUserType":imUserType,"hasContact":!1,"currentPage":curPage,"pageSize":20,"imApp":"1"}});case 12:if(data=_context.sent,!data.flag){_context.next=24;break}return userIdArr=[],data.data.list.forEach(function(v,i){userIdArr.push({"userId":v.oppositeUserId,"userKind":v.oppositeUserKind})}),_context.next=18,simpleInfos(imcore,userIdArr);case 18:return userData=_context.sent,userArr=[],data.data.list.forEach(function(v,i){for(var m in userData)v.oppositeUserId===m&&userArr.push(Object.assign({},v,{"oppositeMainUrl":userData[m].homePage||"","oppositeUserCompany":userData[m].company,"oppositeUserName":userData[m].name,"oppositeUserPhoto":userData[m].photo,"oppositeUserTitle":userData[m].title,"oppositeUserSexName":userData[m].sex||"","oppositeUserEdulevelName":userData[m].edulevel||"","oppositeWorkAge":userData[m].workage||"","oppositeUserDqName":userData[m].dq||""}))}),_context.abrupt("return",userArr);case 24:throw(0,_utils2.hKilledAccountAlert)(imcore,data),new Error(data.msg);case 26:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}(),exports.getOneContact=function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(imcore,senderInfo){var uid,contactOne,newcontact;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return uid=senderInfo.oppositeUserId,_context2.next=3,simpleInfos(imcore,[{"userId":uid,"userKind":senderInfo.oppositeUserKind}]);case 3:return contactOne=_context2.sent,newcontact=Object.assign({},senderInfo,{"oppositeMainUrl":contactOne[uid].homePage||"","oppositeUserCompany":contactOne[uid].company,"oppositeUserName":contactOne[uid].name,"oppositeUserPhoto":contactOne[uid].photo,"oppositeUserTitle":contactOne[uid].title,"oppositeUserSexName":contactOne[uid].sex||"","oppositeUserEdulevelName":contactOne[uid].edulevel||"","oppositeWorkAge":contactOne[uid].workage||"","oppositeUserDqName":contactOne[uid].dq||""}),_context2.abrupt("return",newcontact);case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}(),exports.simpleInfos=function(){var _ref3=_asyncToGenerator(_regenerator2["default"].mark(function _callee3(imcore,userIdArr){var data;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.simpleInfos,"type":"POST","data":{"idsInJson":JSON.stringify(userIdArr)}});case 2:if(data=_context3.sent,!data.flag){_context3.next=7;break}return _context3.abrupt("return",data.data);case 7:throw(0,_utils2.hKilledAccountAlert)(imcore,data),new Error(data.msg);case 9:case"end":return _context3.stop()}},_callee3,this)}));return function(_x5,_x6){return _ref3.apply(this,arguments)}}()),_utils=(exports.readed=function(){var _ref4=_asyncToGenerator(_regenerator2["default"].mark(function _callee4(imcore,oppositeImId){var imUserType,data;return _regenerator2["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:imUserType=void 0,_context4.t0=imcore.env,_context4.next="c"===_context4.t0?4:"h"===_context4.t0?6:"b"===_context4.t0?8:10;break;case 4:return imUserType="0",_context4.abrupt("break",10);case 6:return imUserType="2",_context4.abrupt("break",10);case 8:return imUserType="3",_context4.abrupt("break",10);case 10:return _context4.next=12,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.readed,"type":"post","data":{"imUserType":imUserType,"oppositeImId":oppositeImId,"imClientId":imcore.userInfo.imClientId,"imApp":"1"}});case 12:return data=_context4.sent,_context4.abrupt("return",data.flag);case 14:case"end":return _context4.stop()}},_callee4,this)}));return function(_x7,_x8){return _ref4.apply(this,arguments)}}(),exports.getTotalUnread=function(){var _ref5=_asyncToGenerator(_regenerator2["default"].mark(function _callee5(imcore){var imUserType,data;return _regenerator2["default"].wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:imUserType=void 0,_context5.t0=imcore.env,_context5.next="c"===_context5.t0?4:"h"===_context5.t0?6:"b"===_context5.t0?8:10;break;case 4:return imUserType="0",_context5.abrupt("break",10);case 6:return imUserType="2",_context5.abrupt("break",10);case 8:return imUserType="3",_context5.abrupt("break",10);case 10:return _context5.next=12,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.unreadcount,"type":"post","data":{"imUserType":imUserType,"userId":imcore.userInfo.oppositeUserId,"imApp":"1"}});case 12:return data=_context5.sent,_context5.abrupt("return",data);case 14:case"end":return _context5.stop()}},_callee5,this)}));return function(_x9){return _ref5.apply(this,arguments)}}(),__webpack_require__("c3kU")),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_utils2=__webpack_require__("PQSX")},"pF21":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_enums=__webpack_require__("O4JY"),_MsgCards=__webpack_require__("UGzB"),_Resume=__webpack_require__("rvPC"),_Resume2=_interopRequireDefault(_Resume),_Rating=__webpack_require__("U515"),_Rating2=_interopRequireDefault(_Rating),_RecommendJob=__webpack_require__("EDHF"),_RecommendJob2=_interopRequireDefault(_RecommendJob),_ApplyResumeFeedback=__webpack_require__("SE0Z"),_ApplyResumeFeedback2=_interopRequireDefault(_ApplyResumeFeedback),_NameCard=__webpack_require__("PUFv"),_NameCard2=_interopRequireDefault(_NameCard),_AskResume=__webpack_require__("rR2T"),_AskResume2=_interopRequireDefault(_AskResume),MsgCards=function(_React$Component){function MsgCards(props){return _classCallCheck(this,MsgCards),_possibleConstructorReturn(this,(MsgCards.__proto__||Object.getPrototypeOf(MsgCards)).call(this,props))}return _inherits(MsgCards,_React$Component),_createClass(MsgCards,[{"key":"showMsgCards","value":function(){var _props=this.props,message=(_props.dispatch,_props.allstate,_props.message),ifISend=_props.ifISend,extType=message.extType||"";message.type;switch(extType){case _enums.ExtType.MESSAGE_RESUME:return _react2["default"].createElement(_Resume2["default"],this.props);case _enums.ExtType.MESSAGE_SEND_JOB:return _react2["default"].createElement(_RecommendJob2["default"],_extends({},this.props,{"ifISend":ifISend}));case _enums.ExtType.MESSAGE_SEND_RATINGBAR:return _react2["default"].createElement(_Rating2["default"],this.props);case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:return _react2["default"].createElement("div",null,_react2["default"].createElement("p",{"className":"applyresume"},_react2["default"].createElement("span",{"className":"applytips"},"您的简历已发送至对方")));case _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK:return _react2["default"].createElement(_ApplyResumeFeedback2["default"],this.props);case _enums.ExtType.MESSAGE_ASK_RESUME:return _react2["default"].createElement(_AskResume2["default"],this.props);case _enums.ExtType.MESSAGE_SEND_NAMECARD:return _react2["default"].createElement("div",null,_react2["default"].createElement("p",{"className":"name-card-tips"},_react2["default"].createElement("span",{"className":"applytips"},"建议您发送简历后再沟通，提高求职效率。")),_react2["default"].createElement(_NameCard2["default"],this.props));default:return _react2["default"].createElement(_MsgCards.Txt,this.props)}}},{"key":"render","value":function(){return _react2["default"].createElement("div",null,this.showMsgCards())}}]),MsgCards}(_react2["default"].Component);exports["default"]=MsgCards},"pdaJ":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_utils=(__webpack_require__("rF9R"),__webpack_require__("PQSX")),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy"),_HistoryMsg=__webpack_require__("0EL3"),_HistoryMsg2=_interopRequireDefault(_HistoryMsg);__webpack_require__("8QSz");var ChatHistory=function(_Component){function ChatHistory(props){_classCallCheck(this,ChatHistory);var _this=_possibleConstructorReturn(this,(ChatHistory.__proto__||Object.getPrototypeOf(ChatHistory)).call(this,props));return _this.historylistDom=null,_this.ie9=navigator.userAgent.indexOf("MSIE 9.0")>0,_this}return _inherits(ChatHistory,_Component),_createClass(ChatHistory,[{"key":"componentWillReceiveProps","value":function(nextProps){var _props=this.props,imcore=_props.imcore,visible=_props.visible,actions=_props.actions,history=_props.history,lastmsgid=_props.lastmsgid,activeContact=_props.activeContact;visible!==nextProps.visible&&!0===nextProps.visible&&actions.getServerHistory(imcore,activeContact),history.length!==nextProps.history.length&&-1===lastmsgid&&this.scrollToBottom()}},{"key":"clickMore","value":function(){var _props2=this.props,actions=_props2.actions,imcore=_props2.imcore,loading=_props2.loading,activeContact=(_props2.nomore,_props2.activeContact);!loading&&actions.getServerHistory(imcore,activeContact)}},{"key":"renderMoreLink","value":function(){var _this2=this,_props3=this.props,loading=_props3.loading,nomore=_props3.nomore,lastmsgid=_props3.lastmsgid;return loading?_react2["default"].createElement("p",{"className":"history-loading"},_react2["default"].createElement("em",null)):nomore&&-1!==lastmsgid?_react2["default"].createElement("p",{"className":"history-nomore"},"没有更多历史记录"):nomore||loading||-1===lastmsgid?void 0:_react2["default"].createElement("p",{"className":"history-more"},_react2["default"].createElement("a",{"href":"javascript:;","onClick":function(){return _this2.clickMore()}},"更多历史记录"))}},{"key":"scrollToBottom","value":function(){var _this3=this;setTimeout(function(){_this3.historylistDom&&$(_this3.historylistDom).scrollTop(_this3.historylistDom.scrollHeight)},100)}},{"key":"render","value":function(){var _this4=this,_props4=this.props,visible=_props4.visible,actions=_props4.actions,imcore=_props4.imcore,history=_props4.history,activeContact=(_props4.nomore,_props4.activeContact),style={};return this.ie9&&(style=Object.assign({},{"background":"rgba(243,252,255,0.95)"})),_react2["default"].createElement("div",{"className":(0,_classnames2["default"])("chat-history",{"hide":!visible}),"style":style},_react2["default"].createElement("div",{"className":"history-content","style":{"height":"calc(100% - 40px)"},"ref":function(dom){_this4.historylistDom=dom}},this.renderMoreLink(),_react2["default"].createElement("div",{"className":"history-list"},history.map(function(v,i){return _react2["default"].createElement(_HistoryMsg2["default"],{"env":imcore.env.toLowerCase(),"message":v,"key":v.id,"isSend":!0,"userInfo":imcore.userInfo,"targetInfo":activeContact})}))),0===history.length&&_react2["default"].createElement("div",{"className":"no-history"},_react2["default"].createElement("span",null,"暂无历史消息记录")),_react2["default"].createElement("a",{"href":"javascript:;","className":"close-history","onClick":function(){actions.hideHistory(imcore)}},"返回聊天页面"))}}]),ChatHistory}(_react.Component),mapStateToProps=function(state){return{"visible":state.history.visible,"history":(0,_utils.historyTimeVisibleFormat)(state.history.serverHistory),"nomore":state.history.nomore,"loading":state.history.loading,"lastmsgid":state.history.lastmsgid,"activeContact":state.panel.activeContact}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.historyActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(ChatHistory)},"pyOq":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_imsdk=__webpack_require__("QyTA"),_imsdk2=_interopRequireDefault(_imsdk),_config=__webpack_require__("GbPe"),_utils=__webpack_require__("c3kU"),_lpStorage=__webpack_require__("qhh4"),_lpStorage2=_interopRequireDefault(_lpStorage),_constants=(__webpack_require__("DT4M"),__webpack_require__("E9QE")),_receive=__webpack_require__("1Rhn"),_enums=(__webpack_require__("onow"),__webpack_require__("O4JY")),_enums2=__webpack_require__("3e+o"),ImCore=function(){function ImCore(_ref){var _ref$env=_ref.env,env=void 0===_ref$env?"c":_ref$env,_ref$userInfo=_ref.userInfo,userInfo=void 0===_ref$userInfo?{}:_ref$userInfo,_ref$debug=_ref.debug,debug=void 0!==_ref$debug&&_ref$debug,_ref$inited=_ref.inited,inited=void 0===_ref$inited?_utils.emptyFn:_ref$inited,_ref$autoLogin=_ref.autoLogin,autoLogin=void 0===_ref$autoLogin||_ref$autoLogin,_ref$fillInfo=_ref.fillInfo,fillInfo=void 0===_ref$fillInfo?_utils.emptyFn:_ref$fillInfo;_classCallCheck(this,ImCore);var random=Math.random()*Date.now();this.pageId=""+random,this.env=env.toLowerCase(),this.userInfo=userInfo,this.onlineStatus=!1,this.debug=debug,this._firstLoaded=!0,this._logs=[],this.debug&&(window.ImDebugArr=this._logs),this.fillInfo=fillInfo,this._timer=null,this.sendMsgContext=null,this._ifAutoLogin=autoLogin,this._inited=inited.bind(this),this._init()}return _createClass(ImCore,[{"key":"_init","value":function(){var that=this;this._sq=new _utils.Queue,this._rq=new _utils.Queue,this.saveUnread=new _utils.Queue,this.config=(0,_config.setImConfig)(this.env),this._storage=window.lpStorage=window.lpStorage||new _lpStorage2["default"]("storage.html"),this.event=new _utils.EventEmitter,this._loginTimer=null,this.subscribe("offline",function(){that.onlineStatus=!1,that.handleVisibleErr("HX_OFFLINE")}),this.subscribe("online",function(){that.onlineStatus=!0,that.handleVisibleErr("HX_ONLINE"),LT.Cookie.get(_enums2.Cookie.WEBIM_CONNECT)&&LT.Cookie.get(_enums2.Cookie.WEBIM_PAGEID)==window.name&&that.refreshMsg(!0)}),this.cacheInfo={"jobs":{},"resumes":{},"cardsToResumes":{}},this._conn=new _imsdk2["default"].connection({"env":that.env,"callback":function(data){that.onlineStatus=!0,Object.assign(that.userInfo,{"oppositeImId":data.imId,"oppositeUserId":data.userId,"oppositeImUserType":that.imUserType,"imClientId":data.imClientId}),data.noFuc||that._inited&&that._inited()},"connectOpts":{"onOpened":function(message){that.handleLog("IM login success."),that.event.trigger("login")},"onClosed":function(message){that.handleLog("IM closed"),that.event.trigger("logout")},"onTextMessage":function(message){that.handleLog("textmessage:",message.payload),that.receive(message,"Text")},"onSyncReaded":function(toImId){that.event.trigger(_constants.MsgEvent.UPDATE_READED_MSG,[toImId])},"onEmojiMessage":function(message){that.handleLog("textmessage:",message),that.receive(message,"Emoji")},"onPictureMessage":function(message){that.handleLog("textmessage:",message),that.receive(message,"Picture")},"onBreakMessge":function(message){},"onCmdMessage":function(message){},"onAudioMessage":function(message){that.handleLog("textmessage:",message),that.receive(message,"Audio")},"onLocationMessage":function(message){},"onFileMessage":function(message){},"onVideoMessage":function(message){},"onPresence":function(message){},"onRoster":function(message){},"onInviteMessage":function(message){},"onOnline":function(){that.onlineStatus=!0,that.handleLog("本机网络连接成功"),that.publish("online"),that.onlineTimer&&clearTimeout(that.onlineTimer),that.onlineTimer=setTimeout(function(){that.isLogined()||that.login()},_constants.FOCUS_TO_LOGIN_TIMEOUT)},"onOffline":function(){that.onlineStatus=!1,that.handleLog("本机网络掉线"),that.publish("offline"),that.sendMsgContext&&that._updateSendMsgState(that.sendMsgContext,_enums.MsgState.SEND_FAILED,_constants.ErrorType.HX_OFFLINE)},"onError":function(message){if(message&&2==message.type)return void that.handleErr("LOGIN_FAILED  type="+message.type);that.handleErr("HX_ONERROR type="+message.type)},"onReconnect":function(){that.refreshMsg()},"onBlacklistUpdate":function(list){}}}),this._ifAutoLogin&&this._autoLogin(),window.addEventListener("unhandledrejection",function(event){that.handleLog("unhandledrejection",event)}),window.addEventListener("onrejectionhandled",function(event){that.handleLog("onrejectionhandled",event)})}},{"key":"_autoLogin","value":function(){var that=this;this._firstLoaded&&!this.isLogined()&&(that.login(),that._firstLoaded=!1)}},{"key":"_hxSend","value":function(msg,sendErr){var that=this;this._conn.send(msg,function(_ref2){var msg=_ref2.msg,code=_ref2.code;sendErr({"msg":msg,"code":code}),clearTimeout(that.msgSendTimer)})}},{"key":"_getUserInfo","value":function(){return(0,_utils.pajax)({"url":this.config.ajaxUrl.getcurrentuserinfo})}},{"key":"_getSignatureForMsg","value":function(message){return(0,_utils.pajax)({"url":this.config.ajaxUrl.handlesend,"data":{"oppositeImId":message.getTo(),"extType":message.getExtType(),"msgContent":message.getValue(),"ext":message.getParamForSign()},"type":"POST"})}},{"key":"_getLocalAllMsg","value":function(){function _getLocalAllMsg(){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regenerator2["default"].mark(function _callee(){var LSKey,data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,LSKey=(0,_constants.getLocalStorageKey)(this.userInfo.oppositeImId),_context.next=4,this.getLocalDataPromise(LSKey.ALL_MSG_KEY);case 4:return data=_context.sent,_context.abrupt("return",data||{});case 8:throw _context.prev=8,_context.t0=_context["catch"](0),this.handleErr(_context.t0),_context.t0;case 12:case"end":return _context.stop()}},_callee,this,[[0,8]])}));return _getLocalAllMsg}()},{"key":"_addMsgToStorage","value":function(){function _addMsgToStorage(_x,_x2){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(uid,msg){var LSKey,allMsg,msgArr;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,LSKey=(0,_constants.getLocalStorageKey)(this.userInfo.oppositeImId),_context2.next=4,this._getLocalAllMsg();case 4:return allMsg=_context2.sent,msgArr=allMsg[uid]||[],msgArr.every(function(m){return m.id!==msg.id})&&msgArr.push(msg),allMsg[uid]=msgArr.slice(Math.max(msgArr.length-_constants.MAX_STORAGE_MSG_PER_USER,0)),_context2.next=10,this.setLocalDataPromise(LSKey.ALL_MSG_KEY,allMsg);case 10:_context2.next=16;break;case 12:throw _context2.prev=12,_context2.t0=_context2["catch"](0),this.handleErr(_context2.t0),_context2.t0;case 16:case"end":return _context2.stop()}},_callee2,this,[[0,12]])}));return _addMsgToStorage}()},{"key":"_updateMsgToStorage","value":function(){function _updateMsgToStorage(_x3,_x4){return _ref5.apply(this,arguments)}var _ref5=_asyncToGenerator(_regenerator2["default"].mark(function _callee3(uid,msg){var LSKey,allMsg,msgArr;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,LSKey=(0,_constants.getLocalStorageKey)(this.userInfo.oppositeImId),_context3.next=4,this._getLocalAllMsg();case 4:return allMsg=_context3.sent,msgArr=allMsg[uid]||[],msgArr.forEach(function(m){m.id===msg.id&&Object.assign(m,msg)}),allMsg[uid]=msgArr,_context3.next=10,this.setLocalDataPromise(LSKey.ALL_MSG_KEY,allMsg);case 10:_context3.next=16;break;case 12:throw _context3.prev=12,_context3.t0=_context3["catch"](0),this.handleErr(_context3.t0),_context3.t0;case 16:case"end":return _context3.stop()}},_callee3,this,[[0,12]])}));return _updateMsgToStorage}()},{"key":"_sendMsg","value":function(){function _sendMsg(_x5,_x6,_x7,_x8,_x9){return _ref6.apply(this,arguments)}var _ref6=_asyncToGenerator(_regenerator2["default"].mark(function _callee4(message,sendSucc,sendFail,sendErr,isResendMsg){var that,msgToStore,_this=this;return _regenerator2["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.prev=0,that=this,msgToStore=message.getStorageBody(),_context4.next=5,this._addMsgToStorage(message.getTo(),msgToStore);case 5:if(this.sendMsgContext=message,this.onlineStatus){_context4.next=11;break}throw"img"!==message.getType()&&this.event.trigger(_constants.MsgEvent.SEND_MSG,[message]),message.isClick=!1,this._updateSendMsgState(message,_enums.MsgState.PREPROCESS_FAILED,_constants.ErrorType.HX_OFFLINE),new Error(_constants.ErrorType.HX_OFFLINE);case 11:if(this.event.trigger(_constants.MsgEvent.SEND_MSG,[message]),"img"!==message.getType()||isResendMsg){_context4.next=17;break}return this.handleLog("going to upload picture->"),_context4.next=16,this._uploadFile(message);case 16:message=_context4.sent;case 17:message.onSuccess(function(id,serverMsgId){_this.sendMsgContext=null,_this.event.trigger(_constants.MsgEvent.UPDATE_LIST_MSG,[message]),that._updateSendMsgState(message,_enums.MsgState.SEND_SUCCESS,"",serverMsgId),_this.handleLog("_addMsgToStorage->",message.getStorageBody()),that._addMsgToStorage(message.getTo(),message.getStorageBody()),sendSucc&&sendSucc()}),message.onFail(function(err,code){_this.sendMsgContext=null,that.handleLog("hx send failed"),clearTimeout(that.msgSendTimer),that._updateSendMsgState(message,_enums.MsgState.SEND_FAILED,err),sendFail&&sendFail(err)}),this.handleLog("hx message send->",message.getBody()),this._hxSend(message.getBody(),sendErr),_context4.next=29;break;case 23:_context4.prev=23,_context4.t0=_context4["catch"](0),this.sendMsgContext=null,"img"!==message.type&&(message.isClick=!1,this._updateSendMsgState(message,_enums.MsgState.PREPROCESS_FAILED,_context4.t0.message||_constants.ErrorType.NETWORK_ONERROR)),sendFail&&sendFail(_constants.ErrorType.NETWORK_ONERROR),this.handleErr(_context4.t0);case 29:case"end":return _context4.stop()}},_callee4,this,[[0,23]])}));return _sendMsg}()},{"key":"_receiveMsgHandle","value":function(){function _receiveMsgHandle(_x10){return _ref7.apply(this,arguments)}var _ref7=_asyncToGenerator(_regenerator2["default"].mark(function _callee5(message){var from,to;return _regenerator2["default"].wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,message.fillInfo(imcore);case 2:return message=_context5.sent,this.event.trigger(_constants.MsgEvent.RECEIVE_MSG,[message]),this.handleLog("_addMsgToStorage->",message.getBody()),from=message.getFrom(),to=message.getTo(),_context5.next=9,this._addMsgToStorage(from===this.userInfo.oppositeImId?to:from,message.getBody());case 9:case"end":return _context5.stop()}},_callee5,this)}));return _receiveMsgHandle}()},{"key":"_receiveMsg","value":function(){function _receiveMsg(_x11){return _ref8.apply(this,arguments)}var _ref8=_asyncToGenerator(_regenerator2["default"].mark(function _callee6(message){return _regenerator2["default"].wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:try{this.handleLog("_receiveMsg->"),this.userInfo.oppositeImId,message.getFrom(),this._receiveMsgHandle(message)}catch(e){this.handleErr(e)}case 1:case"end":return _context6.stop()}},_callee6,this)}));return _receiveMsg}()},{"key":"_updateSendMsgState","value":function(message,state,err,serverId){message.setState(state,err),message.status=!1,serverId&&message.setServerId(serverId),this.event.trigger(_constants.MsgEvent.UPDATE_MSG,[message.getStorageBody()])}},{"key":"updateSendMsg","value":function(newmessage){this.event.trigger(_constants.MsgEvent.UPDATE_MSG,[newmessage.getStorageBody()])}},{"key":"updateReceiveMsg","value":function(newmessage){this.event.trigger(_constants.MsgEvent.UPDATE_MSG,[newmessage])}},{"key":"_uploadFile","value":function(message){var _this2=this,that=this;return new Promise(function(resolve,reject){var onFileUploadError=function(err){return that._updateSendMsgState(message,_enums.MsgState.SEND_FAILED,err),message.onFileUploadError&&message.onFileUploadError(err),_this2.handleVisibleErr("UPLOAD_FILE_ERROR"),reject(err),!1},onFileUploadComplete=function(data){message.onFileUploadComplete&&message.onFileUploadComplete(data);var msg=message.getBody(),url=data.originalUrl,$img=$('<img src="'+url+'" style="position: fixed;visibility:hidden;top:-9999px;left:-9999px">').appendTo("body");$img.on("load",function(){var $this=$(this);msg.body={"type":message.type,"url":url,"filename":message.filename,"size":{"width":$this.width()||0,"height":$this.height()||0},"length":data.fileLength||0,"file_length":data.fileLength||0,"filetype":msg.filetype,"thumbUrl":data.thumbUrl},message.value=url,msg.url=url,$img.remove(),resolve(message)}),$img.on("error",function(error){$(this).remove(),reject(error)})},onFileAppend=function(){message.onFileAppend()},uploadObj=Object.assign({"onFileUploadError":onFileUploadError,"onFileUploadComplete":onFileUploadComplete,"onFileAppend":onFileAppend},message.getBody(),{"inputElm":message.fileInputId});_imsdk2["default"].utils.uploadFile.call(_this2._conn,uploadObj)})}},{"key":"getLocalData","value":function(key,callback){this._storage.get(key,callback)}},{"key":"setLocalData","value":function(key,value,callback){this._storage.set(key,value,callback)}},{"key":"getLocalDataPromise","value":function(key){var _this3=this;return new Promise(function(resolve,reject){_this3._storage.get(key,function(value){resolve(value)})})}},{"key":"setLocalDataPromise","value":function(key,value){var _this4=this;return new Promise(function(resolve,reject){_this4._storage.set(key,value,function(){resolve()})})}},{"key":"handleVisibleErr","value":function(type){var moreInfo=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",desc=_constants.ErrorType[type]||"";this.handleErr({"message":desc+moreInfo})}},{"key":"handleErr","value":function(err){this._logs.push({"time":Date.now(),"type":"error","msg":err.message}),this.debug&&console.error(err)}},{"key":"handleLog","value":function(msg){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._logs.push({"time":Date.now(),"type":"log","msg":msg,"data":data}),this.debug&&console.info(msg)}},{"key":"publish","value":function(key,value,callback){this._storage.publish(key,value,callback)}},{"key":"subscribe","value":function(key,func){return this._storage.subscribe(key,func)}},{"key":"login","value":function(callback,errcallback){var that=this,timeouted=!1;clearTimeout(this._loginTimer),"function"==typeof callback&&"function"==typeof errcallback&&(this._loginTimer=setTimeout(function(){timeouted=!0,errcallback()},_constants.HX_LOGIN_TIMEOUT),this.event.once("login",function(){clearTimeout(that._loginTimer),!timeouted&&callback()}),this.event.once("loginfailed",function(){clearTimeout(that._loginTimer),!timeouted&&errcallback()}))}},{"key":"loginPromise","value":function(){var _this5=this;return new Promise(function(resolve,reject){_this5.login(function(){resolve()},function(){reject("IM login failed")})})}},{"key":"isLogined","value":function(){return this._conn.isOpened()}},{"key":"send","value":function(msg,sendSucc,sendFail,sendErr,isResendMsg){var _this6=this;this.handleLog("imcore.send->",arguments),this._sq.push(function(){return _this6._sendMsg(msg,sendSucc,sendFail,sendErr,isResendMsg)})}},{"key":"resend","value":function(msg,sendSucc,sendFail,sendErr,isResendMsg){this.send(msg.reset(),sendSucc,sendFail,sendErr,isResendMsg)}},{"key":"receive","value":function(message,receiveType){var _this7=this;this.handleLog("imcore.receive->",arguments);var msg=(0,_receive.createReceiveMsg)(message,receiveType);this._rq.push(function(){return _this7._receiveMsg(msg)})}},{"key":"getTargetLocalHistory","value":function(){function getTargetLocalHistory(_x14){return _ref9.apply(this,arguments)}var _ref9=_asyncToGenerator(_regenerator2["default"].mark(function _callee7(oppositeImId){var allMsg;return _regenerator2["default"].wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,this._getLocalAllMsg();case 2:return allMsg=_context7.sent,_context7.abrupt("return",allMsg[oppositeImId]||[]);case 4:case"end":return _context7.stop()}},_callee7,this)}));return getTargetLocalHistory}()},{"key":"unReadMsg","value":function(callback,refreshMsg){this._conn.unSign(callback,refreshMsg,function(){})}},{"key":"disconnect","value":function(){this._conn.disconnect()}},{"key":"refreshMsg","value":function(hasConnect){this.event.trigger(_constants.MsgEvent.CONN_MSG,[hasConnect])}}]),ImCore}();exports["default"]=ImCore},"q02L":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.LOGIN_FAILED="服务器连接异常，可尝试重新登录解决问题",exports.HX_ONERROR="服务器连接异常，可尝试重新登录解决问题",exports.NETWORK_ONERROR="网络连接超时",exports.SENDSIGN_ONERROR="职聊消息平台连接异常",exports.UNSUPPORTED_MSG_TYPE="接收到不支持的消息类型",exports.HX_OFFLINE="您已与职聊服务器断开连接",exports.HX_ONLINE="您已与职聊服务器恢复连接",exports.HX_UPLOAD_CANT_ASYNC="浏览器不支持上传图片操作",exports.UPLOAD_URL_EMPTY="请选择图片",exports.UPLOAD_FILE_ERROR="上传图片发生错误，请刷新重试",exports.UPLOAD_FILE_TYPE_ERROR="只支持以下格式：jpg, png, bmp, gif",exports.UPLOAD_FILE_OVERSIZE="文件大小超过限制！请上传大小不超过10M的文件",exports.UPLOAD_FILE_WH="图片尺寸过大！请上传小于1000*800的图片",exports.RESUME_NOT_COMPLETED='您的简历尚未完善，为了保证双方沟通效率，请先<a href="https://c.liepin.com/resume/getdefaultresume/" target="_blank">完善您的简历</a>',exports.SERVER_CANSEND_ERR_MSG="",exports.beExited="您在其他设备已登录"},"qvOr":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.getHistoryFromServer=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator),_utils=(exports.getHistoryFromServer=function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(imcore,oppositeImId){var imUserType,data,msgid=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;arguments.length>3&&void 0!==arguments[3]?arguments[3]:_constants.enums.HISTORY_PAGESIZE;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:imUserType=void 0,_context.t0=imcore.env,_context.next="c"===_context.t0?4:"h"===_context.t0?6:"b"===_context.t0?8:10;break;case 4:return imUserType="0",_context.abrupt("break",10);case 6:return imUserType="2",_context.abrupt("break",10);case 8:return imUserType="3",_context.abrupt("break",10);case 10:return _context.next=12,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.chart,"type":"POST","data":{"oppositeImId":oppositeImId,"maxMessageId":msgid,"imUserType":imUserType,"pageSize":20,"imApp":"1"}});case 12:if(data=_context.sent,!data.flag){_context.next=17;break}return _context.abrupt("return",data.data.list);case 17:throw new Error(data.msg);case 18:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}(),__webpack_require__("c3kU")),_constants=__webpack_require__("acFS"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config)},"r0S8":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/sending.00644d1d.gif"},"rF9R":function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function addTlog(mapToProps){return function(Comp){return function(_Component){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_Component),_createClass(_class,[{"key":"render","value":function(){var _props=this.props,onClick=_props.onClick,pushStr=_props.pushStr,rest=_objectWithoutProperties(_props,["onClick","pushStr"]);return _react2["default"].createElement(Comp,_extends({},rest,mapToProps(onClick,pushStr)))}}]),_class}(_react.Component)}}function A(props){var children=props.children,rest=_objectWithoutProperties(props,["children"]);return _react2["default"].createElement("a",rest,children)}function Input(props){var children=props.children,rest=_objectWithoutProperties(props,["children"]);return _react2["default"].createElement("input",rest,children)}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.InputTlog=exports.Atlog=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_react);exports.Atlog=addTlog(function(_onClick,pushStr){return{"onClick":function(){pushStr&&(window.tlog=window.tlog||[],tlog.push(pushStr)),_onClick&&_onClick()}}})(A),exports.InputTlog=addTlog(function(_onClick2,pushStr){return{"onClick":function(){pushStr&&(window.tlog=window.tlog||[],tlog.push(pushStr)),_onClick2&&_onClick2()}}})(Input)},"rNCW":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy"),_Dialog=(__webpack_require__("E9QE"),__webpack_require__("W7fc")),Report=(__webpack_require__("acFS"),function(_Component){function Report(props){_classCallCheck(this,Report);var _this=_possibleConstructorReturn(this,(Report.__proto__||Object.getPrototypeOf(Report)).call(this,props));return _this.state={"reportList":[{"code":5,"text":"虚假信息"},{"code":3,"text":"广告、非法、色情内容"},{"code":7,"text":"其他"}]},_this}return _inherits(Report,_Component),_createClass(Report,[{"key":"componentDidMount","value":function(){}},{"key":"showReportDialog","value":function(){var _props=this.props;_props.imcore;_props.actions.showReportDialog()}},{"key":"closeReportDialog","value":function(status){var _props2=this.props,actions=(_props2.imcore,_props2.actions);actions.closeReportDialog(function(){actions.hideUserSetting()})}},{"key":"setReport","value":function(code){var _props3=this.props;_props3.imcore;_props3.actions.setReport(code)}},{"key":"addReport","value":function(){var that=this,_props4=this.props,imcore=_props4.imcore,actions=_props4.actions,activeContact=_props4.activeContact,reportCode=_props4.reportCode,msgList=_props4.msgList;actions.addReport(imcore,activeContact,reportCode,msgList,function(){that.closeReportDialog()})}},{"key":"render","value":function(){var _this2=this,_props5=this.props,reportCode=(_props5.imcore,_props5.actions,_props5.reportCode),dialogVisible=_props5.dialogVisible,reportList=this.state.reportList;return _react2["default"].createElement("a",{"href":"javascript:;","onClick":function(){return _this2.showReportDialog()}},"举报",_react2["default"].createElement(_Dialog.ChatDialog,{"id":"report","visible":dialogVisible,"onClose":function(){_this2.closeReportDialog()},"header":!0,"backBtn":!1,"footer":!1,"title":"请在下方选取您的举报类型","position":"bottom","width":"100%"},_react2["default"].createElement("div",{"className":"report-dialog-box"},_react2["default"].createElement("p",null,reportList.map(function(v,i){return _react2["default"].createElement("a",{"key":i,"className":(0,_classnames2["default"])({"active":reportCode===v.code}),"onClick":function(){return _this2.setReport(v.code)},"href":"javascript:;"},v.text)})),_react2["default"].createElement("div",{"className":"btns-group"},_react2["default"].createElement("a",{"href":"javascript:;","className":"btn btn-primary btn-mini","onClick":function(){return _this2.addReport()}},"提交举报")))))}}]),Report}(_react.Component)),msgListFilterByContact=function(contact,msgList,initialServerHistory,activeContact){var formattedMsgList=msgList.filter(function(v){return v.to===activeContact.oppositeImId});return initialServerHistory.concat(formattedMsgList)},mapStateToProps=function(state){return{"activeContact":state.panel.activeContact,"reportCode":state.report.reportCode,"dialogVisible":state.report.dialogVisible,"msgList":msgListFilterByContact(state.panel.activeContact,state.panel.msgList,state.history.initialServerHistory,state.panel.activeContact)}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.reportActions,_actions.userSettingActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(Report)},"rR2T":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__("RH2O"),_enums=(__webpack_require__("c3kU"),__webpack_require__("O4JY")),_cMessageActions=(__webpack_require__("IPoy"),__webpack_require__("QidO")),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames);__webpack_require__("l8HY");var AskResume=function(_Component){function AskResume(props){_classCallCheck(this,AskResume);var _this=_possibleConstructorReturn(this,(AskResume.__proto__||Object.getPrototypeOf(AskResume)).call(this,props));return _this.state={"sendStatus":props.sendStatus||!1,"refuse":!1},_this}return _inherits(AskResume,_Component),_createClass(AskResume,[{"key":"componentDidMount","value":function(){}},{"key":"componentWillReceiveProps","value":function(nextProps){nextProps.message.sendStatus!==this.props.message.sendStatus&&this.setState({"sendStatus":nextProps.message.sendStatus,"refuse":!0})}},{"key":"sendResume","value":function(){var _props=this.props,dispatch=_props.dispatch,imcore=_props.imcore,message=_props.message,actions=_props.actions,_state=this.state,sendStatus=_state.sendStatus,refuse=_state.refuse;sendStatus||refuse||(window.tlog=window.tlog||[],tlog.push("c:C000010796"),dispatch((0,_cMessageActions.canApply)(imcore,message.jobKind,message.jobId,function(){actions.updateMsgList(imcore,function(list){return list.map(function(v){return v.extType===_enums.ExtType.MESSAGE_SEND_NAMECARD||v.extType===_enums.ExtType.MESSAGE_ASK_RESUME?Object.assign({},v,{"sendStatus":!0}):v})||[]}),actions.updateInitialServerHistory(imcore,function(list){return list.map(function(v){return v.extType===_enums.ExtType.MESSAGE_SEND_NAMECARD||v.extType===_enums.ExtType.MESSAGE_ASK_RESUME?Object.assign({},v,{"sendStatus":!0}):v})||[]})})))}},{"key":"refuse","value":function(){var _state2=this.state;_state2.sendStatus;_state2.refuse||(window.tlog=window.tlog||[],tlog.push("c:C000010797"),this.setState({"refuse":!0}))}},{"key":"render","value":function(){var _this2=this,message=this.props.message,_state3=this.state,sendStatus=_state3.sendStatus,refuse=_state3.refuse;return message.state===_enums.MsgState.INITIAL?_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("img",{"src":"../../../images/message/sending.gif"})):_react2["default"].createElement("div",{"className":"ask-resume content"},_react2["default"].createElement("p",{"className":"ask-content"},"我想要一份你的简历，你是否同意？"),_react2["default"].createElement("p",{"className":"ask-btns"},_react2["default"].createElement("a",{"className":(0,_classnames2["default"])({"muted":sendStatus||refuse}),"href":"javascript:;","onClick":function(){return _this2.sendResume()}},sendStatus?"已发送":"同意"),_react2["default"].createElement("a",{"className":(0,_classnames2["default"])({"muted":refuse}),"href":"javascript:;","onClick":function(){return _this2.refuse()}},"拒绝")))}}]),AskResume}(_react.Component);exports["default"]=(0,_reactRedux.connect)(null,null)(AskResume)},"rvPC":function(module,exports,__webpack_require__){"use strict";function Resume(props){var message=props.message;return message.state===_enums.MsgState.INITIAL?_react2["default"].createElement("div",{"className":"content"},_react2["default"].createElement("img",{"src":"../../../images/message/sending.gif"})):_react2["default"].createElement("div",{"className":"resume-card content"},_react2["default"].createElement("h3",null,"委托的简历："),_react2["default"].createElement("a",{"className":"resume-card-main","onClick":function(){window.tlog=window.tlog||[],tlog.push("c:C000010113")},"href":message.resumeUrl,"target":"_blank"},_react2["default"].createElement("dl",null,_react2["default"].createElement("dt",null,_react2["default"].createElement("i",{"className":"webim-icons32 icons32-resume"})),_react2["default"].createElement("dd",null,_react2["default"].createElement("ul",null,_react2["default"].createElement("li",null,_react2["default"].createElement("span",{"className":"title","title":message.name},message.name),_react2["default"].createElement("span",null,message.sex||""),_react2["default"].createElement("span",{"className":"edulevel","title":message.res_edulevel},message.res_edulevel||""),_react2["default"].createElement("span",null,message.workyear?message.workyear+"年经验":""),_react2["default"].createElement("span",{"className":"dq-name","title":message.dq||""},message.dq||"")),_react2["default"].createElement("li",null,_react2["default"].createElement("span",{"className":"job-tit","title":message.title},message.title||""),_react2["default"].createElement("span",{"className":"separator"},"|"),_react2["default"].createElement("span",{"className":"cpy-tit","title":message.company},message.company||"")),_react2["default"].createElement("li",null,_react2["default"].createElement("em",null,"查看委托简历")))))))}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=Resume;var _react=__webpack_require__("Jmof"),_react2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_react),_enums=(__webpack_require__("c3kU"),__webpack_require__("O4JY"));__webpack_require__("IPoy");__webpack_require__("Q3sl")},"s8wk":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_40.5c6b09a2.png"},"sMP3":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function isPlainObject(value){if(!(0,_isObjectLike2["default"])(value)||(0,_baseGetTag2["default"])(value)!=objectTag)return!1;var proto=(0,_getPrototype2["default"])(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}Object.defineProperty(exports,"__esModule",{"value":!0});var _baseGetTag=__webpack_require__("wqbf"),_baseGetTag2=_interopRequireDefault(_baseGetTag),_getPrototype=__webpack_require__("J/I/"),_getPrototype2=_interopRequireDefault(_getPrototype),_isObjectLike=__webpack_require__("YByk"),_isObjectLike2=_interopRequireDefault(_isObjectLike),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);exports["default"]=isPlainObject},"sOLS":function(module,exports,__webpack_require__){"use strict";function setGreetingReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setGreetingInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.OPEN_SETGREETING:return Object.assign({},state,{"show":action.payload});case _actions.ActionType.SETGREETING_LIST:return Object.assign({},state,{"greetingList":action.payload});case _actions.ActionType.SELECT_GREETING:return $.extend({},!0,state,action.payload);default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.setGreetingInitialState=void 0,exports.setGreetingReducer=setGreetingReducer;var _actions=__webpack_require__("IPoy"),setGreetingInitialState=exports.setGreetingInitialState={"show":!1,"greetingList":[],"greetingType":1,"greetingText":""}},"sbaz":function(module,exports,__webpack_require__){"use strict";function noticeReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:noticeInitialState,action=arguments[1],i=void 0;switch(action.type){case _actions.ActionType.GET_NOTICELIST_START:case _actions.ActionType.GET_NOTICELIST_SUCC:case _actions.ActionType.GET_NOTICELIST_FAIL:return Object.assign({},state,action.payload);case _actions.ActionType.DELETE_NOTICEITEM:i=state.sysMsgList.findIndex(function(v){return v.id===action.payload});var newList=state.sysMsgList.slice(0,i).concat(state.sysMsgList.slice(i+1));return Object.assign({},state,{"totalCnt":state.totalCnt,"sysMsgList":newList});case _actions.ActionType.READ_NOTICE:return state.sysMsgList.forEach(function(v,i){v.id===action.payload&&(v.readFlag="1")}),$.extend(!0,{},state,{"sysMsgList":state.noticeList});case _actions.ActionType.HASREAD_NOTICE:return state.sysMsgList.forEach(function(v,i){v.id===action.payload.id&&(v.readFlag="1")}),$.extend(!0,{},state,{"index":action.payload.index,"sysMsgList":state.sysMsgList});case _actions.ActionType.UNSELECT_NOTICE:return Object.assign({},state,{"noticeDetail":action.payload});case _actions.ActionType.CHANGE_TABS_UNREAD:return"notice"===action.payload.tab.key?Object.assign({},state,{"unRead":action.payload.status}):state;default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.noticeInitialState=void 0,exports.noticeReducer=noticeReducer;var _actions=__webpack_require__("IPoy"),noticeInitialState=exports.noticeInitialState={"noticeList":{},"noticeDetail":null,"unRead":!1,"firstLoaded":!1,"totalCnt":0,"curPage":0,"sysMsgList":[],"nomoreNotice":!1}},"snAd":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function setReport(code){return function(dispatch,getState){dispatch({"type":ActionType.REPORT_CODE,"payload":code})}}function showReportDialog(){return function(dispatch,getState){dispatch({"type":ActionType.REPORT_CODE,"payload":5}),dispatch({"type":ActionType.REPORT_DIALOG,"payload":!0})}}function closeReportDialog(callback){return function(dispatch,getState){dispatch({"type":ActionType.REPORT_DIALOG,"payload":!1}),callback&&callback()}}function addReport(imcore,activeContact,code,msgList,callback){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var userInfo,list,arr,data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,userInfo=imcore.userInfo,list=msgList.filter(function(v){return v.data}),arr=[],list.slice(list.length-10).forEach(function(v,i){var str="";v.from===userInfo.oppositeImId?str+=userInfo.oppositeUserName+":":str+=activeContact.oppositeUserName+":","img"===v.type?str+='<img src="'+v.data+'" />':"txt"===v.type&&(str+=v.data),arr.push(encodeURIComponent(str))}),_context.next=7,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.reportChat,"type":"post","data":{"targetUserId":activeContact.oppositeUserId,"reportCode":code,"msgsStr":arr.join(",")}});case 7:data=_context.sent,data.flag?(dispatch({"type":ActionType.REPORT_DIALOG,"payload":!1}),_Dialog2["default"].alert({"parent":"chat","onOk":function(){callback&&callback()},"width":300,"content":React.createElement("p",{"className":"text-center"},"感谢您的举报，我会尽快处理！")})):_Dialog2["default"].alert({"parent":"chat","text":data.msg}),_context.next=14;break;case 11:_context.prev=11,_context.t0=_context["catch"](0),imcore.handleErr(_context.t0);case 14:case"end":return _context.stop()}},_callee,_this,[[0,11]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.setReport=setReport,exports.showReportDialog=showReportDialog,exports.closeReportDialog=closeReportDialog,exports.addReport=addReport;var _utils=__webpack_require__("c3kU"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType),_Dialog=(__webpack_require__("acFS"),__webpack_require__("E9QE"),__webpack_require__("W7fc")),_Dialog2=_interopRequireDefault(_Dialog)},"tDKR":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__("wLXD"),_reactDom2=_interopRequireDefault(_reactDom),_imcore=__webpack_require__("pyOq"),_imcore2=_interopRequireDefault(_imcore),_imui=__webpack_require__("8MZu"),_imui2=_interopRequireDefault(_imui),_config=__webpack_require__("CJQX"),_showDialog=(_interopRequireDefault(_config),__webpack_require__("6svF"),__webpack_require__("p/9b")),_showDialog2=_interopRequireDefault(_showDialog),_cMessageActions=__webpack_require__("QidO"),_MsgCards=__webpack_require__("pF21"),_MsgCards2=_interopRequireDefault(_MsgCards),_api=__webpack_require__("o46P"),api=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_api);!function(){function _toggleUnRead(unread){$("#header-c-beta2 [data-selector=drop-menu-message] .red-dot").toggleClass("hide",!unread)}function _openPanel(callback){$("#header-c-beta2").on("click",'[data-selector="drop-menu-message"]',function(e){callback()})}function _componentDidMounted(_ref){var imcore=_ref.imcore,actions=_ref.actions,dispatch=_ref.dispatch;window.showDialog=function(options){options.jobDetail&&!$.isEmptyObject(options.jobDetail)?dispatch((0,_cMessageActions.cSendJobCardAndApplyResume)(imcore,options)):actions.selectContact(imcore,options)},window.sendResume=function(options){dispatch((0,_cMessageActions.cSendResume)(imcore,options.info,options.text))},window.onLPMessageDisconnect=function(){imcore.disconnect()}}function _onSelectContact(contact){"1"===contact.oppositeUserKind&&LT.ajax({"url":LT.Env.cRoot+"user/open-hr-window.json","type":"post","data":{"otherId":contact.oppositeUserId},"success":function(data){data.flag}})}function initImcore(userInfo){window.ImcacheInfo={"jobs":{},"resumes":{}};var imcore=new _imcore2["default"]({"fillInfo":api.fillInfo,"userInfo":userInfo,"env":"c","debug":!1,"inited":function(){$("#header-c-beta2").find('[data-selector="drop-menu-friends"]').show(),$("#header-c-beta2").find('[data-selector="drop-menu-message"]').show(),_reactDom2["default"].render(_react2["default"].createElement(_imui2["default"],{"imcore":this,"toggleUnRead":function(unread){_toggleUnRead(unread)},"openPanel":function(callback){return _openPanel(callback)},"wrap":document.getElementById("im-root"),"onSelectContact":function(contact){return _onSelectContact(contact)},"componentDidMounted":function(props){return _componentDidMounted(props)},"msgcard":_MsgCards2["default"]}),document.getElementById("im-root")),(0,_showDialog2["default"])(this.subscribe.bind(this),this.publish.bind(this)),window.onLPMessageReady&&window.onLPMessageReady(),window.onFriendsMessageReady&&window.onFriendsMessageReady()}});window.imcore=imcore}LT.User.isLogin&&"0"===LT.User.user_kind&&(0===$("#im-root").length&&$('<div id="im-root" growing-ignore="true"></div>').appendTo("body"),LT.ajax({"url":LT.Env.cRoot+"user/getcurrentuserinfo.json","type":"POST","data":{},"cache":!1,"dataType":"json","success":function(_ref2){var flag=_ref2.flag,data=_ref2.data;if(1==flag){initImcore({"oppositeUserCompany":data.company,"oppositeUserKind":data.userKind,"oppositeUserName":data.name,"oppositeUserPhoto":data.photo,"oppositeUserTitle":data.title,"chatSetting":data.chatSetting})}}}))}()},"tIMm":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function greetingShow(show){return function(dispatch,getState){dispatch({"type":ActionType.OPEN_SETGREETING,"payload":show})}}function greetingStatus(imcore){return function(dispatch,getState){if("c"!=imcore.env)return!1;dispatch({"type":ActionType.SELECT_GREETING,"payload":{"greetingType":imcore.userInfo.chatSetting.sayHiType,"greetingText":imcore.userInfo.chatSetting.sayHiText}})}}function greetingList(imcore){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if("c"==imcore.env){_context.next=2;break}return _context.abrupt("return",!1);case 2:return _context.prev=2,_context.next=5,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.getHiList});case 5:data=_context.sent,data.flag&&dispatch({"type":ActionType.SETGREETING_LIST,"payload":data.data}),_context.next=12;break;case 9:_context.prev=9,_context.t0=_context["catch"](2),imcore.handleErr(_context.t0);case 12:case"end":return _context.stop()}},_callee,_this,[[2,9]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}function selectGreeting(imcore,code,name,greeting){var _this2=this;return function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var data;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.saveChatSetting,"type":"post","data":{"sayHi":greeting,"sayHiType":code}});case 3:data=_context2.sent,data.flag&&(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.SELECT_GREETING,"payload":{"greetingType":code,"greetingText":name}}),_context2.next=10;break;case 7:_context2.prev=7,_context2.t0=_context2["catch"](0),imcore.handleErr(_context2.t0);case 10:case"end":return _context2.stop()}},_callee2,_this2,[[0,7]])}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}()}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.greetingShow=greetingShow,exports.greetingStatus=greetingStatus,exports.greetingList=greetingList,exports.selectGreeting=selectGreeting;var _utils=__webpack_require__("c3kU"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType),_utils2=(__webpack_require__("acFS"),__webpack_require__("PQSX"))},"tQKs":function(module,exports){},"tp+D":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function inBlackStatusAjax(imcore,activeContact){var data={};return"c"===imcore.env?data={"targetUserId":activeContact.oppositeUserId}:"b"===imcore.env&&(data={"usercId":activeContact.oppositeUserId}),(0,_utils.pajax)({"url":(0,_config2["default"])(imcore.env).urls.infoBetweenUsers,"type":"post","data":data})}function openDialog(){return function(dispatch,getState){dispatch({"type":ActionType.INBLACK_DIALOG,"payload":!0})}}function closeDialog(){return function(dispatch,getState){dispatch({"type":ActionType.INBLACK_DIALOG,"payload":!1})}}function addBlack(imcore,activeContact,inBlack,callback){var _this=this;return function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(dispatch,getState){var userId,cookie,ajaxData,url,data;return _regenerator2["default"].wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,userId=activeContact.oppositeUserId,cookie=!!LT.Cookie.get(_constants.enums.COOKIE_KEY_SHIELD)&&eval(LT.Cookie.get(_constants.enums.COOKIE_KEY_SHIELD)),ajaxData={},url=void 0,"c"===imcore.env?activeContact.oppositeUserKind==_constants2.UserType.USER_TYPE_C?(url=(0,_config2["default"])(imcore.env).urls.addCBl,ajaxData={"usercId":userId}):activeContact.oppositeUserKind==_constants2.UserType.USER_TYPE_H&&(url=(0,_config2["default"])(imcore.env).urls.aadduserhblacklist,ajaxData={"userHId":userId}):"b"===imcore.env&&(url=(0,_config2["default"])(imcore.env).urls.rejectreceivemsg,ajaxData={"usercId":userId}),_context.next=5,(0,_utils.pajax)({"url":url,"type":"post","data":ajaxData});case 5:data=_context.sent,data.flag?((0,_utils2.publish)(imcore,dispatch,{"type":ActionType.INBLACK_DIALOG,"payload":!1}),callback&&callback(),_Dialog2["default"].alert({"parent":"chat","text":"屏蔽成功！"})):(dispatch({"type":ActionType.INBLACK_DIALOG,"payload":!1}),_Dialog2["default"].alert({"parent":"chat","text":data.msg})),_context.next=12;break;case 9:_context.prev=9,_context.t0=_context["catch"](0),imcore.handleErr(_context.t0);case 12:case"end":return _context.stop()}},_callee,_this,[[0,9]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}()}function removeBlack(imcore,activeContact,inBlack,callback){var _this2=this;return function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(dispatch,getState){var userId,ajaxData,url,data;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,userId=activeContact.oppositeUserId,ajaxData={},url=void 0,"c"===imcore.env?activeContact.oppositeUserKind==_constants2.UserType.USER_TYPE_C?(url=(0,_config2["default"])(imcore.env).urls.removeCBl,ajaxData={"usercId":userId}):activeContact.oppositeUserKind==_constants2.UserType.USER_TYPE_H&&(url=(0,_config2["default"])(imcore.env).urls.removeuserhblacklist,ajaxData={"userHId":userId}):"b"===imcore.env&&(url=(0,_config2["default"])(imcore.env).urls.cancelrejectreceivemsg,ajaxData={"usercId":userId}),(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.INBLACK_DIALOG,"payload":!1}),_context2.next=6,(0,_utils.pajax)({"url":url,"type":"post","data":ajaxData});case 6:data=_context2.sent,data.flag?(callback&&callback(),_Dialog2["default"].alert({"parent":"chat","text":"已解除屏蔽！"})):_Dialog2["default"].alert({"parent":"chat","text":data.msg}),_context2.next=13;break;case 10:_context2.prev=10,_context2.t0=_context2["catch"](0),imcore.handleErr(_context2.t0);case 13:case"end":return _context2.stop()}},_callee2,_this2,[[0,10]])}));return function(_x3,_x4){return _ref2.apply(this,arguments)}}()}function changeText(imcore,inBlack){return function(dispatch,getState){(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.INBLACK_DIALOG,"payload":!1}),(0,_utils2.publish)(imcore,dispatch,{"type":ActionType.INBLACK_STATUS,"payload":!inBlack})}}Object.defineProperty(exports,"__esModule",{"value":!0});var _regenerator=__webpack_require__("Xxa5"),_regenerator2=_interopRequireDefault(_regenerator);exports.inBlackStatusAjax=inBlackStatusAjax,exports.openDialog=openDialog,exports.closeDialog=closeDialog,exports.addBlack=addBlack,exports.removeBlack=removeBlack,exports.changeText=changeText;var _utils=__webpack_require__("c3kU"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),_ActionType=__webpack_require__("TV+w"),ActionType=_interopRequireWildcard(_ActionType),_constants=__webpack_require__("acFS"),_constants2=__webpack_require__("E9QE"),_Dialog=__webpack_require__("W7fc"),_Dialog2=_interopRequireDefault(_Dialog),_utils2=__webpack_require__("PQSX")},"uCl5":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_4.9e02d138.png"},"vgv3":function(module,exports,__webpack_require__){"use strict";function applyMiddleware(){for(var _len=arguments.length,middlewares=Array(_len),_key=0;_key<_len;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(reducer,preloadedState,enhancer){var store=createStore(reducer,preloadedState,enhancer),_dispatch=store.dispatch,chain=[],middlewareAPI={"getState":store.getState,"dispatch":function(action){return _dispatch(action)}};return chain=middlewares.map(function(middleware){return middleware(middlewareAPI)}),_dispatch=_compose2["default"].apply(void 0,chain)(store.dispatch),_extends({},store,{"dispatch":_dispatch})}}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=applyMiddleware;var _compose=__webpack_require__("lMc7"),_compose2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_compose),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}},"wBoX":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_classnames2=_interopRequireDefault(_classnames),_redux=__webpack_require__("2KeS"),_reactRedux=__webpack_require__("RH2O"),_actions=__webpack_require__("IPoy");__webpack_require__("JGBG");var _SetGreeting=__webpack_require__("6Fx8"),_SetGreeting2=_interopRequireDefault(_SetGreeting),_Dialog=__webpack_require__("W7fc"),_config=__webpack_require__("CJQX"),_config2=_interopRequireDefault(_config),Setting=function(_Component){function Setting(props){_classCallCheck(this,Setting);var _this=_possibleConstructorReturn(this,(Setting.__proto__||Object.getPrototypeOf(Setting)).call(this,props));return _this.state={"settingDate":[]},_this.config=(0,_config2["default"])(props.imcore.env),_this}return _inherits(Setting,_Component),_createClass(Setting,[{"key":"componentDidMount","value":function(){var _props=this.props,imcore=_props.imcore,actions=_props.actions,setting=_props.setting,_refs=(_props.show,this.refs),settingDom=_refs.settingDom;_refs.greetingBtn;actions.settingList(imcore),setting&&this.setState({"settingDate":this.settingDate(setting)}),$(document).on("click.setting",function(event){0===$(settingDom).has(event.target).length&&0===$(".link-open-setting").has(event.target).length&&actions.settingShow(!0)})}},{"key":"componentWillUnmount","value":function(){$(document).off("click.setting")}},{"key":"componentWillReceiveProps","value":function(nextProps){var _props2=this.props;_props2.imcore,_props2.actions,_props2.setting;this.setState({"settingDate":this.settingDate(nextProps.setting)})}},{"key":"settingDate","value":function(options){var imcore=this.props.imcore,settingDataBH=[{"title":"消息提醒设置","event":"message","option":[{"icon":options.message,"text":"接收消息并且提醒","status":!0},{"icon":!options.message,"text":"接收消息但不提醒","status":!1}]},{"title":"对话框设置","event":"dialog","option":[{"icon":options.dialog,"text":"按Enter发送消息","status":!0},{"icon":!options.dialog,"text":"按Ctrl+Enter发送消息","status":!1}]}],settingDataC=[{"title":"自动打招呼设置","event":"greeting","option":[{"icon":options.greeting,"text":"开启","status":!0,"tips":"设置打招呼语"},{"icon":!options.greeting,"text":"关闭","status":!1}]}];return"c"===imcore.env?settingDataBH.concat(settingDataC):"b"===imcore.env||"h"===imcore.env?settingDataBH:void 0}},{"key":"clickSelect","value":function(event,icon){var _props3=this.props,imcore=_props3.imcore,actions=_props3.actions,setting=_props3.setting,greetingType=_props3.greetingType;setting[event]!==icon&&actions.settingSelect(event,icon,setting,imcore,greetingType,this.config.tlogs)}},{"key":"showGreeting","value":function(status){var _props4=this.props,actions=(_props4.imcore,_props4.actions);status&&(actions.greetingShow(!0),actions.settingShow(!0))}},{"key":"closeDialog","value":function(){var _props5=this.props,actions=(_props5.imcore,_props5.actions);actions.greetingShow(!1),actions.settingShow(!1)}},{"key":"render","value":function(){var _this2=this,_props6=this.props,imcore=_props6.imcore,setting=(_props6.actions,_props6.setting),show=_props6.show,setGreetingShow=_props6.setGreetingShow,settingDate=this.state.settingDate;return _react2["default"].createElement("div",{"className":(0,_classnames2["default"])("set-box",{"hide":!show}),"ref":"settingDom"},setting&&settingDate.map(function(v,i){return _react2["default"].createElement("dl",{"key":i},_react2["default"].createElement("dt",null,v.title),v.option&&v.option.map(function(m,n){return _react2["default"].createElement("dd",{"key":n},_react2["default"].createElement("label",{"onClick":function(){return _this2.clickSelect(v.event,m.status)}},_react2["default"].createElement("em",{"className":(0,_classnames2["default"])("webim-icons16",{"icons16-radio":!m.icon,"icons16-radio-checked":m.icon})}),m.text),m.tips&&_react2["default"].createElement("a",{"ref":"greetingBtn","onClick":function(){return _this2.showGreeting(m.icon)},"className":(0,_classnames2["default"])({"muted":!m.icon}),"href":"javascript:;"},m.tips))}))}),_react2["default"].createElement("span",{"className":"triangle"}),_react2["default"].createElement(_Dialog.PanelDialog,{"id":"greeting","visible":setGreetingShow,"onClose":function(){_this2.closeDialog()},"header":!0,"backBtn":!0,"footer":!1,"title":"请选择打招呼语","position":"bottom","width":"100%"},_react2["default"].createElement(_SetGreeting2["default"],{"imcore":imcore})))}}]),Setting}(_react.Component),mapStateToProps=function(state){return{"setting":state.setting.setting,"show":state.setting.show,"setGreetingShow":state.setGreeting.show}},mapDispatchToProps=function(dispatch){return{"actions":(0,_redux.bindActionCreators)(Object.assign({},_actions.settingActions,_actions.setGreetingActions),dispatch)}};exports["default"]=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(Setting)},"wBvH":function(module,exports,__webpack_require__){"use strict";function Txt(props){var message=props.message,str=(props.imcore,"");return message.data&&(str=message.data.replace(/[<>]/g,function(str){switch(str){case"<":return"&lt;";case">":return"&gt;"}}).replace(/\[[^\[\]]+\]/g,function(str){return _constants.Emotions[str]?'<img class="emoji" src='+_constants.Emotions[str]+" title="+str+">":str||""}).replace(/\n/g,"<br/>")),_react2["default"].createElement("div",{"className":"content","dangerouslySetInnerHTML":{"__html":str}})}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=Txt;var _constants=__webpack_require__("acFS"),_react=(__webpack_require__("O4JY"),__webpack_require__("zG6l"),__webpack_require__("Jmof")),_react2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_react)},"wLXD":function(module,exports){module.exports=ReactDOM},"wR3R":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_36.669d135d.png"},"wVNl":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.hcoreApi=exports.historyContactsApi=exports.messageApi=exports.historyApi=exports.contactsApi=void 0;var _contacts=__webpack_require__("p9vN"),_contactsApi=_interopRequireWildcard(_contacts),_history=__webpack_require__("qvOr"),_historyApi=_interopRequireWildcard(_history),_message=__webpack_require__("Zha5"),_messageApi=_interopRequireWildcard(_message),_historyContacts=__webpack_require__("Bev/"),_historyContactsApi=_interopRequireWildcard(_historyContacts),_hcore=__webpack_require__("/flV"),_hcoreApi=_interopRequireWildcard(_hcore);exports.contactsApi=_contactsApi,exports.historyApi=_historyApi,exports.messageApi=_messageApi,exports.historyContactsApi=_historyContactsApi,exports.hcoreApi=_hcoreApi},"wmWy":function(module,exports,__webpack_require__){"use strict";function openToast(_ref){var text=_ref.text,_ref$time=_ref.time,time=void 0===_ref$time?_constants.enums.DEFAULT_TOAST_TIME:_ref$time,top=_ref.top;return function(dispatch,getState){var timer=getState().toast.timer;timer&&clearTimeout(timer),0!==time&&(timer=setTimeout(function(){return dispatch(closeToast())},time)),dispatch({"type":ActionType.OPEN_TOAST,"payload":{"text":text,"time":time,"timer":timer,"top":top,"mask":!1,"show":!0}})}}function closeToast(){return{"type":ActionType.CLOSE_TOAST,"payload":{"text":"","timer":null,"show":!1}}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.openToast=openToast,exports.closeToast=closeToast;var _ActionType=__webpack_require__("TV+w"),ActionType=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}(_ActionType),_constants=__webpack_require__("acFS")},"wqbf":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?(0,_getRawTag2["default"])(value):(0,_objectToString2["default"])(value)}Object.defineProperty(exports,"__esModule",{"value":!0});var _Symbol2=__webpack_require__("EZG+"),_Symbol3=_interopRequireDefault(_Symbol2),_getRawTag=__webpack_require__("LF1K"),_getRawTag2=_interopRequireDefault(_getRawTag),_objectToString=__webpack_require__("X0mE"),_objectToString2=_interopRequireDefault(_objectToString),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=_Symbol3["default"]?_Symbol3["default"].toStringTag:void 0;exports["default"]=baseGetTag},"x1Cn":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_15.2660493a.png"},"x52Y":function(module,exports,__webpack_require__){"use strict";(function(process){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;return"Given action "+(actionType&&'"'+actionType.toString()+'"'||"an action")+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function getUnexpectedStateShapeWarningMessage(inputState,reducers,action,unexpectedKeyCache){var reducerKeys=Object.keys(reducers),argumentName=action&&action.type===_createStore.ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===reducerKeys.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!(0,_isPlainObject2["default"])(inputState))return"The "+argumentName+' has unexpected type of "'+{}.toString.call(inputState).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+reducerKeys.join('", "')+'"';var unexpectedKeys=Object.keys(inputState).filter(function(key){return!reducers.hasOwnProperty(key)&&!unexpectedKeyCache[key]});return unexpectedKeys.forEach(function(key){unexpectedKeyCache[key]=!0}),unexpectedKeys.length>0?"Unexpected "+(unexpectedKeys.length>1?"keys":"key")+' "'+unexpectedKeys.join('", "')+'" found in '+argumentName+'. Expected to find one of the known reducer keys instead: "'+reducerKeys.join('", "')+'". Unexpected keys will be ignored.':void 0}function assertReducerShape(reducers){Object.keys(reducers).forEach(function(key){var reducer=reducers[key];if(void 0===reducer(void 0,{"type":_createStore.ActionTypes.INIT}))throw new Error('Reducer "'+key+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===reducer(void 0,{"type":"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+key+"\" returned undefined when probed with a random type. Don't try to handle "+_createStore.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function combineReducers(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];"production"!==process.env.NODE_ENV&&void 0===reducers[key]&&(0,_warning2["default"])('No reducer provided for key "'+key+'"'),"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var finalReducerKeys=Object.keys(finalReducers),unexpectedKeyCache=void 0;"production"!==process.env.NODE_ENV&&(unexpectedKeyCache={});var shapeAssertionError=void 0;try{assertReducerShape(finalReducers)}catch(e){shapeAssertionError=e}return function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments[1];if(shapeAssertionError)throw shapeAssertionError;if("production"!==process.env.NODE_ENV){var warningMessage=getUnexpectedStateShapeWarningMessage(state,finalReducers,action,unexpectedKeyCache);warningMessage&&(0,_warning2["default"])(warningMessage)}for(var hasChanged=!1,nextState={},_i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i],reducer=finalReducers[_key],previousStateForKey=state[_key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=combineReducers;var _createStore=__webpack_require__("ZBO9"),_isPlainObject=__webpack_require__("sMP3"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_warning=__webpack_require__("DEeB"),_warning2=_interopRequireDefault(_warning)}).call(exports,__webpack_require__("W2nU"))},"xDUd":function(module,exports){},"xKIR":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.INITIAL=0,exports.PREPROCESS_SUCCESS=1,exports.SEND_SUCCESS=2,exports.RESEND=3,exports.PREPROCESS_FAILED=4,exports.SEND_FAILED=5},"xdnl":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"images/plugins/imui/emotions/xhsemoji_27.c30f8ad1.png"},"xkCR":function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.initJobMessage=exports.initResumeMessage=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_regenerator),_utils=(exports.initResumeMessage=function(){var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(env,from){var config,data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,config=(0,_config.setImConfig)(env),_context.next=4,(0,_utils.pajax)({"url":config.ajaxUrl.loadresumeinfo+"?oppositeEmUserName="+from});case 4:if(data=_context.sent,!data.flag){_context.next=9;break}return _context.abrupt("return",data.data);case 9:throw new Error(data.msg);case 10:_context.next=15;break;case 12:throw _context.prev=12,_context.t0=_context["catch"](0),new Error(_context.t0);case 15:case"end":return _context.stop()}},_callee,this,[[0,12]])}));return function(_x,_x2){return _ref.apply(this,arguments)}}(),exports.initJobMessage=function(){var _ref2=_asyncToGenerator(_regenerator2["default"].mark(function _callee2(env,jobId,jobKind,senderKind,bsData){var config,data;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,config=(0,_config.setImConfig)(env),_context2.next=4,(0,_utils.pajax)({"url":config.ajaxUrl.loadjobinfo,"data":{"jobId":jobId,"jobKind":jobKind,"fromUK":senderKind}});case 4:if(data=_context2.sent,!data.flag){_context2.next=9;break}return _context2.abrupt("return",Object.assign(data.data,{"bsData":bsData}));case 9:return _context2.abrupt("return",{"exist":!1});case 10:_context2.next=15;break;case 12:throw _context2.prev=12,_context2.t0=_context2["catch"](0),new Error(_context2.t0);case 15:case"end":return _context2.stop()}},_callee2,this,[[0,12]])}));return function(_x3,_x4,_x5,_x6,_x7){return _ref2.apply(this,arguments)}}(),__webpack_require__("c3kU")),_config=__webpack_require__("GbPe")},"xto4":function(module,exports){},"yVVU":function(module,exports,__webpack_require__){"use strict";function historyReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:historyInitialState,action=arguments[1];switch(action.type){case _actions.ActionType.GET_INITIAL_SERVER_HISTORY_START:return Object.assign({},state,{"loadingInitialHistory":!0});case _actions.ActionType.GET_INITIAL_SERVER_HISTORY_FAIL:return Object.assign({},state,{"loadingInitialHistory":!1});case _actions.ActionType.GET_INITIAL_SERVER_HISTORY:return Object.assign({},state,{"initialServerHistory":action.payload,"loadingInitialHistory":!1});case _actions.ActionType.CLEAR_INITIAL_SERVER_HISTORY:return Object.assign({},state,{"initialServerHistory":[]});case _actions.ActionType.SHOW_HISTORY:case _actions.ActionType.HIDE_HISTORY:return Object.assign({},state,action.payload);case _actions.ActionType.GET_SERVER_HISTORY_STARTED:case _actions.ActionType.GET_SERVER_HISTORY_FAILED:return Object.assign({},state,action.payload);case _actions.ActionType.GET_SERVER_HISTORY_SUCCESS:return Object.assign({},state,{"loading":action.payload.loading,"lastmsgid":action.payload.lastmsgid,"serverHistory":action.payload.newpage.concat(state.serverHistory),"nomore":action.payload.nomore});case _actions.ActionType.UPDATE_INITIAL_SERVER_HISTORY:return action.payload?Object.assign({},state,{"initialServerHistory":action.payload}):state;default:return state}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.historyInitialState=void 0,exports.historyReducer=historyReducer;var _actions=__webpack_require__("IPoy"),historyInitialState=exports.historyInitialState={"visible":!1,"initialServerHistory":[],"serverHistory":[],"loading":!1,"lastmsgid":-1,"nomore":!1,"loadingInitialHistory":!1}},"yWdb":function(module,exports){},"yqpj":function(module,exports){},"yyvF":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function match(arg,factories,name){for(var i=factories.length-1;i>=0;i--){var result=factories[i](arg);if(result)return result}return function(dispatch,options){throw new Error("Invalid value of type "+(void 0===arg?"undefined":_typeof(arg))+" for "+name+" argument when connecting component "+options.wrappedComponentName+".")}}function strictEqual(a,b){return a===b}function createConnect(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$connectHOC=_ref.connectHOC,connectHOC=void 0===_ref$connectHOC?_connectAdvanced2["default"]:_ref$connectHOC,_ref$mapStateToPropsF=_ref.mapStateToPropsFactories,mapStateToPropsFactories=void 0===_ref$mapStateToPropsF?_mapStateToProps2["default"]:_ref$mapStateToPropsF,_ref$mapDispatchToPro=_ref.mapDispatchToPropsFactories,mapDispatchToPropsFactories=void 0===_ref$mapDispatchToPro?_mapDispatchToProps2["default"]:_ref$mapDispatchToPro,_ref$mergePropsFactor=_ref.mergePropsFactories,mergePropsFactories=void 0===_ref$mergePropsFactor?_mergeProps2["default"]:_ref$mergePropsFactor,_ref$selectorFactory=_ref.selectorFactory,selectorFactory=void 0===_ref$selectorFactory?_selectorFactory2["default"]:_ref$selectorFactory;return function(mapStateToProps,mapDispatchToProps,mergeProps){var _ref2=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},_ref2$pure=_ref2.pure,pure=void 0===_ref2$pure||_ref2$pure,_ref2$areStatesEqual=_ref2.areStatesEqual,areStatesEqual=void 0===_ref2$areStatesEqual?strictEqual:_ref2$areStatesEqual,_ref2$areOwnPropsEqua=_ref2.areOwnPropsEqual,areOwnPropsEqual=void 0===_ref2$areOwnPropsEqua?_shallowEqual2["default"]:_ref2$areOwnPropsEqua,_ref2$areStatePropsEq=_ref2.areStatePropsEqual,areStatePropsEqual=void 0===_ref2$areStatePropsEq?_shallowEqual2["default"]:_ref2$areStatePropsEq,_ref2$areMergedPropsE=_ref2.areMergedPropsEqual,areMergedPropsEqual=void 0===_ref2$areMergedPropsE?_shallowEqual2["default"]:_ref2$areMergedPropsE,extraOptions=_objectWithoutProperties(_ref2,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),initMapStateToProps=match(mapStateToProps,mapStateToPropsFactories,"mapStateToProps"),initMapDispatchToProps=match(mapDispatchToProps,mapDispatchToPropsFactories,"mapDispatchToProps"),initMergeProps=match(mergeProps,mergePropsFactories,"mergeProps");return connectHOC(selectorFactory,_extends({"methodName":"connect","getDisplayName":function(name){return"Connect("+name+")"},"shouldHandleStateChanges":Boolean(mapStateToProps),"initMapStateToProps":initMapStateToProps,"initMapDispatchToProps":initMapDispatchToProps,"initMergeProps":initMergeProps,"pure":pure,"areStatesEqual":areStatesEqual,"areOwnPropsEqual":areOwnPropsEqual,"areStatePropsEqual":areStatePropsEqual,"areMergedPropsEqual":areMergedPropsEqual},extraOptions))}}Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.createConnect=createConnect;var _connectAdvanced=__webpack_require__("SAW1"),_connectAdvanced2=_interopRequireDefault(_connectAdvanced),_shallowEqual=__webpack_require__("aQGf"),_shallowEqual2=_interopRequireDefault(_shallowEqual),_mapDispatchToProps=__webpack_require__("l5Tb"),_mapDispatchToProps2=_interopRequireDefault(_mapDispatchToProps),_mapStateToProps=__webpack_require__("1iL5"),_mapStateToProps2=_interopRequireDefault(_mapStateToProps),_mergeProps=__webpack_require__("QGoG"),_mergeProps2=_interopRequireDefault(_mergeProps),_selectorFactory=__webpack_require__("VDa7"),_selectorFactory2=_interopRequireDefault(_selectorFactory),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports["default"]=createConnect()},"z56A":function(module,exports,__webpack_require__){"use strict";jQuery.extend({"createUploadIframe":function(id,uri){var frameId="jUploadFrame"+id,iframeHtml='<iframe id="'+frameId+'" name="'+frameId+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof uri?iframeHtml+=' src="javascript:false"':"string"==typeof uri&&(iframeHtml+=' src="'+uri+'"')),iframeHtml+="></iframe>",jQuery(iframeHtml).appendTo(document.body),jQuery("#"+frameId).get(0)},"createUploadForm":function(id,fileElementId,data,crossDomain,onAppend){var formId="jUploadForm"+id,form=jQuery('<form action="" method="POST" name="'+formId+'" id="'+formId+'" enctype="multipart/form-data"></form>');if(data)if("[object Array]"===Object.prototype.toString.call(data))for(var i=0;i<data.length;i++)jQuery('<input type="hidden" name="'+data[i].name+'" />').val(data[i].value).appendTo(form);else for(var i in data)jQuery('<input type="hidden" name="'+i+'" />').val(data[i]).appendTo(form);crossDomain&&jQuery('<input type="hidden" name="callback" />').val("<script type='text/javascript'>try{document.domain=window.location.hostname.split('.').reverse().slice(0,2).reverse().join('.');}catch(e){}<\/script>").appendTo(form);var oldElement=jQuery("#"+fileElementId);return jQuery(oldElement).appendTo(form),jQuery(form).css("position","absolute"),jQuery(form).css("top","-1200px"),jQuery(form).css("left","-1200px"),jQuery(form).appendTo("body"),onAppend&&onAppend(),form},"ajaxFileUpload":function(s){var handleError=function(s,xhr,status,e){s.error&&s.error(xhr,status,e),s.global&&jQuery.event.trigger("ajaxError",[xhr,s,e])};s=jQuery.extend({},jQuery.ajaxSettings,s);var id=(new Date).getTime(),form=jQuery.createUploadForm(id,s.fileElementId,void 0!==s.data&&s.data,s.crossDomain,s.onAppend),frameId=(jQuery.createUploadIframe(id,s.secureuri),"jUploadFrame"+id),formId="jUploadForm"+id;s.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var requestDone=!1,xml={};s.global&&jQuery.event.trigger("ajaxSend",[xml,s]);var uploadCallback=function(isTimeout){var io=document.getElementById(frameId),execontent=function(){try{io.contentWindow?(xml.responseText=io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:null,xml.responseXML=io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document):io.contentDocument&&(xml.responseText=io.contentDocument.document.body?io.contentDocument.document.body.innerHTML:null,xml.responseXML=io.contentDocument.document.XMLDocument?io.contentDocument.document.XMLDocument:io.contentDocument.document)}catch(e){handleError(s,xml,null,e)}if(xml||"timeout"==isTimeout){requestDone=!0;var status;try{if("error"!=(status="timeout"!=isTimeout?"success":"error")){var data=jQuery.uploadHttpData(xml,s.dataType);s.success&&s.success(data,status),s.global&&jQuery.event.trigger("ajaxSuccess",[xml,s])}else handleError(s,xml,status)}catch(e){status="error",handleError(s,xml,status,e)}s.global&&jQuery.event.trigger("ajaxComplete",[xml,s]),s.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),s.complete&&s.complete(xml,status),jQuery(io).unbind(),setTimeout(function(){try{jQuery(io).remove(),jQuery(form).remove()}catch(e){handleError(s,xml,null,e)}},100),xml=null}};if(s.crossDomain){window.setTimeout(function(){try{execontent()}catch(e){}},1e3)}else execontent()};s.timeout>0&&setTimeout(function(){requestDone||uploadCallback("timeout")},s.timeout);try{var form=jQuery("#"+formId);jQuery(form).attr("action",s.url),jQuery(form).attr("method","POST"),jQuery(form).attr("target",frameId),form.encoding?jQuery(form).attr("encoding","multipart/form-data"):jQuery(form).attr("enctype","multipart/form-data"),jQuery(form).submit()}catch(e){handleError(s,xml,null,e)}return jQuery("#"+frameId).load(uploadCallback),{"abort":function(){}}},"uploadHttpData":function uploadHttpData(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,data=data.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gim,"").replace(/<[^>]+>/g,""),"script"==type&&jQuery.globalEval(data),"json"==type&&eval("data = "+data),"html"==type&&jQuery("<div>").html(data).evalScripts(),data}})},"zG6l":function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getJobKindEnum(jobkind){switch(jobkind){case"HJOB":return"1";case"EJOB":return"2";case"GJOB":return"3";case"CJOB":return"4";case"RPOJOB":return"5";default:return"1"}}function messageHistoryFilter(message){var type=message.type,extType=message.extType,messageSource=void 0,senderKind=void 0,receiverKind=void 0;switch(void 0!=message.messageSource?(messageSource=message.messageSource,senderKind=message.senderKind,receiverKind=message.receiverKind):message.ext&&(messageSource=message.ext.extBody.messageSource,senderKind=message.ext.extBody.senderKind,receiverKind=message.ext.extBody.receiverKind),type){case"txt":if((1!=messageSource||0!=receiverKind||0!=senderKind||extType!==_enums.ExtType.MESSAGE_RESUME)&&(1!=messageSource||1!=receiverKind||1!=senderKind||extType!==_enums.ExtType.MESSAGE_SEND_APPLYRESUME)&&_enums.CompatibleExtType.TXT_EXT_TYPES_ARR.includes(extType))return!0;break;case"img":if(_enums.CompatibleExtType.IMG_EXT_TYPES_ARR.includes(extType))return!0}return!1}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.HistoryMsg=void 0;var _regenerator=__webpack_require__("Xxa5"),_regenerator2=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}(_regenerator),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.messageHistoryFilter=messageHistoryFilter;var _enums=__webpack_require__("O4JY"),_api=__webpack_require__("xkCR"),_constants=(function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj["default"]=obj}(_api),__webpack_require__("E9QE"));exports.HistoryMsg=function(){function HistoryMsg(){_classCallCheck(this,HistoryMsg)}return _createClass(HistoryMsg,[{"key":"set","value":function(options){var _options$msg=options.msg,direction=_options$msg.direction,msgId=_options$msg.msgId,payload=_options$msg.payload,msgTime=_options$msg.msgTime,userId=(_options$msg.oppositeUserId,_options$msg.timestamp,_options$msg.userId),oppositeImId=_options$msg.oppositeImId,imId=_options$msg.imId,userDetail=options.userDetail,targetDetail=options.targetDetail,content=JSON.parse(payload);if(this.id=msgId,this.from="1"===direction?oppositeImId:imId,this.to="1"===direction?imId:oppositeImId,this.value=content.bodies,this.type=this.value[0].type,this.extType=content.ext&&content.ext.extType-0,this.timestamp=msgTime||Date.now(),this.state=2,this.data=this.value[0].msg,this.senderKind="1"===direction?targetDetail.oppositeUserKind:userDetail.oppositeUserKind,this.receiverKind="0"===direction?targetDetail.oppositeUserKind:userDetail.oppositeUserKind,this.userId=userId,this.jobId=content.ext&&content.ext.extBody.jobId,this.jobKind=content.ext&&content.ext.extBody.jobKind,this.reason=content.ext&&content.ext.extBody.reason,this.messageSource=content.ext&&content.ext.extBody.messageSource,this.extBody=content.ext&&content.ext.extBody,this.visible=!0,"img"===this.type)this.data=this.value[0].url||this.value[0].msg;else switch(this.extType){case _enums.ExtType.MESSAGE_RESUME:userDetail.oppositeUserKind==_constants.UserType.USER_TYPE_C?(this.resumeUrl="//c.liepin.com/resume/getdefaultresume/",this.name=userDetail.oppositeUserName,this.title=userDetail.oppositeUserTitle,this.company=userDetail.oppositeUserCompany):(this.name=targetDetail.oppositeUserNameShow||targetDetail.oppositeUserName,this.title=targetDetail.oppositeUserTitle,this.company=targetDetail.oppositeUserCompany,userDetail.oppositeUserKind==_constants.UserType.USER_TYPE_H&&(this.resumeUrl="//h.liepin.com/resume/showresumedetail4im/?oppositeEmUserName="+targetDetail.oppositeImId));break;case _enums.ExtType.MESSAGE_SEND_JOB:this.jobId=content.ext.extBody.jobId,this.jobKind=content.ext.extBody.jobKind,this.isHandler=content.ext.extBody.isHandler,this.bsData=content.ext.extBody.bsData||null;break;case _enums.ExtType.MESSAGE_SEND_APPLYRESUME:userDetail.oppositeUserKind==_constants.UserType.USER_TYPE_C?(this.resumeUrl="//c.liepin.com/resume/getdefaultresume/",this.name=userDetail.oppositeUserName):(userDetail.oppositeUserKind==_constants.UserType.USER_TYPE_H&&(this.resumeUrl="//h.liepin.com/resume/showresumedetail4im/?oppositeEmUserName="+targetDetail.oppositeImId),userDetail.oppositeUserKind==_constants.UserType.USER_TYPE_B&&(this.resumeUrl="//lpt.liepin.com/resume/showresumecarte4im?usercId="+targetDetail.oppositeUserId+"&oppositeImId="+targetDetail.oppositeImId),this.name=targetDetail.oppositeUserName||targetDetail.oppositeUserNameShow);break;case _enums.ExtType.MESSAGE_SEND_RATINGBAR:break;case _enums.ExtType.MESSAGE_SEND_APPLYFAILDFEEDBACK:this.jobId=content.ext.extBody.jobId,this.jobKind=getJobKindEnum(content.ext.extBody.jobKind),this.reason=content.ext.extBody.reason,this.title=content.ext.extBody.title,this.salary=content.ext.extBody.salary,this.jobHref=content.ext.extBody.jobHref,this.jobName=content.ext.extBody.jobName;break;case _enums.ExtType.MESSAGE_SEND_APPLYSUCFEEDBACK:this.jobId=content.ext.extBody.jobId,this.jobKind=getJobKindEnum(content.ext.extBody.jobKind),this.title=content.ext.extBody.title,this.salary=content.ext.extBody.salary,this.jobHref=content.ext.extBody.jobHref,this.jobName=content.ext.extBody.jobName;break;case _enums.ExtType.MESSAGE_SEND_NAMECARD:this.jobKind=content.ext.extBody.jobKind,this.jobId=content.ext.extBody.jobId,this.resumeUrl=LT.Env.cRoot+"resume/getdefaultresume/";break;case _enums.ExtType.MESSAGE_ASK_RESUME:this.jobId=content.ext.extBody.jobId,this.jobKind=content.ext.extBody.jobKind}return this}},{"key":"fillInfo","value":function(){function fillInfo(_x){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regenerator2["default"].mark(function _callee(imcore){var info;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,this.receiverKind==this.senderKind){_context.next=9;break}return _context.next=4,imcore.fillInfo(imcore,this,this.extBody);case 4:if(_context.t0=_context.sent,_context.t0){_context.next=7;break}_context.t0={};case 7:info=_context.t0,Object.assign(this,Object.assign({},info));case 9:return _context.abrupt("return",this);case 12:throw _context.prev=12,_context.t1=_context["catch"](0),imcore.handleErr(_context.t1),_context.t1;case 16:case"end":return _context.stop()}},_callee,this,[[0,12]])}));return fillInfo}()},{"key":"getDetailFormat","value":function(){return{"id":this.id,"type":this.type,"extType":this.extType,"from":this.from,"data":this.data,"to":this.to,"timestamp":this.timestamp,"state":this.state,"name":this.name,"title":this.title,"company":this.company,"resumeUrl":this.resumeUrl,"jobId":this.jobId,"jobName":this.jobName,"jobHref":this.jobHref,"bsData":this.bsData,"salary":this.salary,"dqName":this.dqName,"sex":this.sex,"dq":this.dq,"workyear":this.workyear,"res_edulevel":this.res_edulevel,"res_id_encode":this.res_id_encode,"exist":this.exist,"jobKind":this.jobKind,"isHandler":this.isHandler,"reason":this.reason,"senderKind":this.senderKind,"receiverKind":this.receiverKind,"messageSource":this.messageSource,"visible":this.visible}}}]),HistoryMsg}()},"zyFQ":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{"constructor":{"value":subClass,"enumerable":!1,"writable":!0,"configurable":!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{"value":!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("Jmof"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("HW6M"),_config=(_interopRequireDefault(_classnames),__webpack_require__("CJQX")),_config2=_interopRequireDefault(_config),_addTlog=__webpack_require__("rF9R"),_reactRedux=__webpack_require__("RH2O"),ChatTitleCattention=function(_Component){function ChatTitleCattention(props){_classCallCheck(this,ChatTitleCattention);var _this=_possibleConstructorReturn(this,(ChatTitleCattention.__proto__||Object.getPrototypeOf(ChatTitleCattention)).call(this,props));return _this.config=(0,_config2["default"])(props.imcore.env),_this}return _inherits(ChatTitleCattention,_Component),_createClass(ChatTitleCattention,[{"key":"componentDidMount","value":function(){this.initAttention(this.props)}},{"key":"initAttention","value":function(props){LT.Attention=LT.Attention||Apps.Attention,LT.Attention.get(props.uid)}},{"key":"componentWillReceiveProps","value":function(nextProps){this.initAttention(nextProps)}},{"key":"attention","value":function(e){var _props=this.props,uid=(_props.imcore,_props.uid),that=this;window.tlog=window.tlog||[],$('#im-root [data-selector="attention"]').hasClass("btn-attention-cancel")?(tlog.push(that.config.tlogs.ATTENTION_BTN),LT.Attention.remove(uid)):(tlog.push(that.config.tlogs.CANCEL_ATTENTION_BTN),LT.Attention.add(uid))}},{"key":"render","value":function(){var _this2=this,uid=this.props.uid;return _react2["default"].createElement(_addTlog.Atlog,{"href":"javascript:;","data-uid":uid,"className":"btn-controller btn-attention btn-attention-add","data-selector":"attention","ref":"attention","onClick":function(){return _this2.attention()}},"关注")}}]),ChatTitleCattention}(_react.Component);exports["default"]=(0,_reactRedux.connect)(null,null)(ChatTitleCattention)}},["brzr"]);